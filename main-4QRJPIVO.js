import{b as mg,c as vg,f as eb,g as yg}from"./chunk-LJ5XHLMQ.js";import{a as D,b as P,d as vn,f as QC,g as XC,h as p}from"./chunk-FK42CRUA.js";var qp=vn(zp=>{"use strict";Object.defineProperty(zp,"__esModule",{value:!0});var Gp=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};zp.default=Gp});var Zp=vn($s=>{"use strict";var j_=$s&&$s.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty($s,"__esModule",{value:!0});var kR=j_((yg(),XC(eb))),PR=j_(qp()),Wp=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=kR.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=Object.assign({},this.headers),this.headers[t]=e,this}then(t,e){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let r=this.fetch,i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(o=>p(this,null,function*(){var s,a,l;let c=null,u=null,d=null,h=o.status,f=o.statusText;if(o.ok){if(this.method!=="HEAD"){let N=yield o.text();N===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=N:u=JSON.parse(N))}let C=(s=this.headers.Prefer)===null||s===void 0?void 0:s.match(/count=(exact|planned|estimated)/),I=(a=o.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");C&&I&&I.length>1&&(d=parseInt(I[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{let C=yield o.text();try{c=JSON.parse(C),Array.isArray(c)&&o.status===404&&(u=[],c=null,h=200,f="OK")}catch{o.status===404&&C===""?(h=204,f="No Content"):c={message:C}}if(c&&this.isMaybeSingle&&(!((l=c?.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,h=200,f="OK"),c&&this.shouldThrowOnError)throw new PR.default(c)}return{error:c,data:u,count:d,status:h,statusText:f}}));return this.shouldThrowOnError||(i=i.catch(o=>{var s,a,l;return{error:{message:`${(s=o?.name)!==null&&s!==void 0?s:"FetchError"}: ${o?.message}`,details:`${(a=o?.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=o?.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}};$s.default=Wp});var Kp=vn(Hs=>{"use strict";var FR=Hs&&Hs.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Hs,"__esModule",{value:!0});var LR=FR(Zp()),Yp=class extends LR.default{select(t){let e=!1,r=(t??"*").split("").map(i=>/\s/.test(i)&&!e?"":(i==='"'&&(e=!e),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:i,referencedTable:o=i}={}){let s=o?`${o}.order`:"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){let i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:i=r}={}){let o=typeof i>"u"?"offset":`${i}.offset`,s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(s,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:i=!1,wal:o=!1,format:s="text"}={}){var a;let l=[t?"analyze":null,e?"verbose":null,r?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${s}; for="${c}"; options=${l};`,s==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Hs.default=Yp});var cu=vn(Gs=>{"use strict";var jR=Gs&&Gs.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Gs,"__esModule",{value:!0});var VR=jR(Kp()),Jp=class extends VR.default{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}in(t,e){let r=Array.from(new Set(e)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");let s=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${o}fts${s}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){let i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}};Gs.default=Jp});var Xp=vn(qs=>{"use strict";var UR=qs&&qs.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(qs,"__esModule",{value:!0});var zs=UR(cu()),Qp=class{constructor(t,{headers:e={},schema:r,fetch:i}){this.url=t,this.headers=e,this.schema=r,this.fetch=i}select(t,{head:e=!1,count:r}={}){let i=e?"HEAD":"GET",o=!1,s=(t??"*").split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",s),r&&(this.headers.Prefer=`count=${r}`),new zs.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:e,defaultToNull:r=!0}={}){let i="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),e&&o.push(`count=${e}`),r||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){let s=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(s.length>0){let a=[...new Set(s)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new zs.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:i,defaultToNull:o=!0}={}){let s="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(e!==void 0&&this.url.searchParams.set("on_conflict",e),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),o||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){let l=t.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){let c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new zs.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:e}={}){let r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),e&&i.push(`count=${e}`),this.headers.Prefer=i.join(","),new zs.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){let e="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new zs.default({method:e,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};qs.default=Qp});var V_=vn(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});uu.version=void 0;uu.version="0.0.0-automated"});var U_=vn(du=>{"use strict";Object.defineProperty(du,"__esModule",{value:!0});du.DEFAULT_HEADERS=void 0;var BR=V_();du.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${BR.version}`}});var $_=vn(Ws=>{"use strict";var B_=Ws&&Ws.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ws,"__esModule",{value:!0});var $R=B_(Xp()),HR=B_(cu()),GR=U_(),eg=class n{constructor(t,{headers:e={},schema:r,fetch:i}={}){this.url=t,this.headers=Object.assign(Object.assign({},GR.DEFAULT_HEADERS),e),this.schemaName=r,this.fetch=i}from(t){let e=new URL(`${this.url}/${t}`);return new $R.default(e,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new n(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,e={},{head:r=!1,get:i=!1,count:o}={}){let s,a=new URL(`${this.url}/rpc/${t}`),l;r||i?(s=r?"HEAD":"GET",Object.entries(e).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(s="POST",l=e);let c=Object.assign({},this.headers);return o&&(c.Prefer=`count=${o}`),new HR.default({method:s,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Ws.default=eg});var Y_=vn(Ve=>{"use strict";var io=Ve&&Ve.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.PostgrestError=Ve.PostgrestBuilder=Ve.PostgrestTransformBuilder=Ve.PostgrestFilterBuilder=Ve.PostgrestQueryBuilder=Ve.PostgrestClient=void 0;var H_=io($_());Ve.PostgrestClient=H_.default;var G_=io(Xp());Ve.PostgrestQueryBuilder=G_.default;var z_=io(cu());Ve.PostgrestFilterBuilder=z_.default;var q_=io(Kp());Ve.PostgrestTransformBuilder=q_.default;var W_=io(Zp());Ve.PostgrestBuilder=W_.default;var Z_=io(qp());Ve.PostgrestError=Z_.default;Ve.default={PostgrestClient:H_.default,PostgrestQueryBuilder:G_.default,PostgrestFilterBuilder:z_.default,PostgrestTransformBuilder:q_.default,PostgrestBuilder:W_.default,PostgrestError:Z_.default}});function qu(n,t){return Object.is(n,t)}var Re=null,ca=!1,Wu=1,wt=Symbol("SIGNAL");function Z(n){let t=Re;return Re=n,t}function Zu(){return Re}var ii={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function vo(n){if(ca)throw new Error("");if(Re===null)return;Re.consumerOnSignalRead(n);let t=Re.nextProducerIndex++;if(pa(Re),t<Re.producerNode.length&&Re.producerNode[t]!==n&&mo(Re)){let e=Re.producerNode[t];ha(e,Re.producerIndexOfThis[t])}Re.producerNode[t]!==n&&(Re.producerNode[t]=n,Re.producerIndexOfThis[t]=mo(Re)?_g(n,Re,t):0),Re.producerLastReadVersion[t]=n.version}function wg(){Wu++}function Yu(n){if(!(mo(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Wu)){if(!n.producerMustRecompute(n)&&!fa(n)){zu(n);return}n.producerRecomputeValue(n),zu(n)}}function Ku(n){if(n.liveConsumerNode===void 0)return;let t=ca;ca=!0;try{for(let e of n.liveConsumerNode)e.dirty||tb(e)}finally{ca=t}}function Ju(){return Re?.consumerAllowSignalWrites!==!1}function tb(n){n.dirty=!0,Ku(n),n.consumerMarkedDirty?.(n)}function zu(n){n.dirty=!1,n.lastCleanEpoch=Wu}function yo(n){return n&&(n.nextProducerIndex=0),Z(n)}function da(n,t){if(Z(t),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(mo(n))for(let e=n.nextProducerIndex;e<n.producerNode.length;e++)ha(n.producerNode[e],n.producerIndexOfThis[e]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function fa(n){pa(n);for(let t=0;t<n.producerNode.length;t++){let e=n.producerNode[t],r=n.producerLastReadVersion[t];if(r!==e.version||(Yu(e),r!==e.version))return!0}return!1}function wo(n){if(pa(n),mo(n))for(let t=0;t<n.producerNode.length;t++)ha(n.producerNode[t],n.producerIndexOfThis[t]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function _g(n,t,e){if(Cg(n),n.liveConsumerNode.length===0&&bg(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=_g(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(e),n.liveConsumerNode.push(t)-1}function ha(n,t){if(Cg(n),n.liveConsumerNode.length===1&&bg(n))for(let r=0;r<n.producerNode.length;r++)ha(n.producerNode[r],n.producerIndexOfThis[r]);let e=n.liveConsumerNode.length-1;if(n.liveConsumerNode[t]=n.liveConsumerNode[e],n.liveConsumerIndexOfThis[t]=n.liveConsumerIndexOfThis[e],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,t<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[t],i=n.liveConsumerNode[t];pa(i),i.producerIndexOfThis[r]=t}}function mo(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function pa(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Cg(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function bg(n){return n.producerNode!==void 0}function Qu(n,t){let e=Object.create(nb);e.computation=n,t!==void 0&&(e.equal=t);let r=()=>{if(Yu(e),vo(e),e.value===ua)throw e.error;return e.value};return r[wt]=e,r}var Hu=Symbol("UNSET"),Gu=Symbol("COMPUTING"),ua=Symbol("ERRORED"),nb=P(D({},ii),{value:Hu,dirty:!0,error:null,equal:qu,kind:"computed",producerMustRecompute(n){return n.value===Hu||n.value===Gu},producerRecomputeValue(n){if(n.value===Gu)throw new Error("Detected cycle in computations.");let t=n.value;n.value=Gu;let e=yo(n),r,i=!1;try{r=n.computation(),Z(null),i=t!==Hu&&t!==ua&&r!==ua&&n.equal(t,r)}catch(o){r=ua,n.error=o}finally{da(n,e)}if(i){n.value=t;return}n.value=r,n.version++}});function rb(){throw new Error}var Dg=rb;function Eg(n){Dg(n)}function Xu(n){Dg=n}var ib=null;function ed(n,t){let e=Object.create(ga);e.value=n,t!==void 0&&(e.equal=t);let r=()=>(vo(e),e.value);return r[wt]=e,r}function _o(n,t){Ju()||Eg(n),n.equal(n.value,t)||(n.value=t,ob(n))}function td(n,t){Ju()||Eg(n),_o(n,t(n.value))}var ga=P(D({},ii),{equal:qu,value:void 0,kind:"signal"});function ob(n){n.version++,wg(),Ku(n),ib?.()}function nd(n){let t=Z(null);try{return n()}finally{Z(t)}}var rd;function Co(){return rd}function yn(n){let t=rd;return rd=n,t}var ma=Symbol("NotFound");function B(n){return typeof n=="function"}function oi(n){let e=n(r=>{Error.call(r),r.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var va=oi(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function bo(n,t){if(n){let e=n.indexOf(t);0<=e&&n.splice(e,1)}}var Ie=class n{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let o of e)o.remove(this);else e.remove(this);let{initialTeardown:r}=this;if(B(r))try{r()}catch(o){t=o instanceof va?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Ig(o)}catch(s){t=t??[],s instanceof va?t=[...t,...s.errors]:t.push(s)}}if(t)throw new va(t)}}add(t){var e;if(t&&t!==this)if(this.closed)Ig(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&bo(e,t)}remove(t){let{_finalizers:e}=this;e&&bo(e,t),t instanceof n&&t._removeParent(this)}};Ie.EMPTY=(()=>{let n=new Ie;return n.closed=!0,n})();var id=Ie.EMPTY;function ya(n){return n instanceof Ie||n&&"closed"in n&&B(n.remove)&&B(n.add)&&B(n.unsubscribe)}function Ig(n){B(n)?n():n.unsubscribe()}var Ft={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var si={setTimeout(n,t,...e){let{delegate:r}=si;return r?.setTimeout?r.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){let{delegate:t}=si;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function wa(n){si.setTimeout(()=>{let{onUnhandledError:t}=Ft;if(t)t(n);else throw n})}function Do(){}var Sg=od("C",void 0,void 0);function xg(n){return od("E",void 0,n)}function Tg(n){return od("N",n,void 0)}function od(n,t,e){return{kind:n,value:t,error:e}}var ar=null;function ai(n){if(Ft.useDeprecatedSynchronousErrorHandling){let t=!ar;if(t&&(ar={errorThrown:!1,error:null}),n(),t){let{errorThrown:e,error:r}=ar;if(ar=null,e)throw r}}else n()}function Mg(n){Ft.useDeprecatedSynchronousErrorHandling&&ar&&(ar.errorThrown=!0,ar.error=n)}var lr=class extends Ie{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,ya(t)&&t.add(this)):this.destination=db}static create(t,e,r){return new li(t,e,r)}next(t){this.isStopped?ad(Tg(t),this):this._next(t)}error(t){this.isStopped?ad(xg(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?ad(Sg,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},cb=Function.prototype.bind;function sd(n,t){return cb.call(n,t)}var ld=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(r){_a(r)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(r){_a(r)}else _a(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){_a(e)}}},li=class extends lr{constructor(t,e,r){super();let i;if(B(t)||!t)i={next:t??void 0,error:e??void 0,complete:r??void 0};else{let o;this&&Ft.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&sd(t.next,o),error:t.error&&sd(t.error,o),complete:t.complete&&sd(t.complete,o)}):i=t}this.destination=new ld(i)}};function _a(n){Ft.useDeprecatedSynchronousErrorHandling?Mg(n):wa(n)}function ub(n){throw n}function ad(n,t){let{onStoppedNotification:e}=Ft;e&&si.setTimeout(()=>e(n,t))}var db={closed:!0,next:Do,error:ub,complete:Do};var ci=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ht(n){return n}function cd(...n){return ud(n)}function ud(n){return n.length===0?ht:n.length===1?n[0]:function(e){return n.reduce((r,i)=>i(r),e)}}var ee=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){let r=new n;return r.source=this,r.operator=e,r}subscribe(e,r,i){let o=hb(e)?e:new li(e,r,i);return ai(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(r){e.error(r)}}forEach(e,r){return r=Ag(r),new r((i,o)=>{let s=new li({next:a=>{try{e(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)}[ci](){return this}pipe(...e){return ud(e)(this)}toPromise(e){return e=Ag(e),new e((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=t=>new n(t),n})();function Ag(n){var t;return(t=n??Ft.Promise)!==null&&t!==void 0?t:Promise}function fb(n){return n&&B(n.next)&&B(n.error)&&B(n.complete)}function hb(n){return n&&n instanceof lr||fb(n)&&ya(n)}function dd(n){return B(n?.lift)}function X(n){return t=>{if(dd(t))return t.lift(function(e){try{return n(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Q(n,t,e,r,i){return new fd(n,t,e,r,i)}var fd=class extends lr{constructor(t,e,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function ui(){return X((n,t)=>{let e=null;n._refCount++;let r=Q(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){e=null;return}let i=n._connection,o=e;e=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});n.subscribe(r),r.closed||(e=n.connect())})}var di=class extends ee{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,dd(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Ie;let e=this.getSubject();t.add(this.source.subscribe(Q(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Ie.EMPTY)}return t}refCount(){return ui()(this)}};var Rg=oi(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var _e=(()=>{class n extends ee{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let r=new Ca(this,this);return r.operator=e,r}_throwIfClosed(){if(this.closed)throw new Rg}next(e){ai(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(e)}})}error(e){ai(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:r}=this;for(;r.length;)r.shift().error(e)}})}complete(){ai(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:r,isStopped:i,observers:o}=this;return r||i?id:(this.currentObservers=null,o.push(e),new Ie(()=>{this.currentObservers=null,bo(o,e)}))}_checkFinalizedStatuses(e){let{hasError:r,thrownError:i,isStopped:o}=this;r?e.error(i):o&&e.complete()}asObservable(){let e=new ee;return e.source=this,e}}return n.create=(t,e)=>new Ca(t,e),n})(),Ca=class extends _e{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.next)===null||r===void 0||r.call(e,t)}error(t){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.error)===null||r===void 0||r.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,r;return(r=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&r!==void 0?r:id}};var Fe=class extends _e{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:r}=this;if(t)throw e;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var Je=new ee(n=>n.complete());function Ng(n){return n&&B(n.schedule)}function Og(n){return n[n.length-1]}function ba(n){return B(Og(n))?n.pop():void 0}function Vn(n){return Ng(Og(n))?n.pop():void 0}function Pg(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(n,t||[])).next())})}function kg(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function cr(n){return this instanceof cr?(this.v=n,this):new cr(n)}function Fg(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(n,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(f){return function(y){return Promise.resolve(y).then(f,d)}}function a(f,y){r[f]&&(i[f]=function(C){return new Promise(function(I,N){o.push([f,C,I,N])>1||l(f,C)})},y&&(i[f]=y(i[f])))}function l(f,y){try{c(r[f](y))}catch(C){h(o[0][3],C)}}function c(f){f.value instanceof cr?Promise.resolve(f.value.v).then(u,d):h(o[0][2],f)}function u(f){l("next",f)}function d(f){l("throw",f)}function h(f,y){f(y),o.shift(),o.length&&l(o[0][0],o[0][1])}}function Lg(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof kg=="function"?kg(n):n[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(o){e[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}var Da=n=>n&&typeof n.length=="number"&&typeof n!="function";function Ea(n){return B(n?.then)}function Ia(n){return B(n[ci])}function Sa(n){return Symbol.asyncIterator&&B(n?.[Symbol.asyncIterator])}function xa(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function pb(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ta=pb();function Ma(n){return B(n?.[Ta])}function Aa(n){return Fg(this,arguments,function*(){let e=n.getReader();try{for(;;){let{value:r,done:i}=yield cr(e.read());if(i)return yield cr(void 0);yield yield cr(r)}}finally{e.releaseLock()}})}function Ra(n){return B(n?.getReader)}function Se(n){if(n instanceof ee)return n;if(n!=null){if(Ia(n))return gb(n);if(Da(n))return mb(n);if(Ea(n))return vb(n);if(Sa(n))return jg(n);if(Ma(n))return yb(n);if(Ra(n))return wb(n)}throw xa(n)}function gb(n){return new ee(t=>{let e=n[ci]();if(B(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function mb(n){return new ee(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function vb(n){return new ee(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,wa)})}function yb(n){return new ee(t=>{for(let e of n)if(t.next(e),t.closed)return;t.complete()})}function jg(n){return new ee(t=>{_b(n,t).catch(e=>t.error(e))})}function wb(n){return jg(Aa(n))}function _b(n,t){var e,r,i,o;return Pg(this,void 0,void 0,function*(){try{for(e=Lg(n);r=yield e.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=e.return)&&(yield o.call(e))}finally{if(i)throw i.error}}t.complete()})}function Qe(n,t,e,r=0,i=!1){let o=t.schedule(function(){e(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Na(n,t=0){return X((e,r)=>{e.subscribe(Q(r,i=>Qe(r,n,()=>r.next(i),t),()=>Qe(r,n,()=>r.complete(),t),i=>Qe(r,n,()=>r.error(i),t)))})}function Oa(n,t=0){return X((e,r)=>{r.add(n.schedule(()=>e.subscribe(r),t))})}function Vg(n,t){return Se(n).pipe(Oa(t),Na(t))}function Ug(n,t){return Se(n).pipe(Oa(t),Na(t))}function Bg(n,t){return new ee(e=>{let r=0;return t.schedule(function(){r===n.length?e.complete():(e.next(n[r++]),e.closed||this.schedule())})})}function $g(n,t){return new ee(e=>{let r;return Qe(e,t,()=>{r=n[Ta](),Qe(e,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){e.error(s);return}o?e.complete():e.next(i)},0,!0)}),()=>B(r?.return)&&r.return()})}function ka(n,t){if(!n)throw new Error("Iterable cannot be null");return new ee(e=>{Qe(e,t,()=>{let r=n[Symbol.asyncIterator]();Qe(e,t,()=>{r.next().then(i=>{i.done?e.complete():e.next(i.value)})},0,!0)})})}function Hg(n,t){return ka(Aa(n),t)}function Gg(n,t){if(n!=null){if(Ia(n))return Vg(n,t);if(Da(n))return Bg(n,t);if(Ea(n))return Ug(n,t);if(Sa(n))return ka(n,t);if(Ma(n))return $g(n,t);if(Ra(n))return Hg(n,t)}throw xa(n)}function le(n,t){return t?Gg(n,t):Se(n)}function F(...n){let t=Vn(n);return le(n,t)}function fi(n,t){let e=B(n)?n:()=>n,r=i=>i.error(e());return new ee(t?i=>t.schedule(r,0,i):r)}function hd(n){return!!n&&(n instanceof ee||B(n.lift)&&B(n.subscribe))}var wn=oi(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Y(n,t){return X((e,r)=>{let i=0;e.subscribe(Q(r,o=>{r.next(n.call(t,o,i++))}))})}var{isArray:Cb}=Array;function bb(n,t){return Cb(t)?n(...t):n(t)}function Pa(n){return Y(t=>bb(n,t))}var{isArray:Db}=Array,{getPrototypeOf:Eb,prototype:Ib,keys:Sb}=Object;function Fa(n){if(n.length===1){let t=n[0];if(Db(t))return{args:t,keys:null};if(xb(t)){let e=Sb(t);return{args:e.map(r=>t[r]),keys:e}}}return{args:n,keys:null}}function xb(n){return n&&typeof n=="object"&&Eb(n)===Ib}function La(n,t){return n.reduce((e,r,i)=>(e[r]=t[i],e),{})}function Eo(...n){let t=Vn(n),e=ba(n),{args:r,keys:i}=Fa(n);if(r.length===0)return le([],t);let o=new ee(Tb(r,t,i?s=>La(i,s):ht));return e?o.pipe(Pa(e)):o}function Tb(n,t,e=ht){return r=>{zg(t,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let l=0;l<i;l++)zg(t,()=>{let c=le(n[l],t),u=!1;c.subscribe(Q(r,d=>{o[l]=d,u||(u=!0,a--),a||r.next(e(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function zg(n,t,e){n?Qe(e,n,t):t()}function qg(n,t,e,r,i,o,s,a){let l=[],c=0,u=0,d=!1,h=()=>{d&&!l.length&&!c&&t.complete()},f=C=>c<r?y(C):l.push(C),y=C=>{o&&t.next(C),c++;let I=!1;Se(e(C,u++)).subscribe(Q(t,N=>{i?.(N),o?f(N):t.next(N)},()=>{I=!0},void 0,()=>{if(I)try{for(c--;l.length&&c<r;){let N=l.shift();s?Qe(t,s,()=>y(N)):y(N)}h()}catch(N){t.error(N)}}))};return n.subscribe(Q(t,f,()=>{d=!0,h()})),()=>{a?.()}}function Ce(n,t,e=1/0){return B(t)?Ce((r,i)=>Y((o,s)=>t(r,o,i,s))(Se(n(r,i))),e):(typeof t=="number"&&(e=t),X((r,i)=>qg(r,i,n,e)))}function hi(n=1/0){return Ce(ht,n)}function Wg(){return hi(1)}function pi(...n){return Wg()(le(n,Vn(n)))}function ja(n){return new ee(t=>{Se(n()).subscribe(t)})}function pd(...n){let t=ba(n),{args:e,keys:r}=Fa(n),i=new ee(o=>{let{length:s}=e;if(!s){o.complete();return}let a=new Array(s),l=s,c=s;for(let u=0;u<s;u++){let d=!1;Se(e[u]).subscribe(Q(o,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||o.next(r?La(r,a):a),o.complete())}))}});return t?i.pipe(Pa(t)):i}function qe(n,t){return X((e,r)=>{let i=0;e.subscribe(Q(r,o=>n.call(t,o,i++)&&r.next(o)))})}function _n(n){return X((t,e)=>{let r=null,i=!1,o;r=t.subscribe(Q(e,void 0,void 0,s=>{o=Se(n(s,_n(n)(t))),r?(r.unsubscribe(),r=null,o.subscribe(e)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(e))})}function Zg(n,t,e,r,i){return(o,s)=>{let a=e,l=t,c=0;o.subscribe(Q(s,u=>{let d=c++;l=a?n(l,u,d):(a=!0,u),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}function Yt(n,t){return B(t)?Ce(n,t,1):Ce(n,1)}function Un(n){return X((t,e)=>{let r=!1;t.subscribe(Q(e,i=>{r=!0,e.next(i)},()=>{r||e.next(n),e.complete()}))})}function Cn(n){return n<=0?()=>Je:X((t,e)=>{let r=0;t.subscribe(Q(e,i=>{++r<=n&&(e.next(i),n<=r&&e.complete())}))})}function Va(n=Mb){return X((t,e)=>{let r=!1;t.subscribe(Q(e,i=>{r=!0,e.next(i)},()=>r?e.complete():e.error(n())))})}function Mb(){return new wn}function ur(n){return X((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function bn(n,t){let e=arguments.length>=2;return r=>r.pipe(n?qe((i,o)=>n(i,o,r)):ht,Cn(1),e?Un(t):Va(()=>new wn))}function gi(n){return n<=0?()=>Je:X((t,e)=>{let r=[];t.subscribe(Q(e,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)e.next(i);e.complete()},void 0,()=>{r=null}))})}function gd(n,t){let e=arguments.length>=2;return r=>r.pipe(n?qe((i,o)=>n(i,o,r)):ht,gi(1),e?Un(t):Va(()=>new wn))}function md(n,t){return X(Zg(n,t,arguments.length>=2,!0))}function vd(...n){let t=Vn(n);return X((e,r)=>{(t?pi(n,e,t):pi(n,e)).subscribe(r)})}function Xe(n,t){return X((e,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();e.subscribe(Q(r,l=>{i?.unsubscribe();let c=0,u=o++;Se(n(l,u)).subscribe(i=Q(r,d=>r.next(t?t(l,d,u,c++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function yd(n){return X((t,e)=>{Se(n).subscribe(Q(e,()=>e.complete(),Do)),!e.closed&&t.subscribe(e)})}function Le(n,t,e){let r=B(n)||t||e?{next:n,error:t,complete:e}:n;return r?X((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Q(o,l=>{var c;(c=r.next)===null||c===void 0||c.call(r,l),o.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),o.error(l)},()=>{var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):ht}var Om="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",S=class extends Error{code;constructor(t,e){super(km(t,e)),this.code=t}};function Ab(n){return`NG0${Math.abs(n)}`}function km(n,t){return`${Ab(n)}${t?": "+t:""}`}var Pm=Symbol("InputSignalNode#UNSET"),Rb=P(D({},ga),{transformFn:void 0,applyValueToInputSignal(n,t){_o(n,t)}});function Fm(n,t){let e=Object.create(Rb);e.value=n,e.transformFn=t?.transform;function r(){if(vo(e),e.value===Pm){let i=null;throw new S(-950,i)}return e.value}return r[wt]=e,r}function Uo(n){return{toString:n}.toString()}var Ua="__parameters__";function Nb(n){return function(...e){if(n){let r=n(...e);for(let i in r)this[i]=r[i]}}}function Lm(n,t,e){return Uo(()=>{let r=Nb(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(l,c,u){let d=l.hasOwnProperty(Ua)?l[Ua]:Object.defineProperty(l,Ua,{value:[]})[Ua];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),l}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var fr=globalThis;function ae(n){for(let t in n)if(n[t]===ae)return t;throw Error("Could not find renamed property on target object.")}function Ob(n,t){for(let e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function nt(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(nt).join(", ")}]`;if(n==null)return""+n;let t=n.overriddenName||n.name;if(t)return`${t}`;let e=n.toString();if(e==null)return""+e;let r=e.indexOf(`
`);return r>=0?e.slice(0,r):e}function kd(n,t){return n?t?`${n} ${t}`:n:t||""}var kb=ae({__forward_ref__:ae});function Tr(n){return n.__forward_ref__=Tr,n.toString=function(){return nt(this())},n}function We(n){return jm(n)?n():n}function jm(n){return typeof n=="function"&&n.hasOwnProperty(kb)&&n.__forward_ref__===Tr}function x(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Bt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Cl(n){return Yg(n,Um)||Yg(n,Bm)}function Vm(n){return Cl(n)!==null}function Yg(n,t){return n.hasOwnProperty(t)?n[t]:null}function Pb(n){let t=n&&(n[Um]||n[Bm]);return t||null}function Kg(n){return n&&(n.hasOwnProperty(Jg)||n.hasOwnProperty(Fb))?n[Jg]:null}var Um=ae({\u0275prov:ae}),Jg=ae({\u0275inj:ae}),Bm=ae({ngInjectableDef:ae}),Fb=ae({ngInjectorDef:ae}),T=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,e){this._desc=t,this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=x({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function $m(n){return n&&!!n.\u0275providers}var Lb=ae({\u0275cmp:ae}),jb=ae({\u0275dir:ae}),Vb=ae({\u0275pipe:ae}),Ub=ae({\u0275mod:ae}),Ya=ae({\u0275fac:ae}),To=ae({__NG_ELEMENT_ID__:ae}),Qg=ae({__NG_ENV_ID__:ae});function bl(n){return typeof n=="string"?n:n==null?"":String(n)}function Bb(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():bl(n)}function Hm(n,t){throw new S(-200,n)}function Lf(n,t){throw new S(-201,!1)}var K=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(K||{}),Pd;function Gm(){return Pd}function et(n){let t=Pd;return Pd=n,t}function zm(n,t,e){let r=Cl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(e&K.Optional)return null;if(t!==void 0)return t;Lf(n,"Injector")}var $b={},hr=$b,Fd="__NG_DI_FLAG__",Ka=class{injector;constructor(t){this.injector=t}retrieve(t,e){let r=e;return this.injector.get(t,r.optional?ma:hr,r)}},Ja="ngTempTokenPath",Hb="ngTokenPath",Gb=/\n/gm,zb="\u0275",Xg="__source";function qb(n,t=K.Default){if(Co()===void 0)throw new S(-203,!1);if(Co()===null)return zm(n,void 0,t);{let e=Co(),r;return e instanceof Ka?r=e.injector:r=e,r.get(n,t&K.Optional?null:void 0,t)}}function M(n,t=K.Default){return(Gm()||qb)(We(n),t)}function w(n,t=K.Default){return M(n,Dl(t))}function Dl(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Ld(n){let t=[];for(let e=0;e<n.length;e++){let r=We(n[e]);if(Array.isArray(r)){if(r.length===0)throw new S(900,!1);let i,o=K.Default;for(let s=0;s<r.length;s++){let a=r[s],l=Wb(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}t.push(M(i,o))}else t.push(M(r))}return t}function qm(n,t){return n[Fd]=t,n.prototype[Fd]=t,n}function Wb(n){return n[Fd]}function Zb(n,t,e,r){let i=n[Ja];throw t[Xg]&&i.unshift(t[Xg]),n.message=Yb(`
`+n.message,i,e,r),n[Hb]=i,n[Ja]=null,n}function Yb(n,t,e,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==zb?n.slice(2):n;let i=nt(t);if(Array.isArray(t))i=t.map(nt).join(" -> ");else if(typeof t=="object"){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):nt(a)))}i=`{${o.join(", ")}}`}return`${e}${r?"("+r+")":""}[${i}]: ${n.replace(Gb,`
  `)}`}var Kb=qm(Lm("Optional"),8);var Jb=qm(Lm("SkipSelf"),4);function gr(n,t){let e=n.hasOwnProperty(Ya);return e?n[Ya]:null}function Qb(n,t,e){if(n.length!==t.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=t[r];if(e&&(i=e(i),o=e(o)),o!==i)return!1}return!0}function Xb(n){return n.flat(Number.POSITIVE_INFINITY)}function jf(n,t){n.forEach(e=>Array.isArray(e)?jf(e,t):t(e))}function Wm(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function Qa(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function eD(n,t,e,r){let i=n.length;if(i==t)n.push(e,r);else if(i===1)n.push(r,n[0]),n[0]=e;else{for(i--,n.push(n[i-1],n[i]);i>t;){let o=i-2;n[i]=n[o],i--}n[t]=e,n[t+1]=r}}function Vf(n,t,e){let r=Bo(n,t);return r>=0?n[r|1]=e:(r=~r,eD(n,r,t,e)),r}function wd(n,t){let e=Bo(n,t);if(e>=0)return n[e|1]}function Bo(n,t){return tD(n,t,1)}function tD(n,t,e){let r=0,i=n.length>>e;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<e];if(t===s)return o<<e;s>t?i=o:r=o+1}return~(i<<e)}var mr={},tt=[],Mo=new T(""),Zm=new T("",-1),Ym=new T(""),Xa=class{get(t,e=hr){if(e===hr){let r=new Error(`NullInjectorError: No provider for ${nt(t)}!`);throw r.name="NullInjectorError",r}return e}};function Km(n,t){let e=n[Ub]||null;if(!e&&t===!0)throw new Error(`Type ${nt(n)} does not have '\u0275mod' property.`);return e}function vr(n){return n[Lb]||null}function nD(n){return n[jb]||null}function rD(n){return n[Vb]||null}function $o(n){return{\u0275providers:n}}function iD(...n){return{\u0275providers:Jm(!0,n),\u0275fromNgModule:!0}}function Jm(n,...t){let e=[],r=new Set,i,o=s=>{e.push(s)};return jf(t,s=>{let a=s;jd(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Qm(i,o),e}function Qm(n,t){for(let e=0;e<n.length;e++){let{ngModule:r,providers:i}=n[e];Uf(i,o=>{t(o,r)})}}function jd(n,t,e,r){if(n=We(n),!n)return!1;let i=null,o=Kg(n),s=!o&&vr(n);if(!o&&!s){let l=n.ngModule;if(o=Kg(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)jd(c,t,e,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let c;try{jf(o.imports,u=>{jd(u,t,e,r)&&(c||=[],c.push(u))})}finally{}c!==void 0&&Qm(c,t)}if(!a){let c=gr(i)||(()=>new i);t({provide:i,useFactory:c,deps:tt},i),t({provide:Ym,useValue:i,multi:!0},i),t({provide:Mo,useValue:()=>M(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let c=n;Uf(l,u=>{t(u,c)})}}else return!1;return i!==n&&n.providers!==void 0}function Uf(n,t){for(let e of n)$m(e)&&(e=e.\u0275providers),Array.isArray(e)?Uf(e,t):t(e)}var oD=ae({provide:String,useValue:ae});function Xm(n){return n!==null&&typeof n=="object"&&oD in n}function sD(n){return!!(n&&n.useExisting)}function aD(n){return!!(n&&n.useFactory)}function bi(n){return typeof n=="function"}function lD(n){return!!n.useClass}var El=new T(""),Ha={},em={},_d;function Bf(){return _d===void 0&&(_d=new Xa),_d}var Be=class{},Ao=class extends Be{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,e,r,i){super(),this.parent=e,this.source=r,this.scopes=i,Ud(t,s=>this.processProvider(s)),this.records.set(Zm,mi(void 0,this)),i.has("environment")&&this.records.set(Be,mi(void 0,this));let o=this.records.get(El);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Ym,tt,K.Self))}retrieve(t,e){let r=e;return this.get(t,r.optional?ma:hr,r)}destroy(){So(this),this._destroyed=!0;let t=Z(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of e)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Z(t)}}onDestroy(t){return So(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){So(this);let e=yn(this),r=et(void 0),i;try{return t()}finally{yn(e),et(r)}}get(t,e=hr,r=K.Default){if(So(this),t.hasOwnProperty(Qg))return t[Qg](this);r=Dl(r);let i,o=yn(this),s=et(void 0);try{if(!(r&K.SkipSelf)){let l=this.records.get(t);if(l===void 0){let c=hD(t)&&Cl(t);c&&this.injectableDefInScope(c)?l=mi(Vd(t),Ha):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l)}let a=r&K.Self?Bf():this.parent;return e=r&K.Optional&&e===hr?null:e,a.get(t,e)}catch(a){if(a.name==="NullInjectorError"){if((a[Ja]=a[Ja]||[]).unshift(nt(t)),o)throw a;return Zb(a,t,"R3InjectorError",this.source)}else throw a}finally{et(s),yn(o)}}resolveInjectorInitializers(){let t=Z(null),e=yn(this),r=et(void 0),i;try{let o=this.get(Mo,tt,K.Self);for(let s of o)s()}finally{yn(e),et(r),Z(t)}}toString(){let t=[],e=this.records;for(let r of e.keys())t.push(nt(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=We(t);let e=bi(t)?t:We(t&&t.provide),r=uD(t);if(!bi(t)&&t.multi===!0){let i=this.records.get(e);i||(i=mi(void 0,Ha,!0),i.factory=()=>Ld(i.multi),this.records.set(e,i)),e=t,i.multi.push(t)}this.records.set(e,r)}hydrate(t,e){let r=Z(null);try{return e.value===em?Hm(nt(t)):e.value===Ha&&(e.value=em,e.value=e.factory()),typeof e.value=="object"&&e.value&&fD(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{Z(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=We(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function Vd(n){let t=Cl(n),e=t!==null?t.factory:gr(n);if(e!==null)return e;if(n instanceof T)throw new S(204,!1);if(n instanceof Function)return cD(n);throw new S(204,!1)}function cD(n){if(n.length>0)throw new S(204,!1);let e=Pb(n);return e!==null?()=>e.factory(n):()=>new n}function uD(n){if(Xm(n))return mi(void 0,n.useValue);{let t=ev(n);return mi(t,Ha)}}function ev(n,t,e){let r;if(bi(n)){let i=We(n);return gr(i)||Vd(i)}else if(Xm(n))r=()=>We(n.useValue);else if(aD(n))r=()=>n.useFactory(...Ld(n.deps||[]));else if(sD(n))r=()=>M(We(n.useExisting));else{let i=We(n&&(n.useClass||n.provide));if(dD(n))r=()=>new i(...Ld(n.deps));else return gr(i)||Vd(i)}return r}function So(n){if(n.destroyed)throw new S(205,!1)}function mi(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function dD(n){return!!n.deps}function fD(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function hD(n){return typeof n=="function"||typeof n=="object"&&n instanceof T}function Ud(n,t){for(let e of n)Array.isArray(e)?Ud(e,t):e&&$m(e)?Ud(e.\u0275providers,t):t(e)}function rt(n,t){let e;n instanceof Ao?(So(n),e=n):e=new Ka(n);let r,i=yn(e),o=et(void 0);try{return t()}finally{yn(i),et(o)}}function tv(){return Gm()!==void 0||Co()!=null}function nv(n){if(!tv())throw new S(-203,!1)}function pD(n){return typeof n=="function"}var xn=0,$=1,U=2,$e=3,Vt=4,$t=5,Ro=6,el=7,Ne=8,yr=9,Dn=10,be=11,No=12,tm=13,Mi=14,Ut=15,wr=16,vi=17,En=18,Il=19,rv=20,Bn=21,Cd=22,_r=23,_t=24,_i=25,je=26,iv=1;var Cr=7,tl=8,Di=9,Ue=10;function $n(n){return Array.isArray(n)&&typeof n[iv]=="object"}function Tn(n){return Array.isArray(n)&&n[iv]===!0}function $f(n){return(n.flags&4)!==0}function Ai(n){return n.componentOffset>-1}function Sl(n){return(n.flags&1)===1}function Jt(n){return!!n.template}function nl(n){return(n[U]&512)!==0}function Ri(n){return(n[U]&256)===256}var Bd=class{previousValue;currentValue;firstChange;constructor(t,e,r){this.previousValue=t,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}};function ov(n,t,e,r){t!==null?t.applyValueToInputSignal(t,r):n[e]=r}var bt=(()=>{let n=()=>sv;return n.ngInherit=!0,n})();function sv(n){return n.type.prototype.ngOnChanges&&(n.setInput=mD),gD}function gD(){let n=lv(this),t=n?.current;if(t){let e=n.previous;if(e===mr)n.previous=t;else for(let r in t)e[r]=t[r];n.current=null,this.ngOnChanges(t)}}function mD(n,t,e,r,i){let o=this.declaredInputs[r],s=lv(n)||vD(n,{previous:mr,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new Bd(c&&c.currentValue,e,l===mr),ov(n,t,i,e)}var av="__ngSimpleChanges__";function lv(n){return n[av]||null}function vD(n,t){return n[av]=t}var nm=null;var re=function(n,t=null,e){nm?.(n,t,e)},cv="svg",yD="math";function Qt(n){for(;Array.isArray(n);)n=n[xn];return n}function uv(n,t){return Qt(t[n])}function nn(n,t){return Qt(t[n.index])}function Hf(n,t){return n.data[t]}function Gf(n,t){return n[t]}function Xt(n,t){let e=t[n];return $n(e)?e:e[xn]}function wD(n){return(n[U]&4)===4}function zf(n){return(n[U]&128)===128}function _D(n){return Tn(n[$e])}function Hn(n,t){return t==null?null:n[t]}function dv(n){n[vi]=0}function fv(n){n[U]&1024||(n[U]|=1024,zf(n)&&Ni(n))}function CD(n,t){for(;n>0;)t=t[Mi],n--;return t}function xl(n){return!!(n[U]&9216||n[_t]?.dirty)}function $d(n){n[Dn].changeDetectionScheduler?.notify(8),n[U]&64&&(n[U]|=1024),xl(n)&&Ni(n)}function Ni(n){n[Dn].changeDetectionScheduler?.notify(0);let t=br(n);for(;t!==null&&!(t[U]&8192||(t[U]|=8192,!zf(t)));)t=br(t)}function hv(n,t){if(Ri(n))throw new S(911,!1);n[Bn]===null&&(n[Bn]=[]),n[Bn].push(t)}function bD(n,t){if(n[Bn]===null)return;let e=n[Bn].indexOf(t);e!==-1&&n[Bn].splice(e,1)}function br(n){let t=n[$e];return Tn(t)?t[$e]:t}function qf(n){return n[el]??=[]}function Wf(n){return n.cleanup??=[]}function DD(n,t,e,r){let i=qf(t);i.push(e),n.firstCreatePass&&Wf(n).push(r,i.length-1)}var z={lFrame:Cv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Hd=!1;function ED(){return z.lFrame.elementDepthCount}function ID(){z.lFrame.elementDepthCount++}function SD(){z.lFrame.elementDepthCount--}function Zf(){return z.bindingsEnabled}function xD(){return z.skipHydrationRootTNode!==null}function TD(n){return z.skipHydrationRootTNode===n}function MD(){z.skipHydrationRootTNode=null}function q(){return z.lFrame.lView}function De(){return z.lFrame.tView}function L(n){return z.lFrame.contextLView=n,n[Ne]}function j(n){return z.lFrame.contextLView=null,n}function He(){let n=pv();for(;n!==null&&n.type===64;)n=n.parent;return n}function pv(){return z.lFrame.currentTNode}function AD(){let n=z.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}function Mr(n,t){let e=z.lFrame;e.currentTNode=n,e.isParent=t}function Yf(){return z.lFrame.isParent}function gv(){z.lFrame.isParent=!1}function RD(){return z.lFrame.contextLView}function mv(){return Hd}function rl(n){let t=Hd;return Hd=n,t}function Ho(){let n=z.lFrame,t=n.bindingRootIndex;return t===-1&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function ND(n){return z.lFrame.bindingIndex=n}function Oi(){return z.lFrame.bindingIndex++}function vv(n){let t=z.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function OD(){return z.lFrame.inI18n}function kD(n,t){let e=z.lFrame;e.bindingIndex=e.bindingRootIndex=n,Gd(t)}function PD(){return z.lFrame.currentDirectiveIndex}function Gd(n){z.lFrame.currentDirectiveIndex=n}function FD(n){let t=z.lFrame.currentDirectiveIndex;return t===-1?null:n[t]}function yv(){return z.lFrame.currentQueryIndex}function Kf(n){z.lFrame.currentQueryIndex=n}function LD(n){let t=n[$];return t.type===2?t.declTNode:t.type===1?n[$t]:null}function wv(n,t,e){if(e&K.SkipSelf){let i=t,o=n;for(;i=i.parent,i===null&&!(e&K.Host);)if(i=LD(o),i===null||(o=o[Mi],i.type&10))break;if(i===null)return!1;t=i,n=o}let r=z.lFrame=_v();return r.currentTNode=t,r.lView=n,!0}function Jf(n){let t=_v(),e=n[$];z.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function _v(){let n=z.lFrame,t=n===null?null:n.child;return t===null?Cv(n):t}function Cv(n){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=t),t}function bv(){let n=z.lFrame;return z.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Dv=bv;function Qf(){let n=bv();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function jD(n){return(z.lFrame.contextLView=CD(n,z.lFrame.contextLView))[Ne]}function Gn(){return z.lFrame.selectedIndex}function Dr(n){z.lFrame.selectedIndex=n}function Xf(){let n=z.lFrame;return Hf(n.tView,n.selectedIndex)}function fe(){z.lFrame.currentNamespace=cv}function it(){VD()}function VD(){z.lFrame.currentNamespace=null}function UD(){return z.lFrame.currentNamespace}var Ev=!0;function Tl(){return Ev}function Ml(n){Ev=n}function BD(n,t,e){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let s=sv(t);(e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s)}i&&(e.preOrderHooks??=[]).push(0-n,i),o&&((e.preOrderHooks??=[]).push(n,o),(e.preOrderCheckHooks??=[]).push(n,o))}function eh(n,t){for(let e=t.directiveStart,r=t.directiveEnd;e<r;e++){let o=n.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=o;s&&(n.contentHooks??=[]).push(-e,s),a&&((n.contentHooks??=[]).push(e,a),(n.contentCheckHooks??=[]).push(e,a)),l&&(n.viewHooks??=[]).push(-e,l),c&&((n.viewHooks??=[]).push(e,c),(n.viewCheckHooks??=[]).push(e,c)),u!=null&&(n.destroyHooks??=[]).push(e,u)}}function Ga(n,t,e){Iv(n,t,3,e)}function za(n,t,e,r){(n[U]&3)===e&&Iv(n,t,e,r)}function bd(n,t){let e=n[U];(e&3)===t&&(e&=16383,e+=1,n[U]=e)}function Iv(n,t,e,r){let i=r!==void 0?n[vi]&65535:0,o=r??-1,s=t.length-1,a=0;for(let l=i;l<s;l++)if(typeof t[l+1]=="number"){if(a=t[l],r!=null&&a>=r)break}else t[l]<0&&(n[vi]+=65536),(a<o||o==-1)&&($D(n,e,t,l),n[vi]=(n[vi]&4294901760)+l+2),l++}function rm(n,t){re(4,n,t);let e=Z(null);try{t.call(n)}finally{Z(e),re(5,n,t)}}function $D(n,t,e,r){let i=e[r]<0,o=e[r+1],s=i?-e[r]:e[r],a=n[s];i?n[U]>>14<n[vi]>>16&&(n[U]&3)===t&&(n[U]+=16384,rm(a,o)):rm(a,o)}var Ci=-1,Er=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,e,r){this.factory=t,this.canSeeViewProviders=e,this.injectImpl=r}};function HD(n){return(n.flags&8)!==0}function GD(n){return(n.flags&16)!==0}function zD(n,t,e){let r=0;for(;r<e.length;){let i=e[r];if(typeof i=="number"){if(i!==0)break;r++;let o=e[r++],s=e[r++],a=e[r++];n.setAttribute(t,s,a,o)}else{let o=i,s=e[++r];qD(o)?n.setProperty(t,o,s):n.setAttribute(t,o,s),r++}}return r}function Sv(n){return n===3||n===4||n===6}function qD(n){return n.charCodeAt(0)===64}function Ei(n,t){if(!(t===null||t.length===0))if(n===null||n.length===0)n=t.slice();else{let e=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?e=i:e===0||(e===-1||e===2?im(n,e,i,null,t[++r]):im(n,e,i,null,null))}}return n}function im(n,t,e,r,i){let o=0,s=n.length;if(t===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===e){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,t),o=s+1),n.splice(o++,0,e),i!==null&&n.splice(o++,0,i)}function xv(n){return n!==Ci}function il(n){return n&32767}function WD(n){return n>>16}function ol(n,t){let e=WD(n),r=t;for(;e>0;)r=r[Mi],e--;return r}var zd=!0;function sl(n){let t=zd;return zd=n,t}var ZD=256,Tv=ZD-1,Mv=5,YD=0,Kt={};function KD(n,t,e){let r;typeof e=="string"?r=e.charCodeAt(0)||0:e.hasOwnProperty(To)&&(r=e[To]),r==null&&(r=e[To]=YD++);let i=r&Tv,o=1<<i;t.data[n+(i>>Mv)]|=o}function al(n,t){let e=Av(n,t);if(e!==-1)return e;let r=t[$];r.firstCreatePass&&(n.injectorIndex=t.length,Dd(r.data,n),Dd(t,null),Dd(r.blueprint,null));let i=th(n,t),o=n.injectorIndex;if(xv(i)){let s=il(i),a=ol(i,t),l=a[$].data;for(let c=0;c<8;c++)t[o+c]=a[s+c]|l[s+c]}return t[o+8]=i,o}function Dd(n,t){n.push(0,0,0,0,0,0,0,0,t)}function Av(n,t){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||t[n.injectorIndex+8]===null?-1:n.injectorIndex}function th(n,t){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let e=0,r=null,i=t;for(;i!==null;){if(r=Pv(i),r===null)return Ci;if(e++,i=i[Mi],r.injectorIndex!==-1)return r.injectorIndex|e<<16}return Ci}function qd(n,t,e){KD(n,t,e)}function JD(n,t){if(t==="class")return n.classes;if(t==="style")return n.styles;let e=n.attrs;if(e){let r=e.length,i=0;for(;i<r;){let o=e[i];if(Sv(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof e[i]=="string";)i++;else{if(o===t)return e[i+1];i=i+2}}}return null}function Rv(n,t,e){if(e&K.Optional||n!==void 0)return n;Lf(t,"NodeInjector")}function Nv(n,t,e,r){if(e&K.Optional&&r===void 0&&(r=null),(e&(K.Self|K.Host))===0){let i=n[yr],o=et(void 0);try{return i?i.get(t,r,e&K.Optional):zm(t,r,e&K.Optional)}finally{et(o)}}return Rv(r,t,e)}function Ov(n,t,e,r=K.Default,i){if(n!==null){if(t[U]&2048&&!(r&K.Self)){let s=tE(n,t,e,r,Kt);if(s!==Kt)return s}let o=kv(n,t,e,r,Kt);if(o!==Kt)return o}return Nv(t,e,r,i)}function kv(n,t,e,r,i){let o=XD(e);if(typeof o=="function"){if(!wv(t,n,r))return r&K.Host?Rv(i,e,r):Nv(t,e,r,i);try{let s;if(s=o(r),s==null&&!(r&K.Optional))Lf(e);else return s}finally{Dv()}}else if(typeof o=="number"){let s=null,a=Av(n,t),l=Ci,c=r&K.Host?t[Ut][$t]:null;for((a===-1||r&K.SkipSelf)&&(l=a===-1?th(n,t):t[a+8],l===Ci||!sm(r,!1)?a=-1:(s=t[$],a=il(l),t=ol(l,t)));a!==-1;){let u=t[$];if(om(o,a,u.data)){let d=QD(a,t,e,s,r,c);if(d!==Kt)return d}l=t[a+8],l!==Ci&&sm(r,t[$].data[a+8]===c)&&om(o,a,t)?(s=u,a=il(l),t=ol(l,t)):a=-1}}return i}function QD(n,t,e,r,i,o){let s=t[$],a=s.data[n+8],l=r==null?Ai(a)&&zd:r!=s&&(a.type&3)!==0,c=i&K.Host&&o===a,u=qa(a,s,e,l,c);return u!==null?Oo(t,s,u,a):Kt}function qa(n,t,e,r,i){let o=n.providerIndexes,s=t.data,a=o&1048575,l=n.directiveStart,c=n.directiveEnd,u=o>>20,d=r?a:a+u,h=i?a+u:c;for(let f=d;f<h;f++){let y=s[f];if(f<l&&e===y||f>=l&&y.type===e)return f}if(i){let f=s[l];if(f&&Jt(f)&&f.type===e)return l}return null}function Oo(n,t,e,r){let i=n[e],o=t.data;if(i instanceof Er){let s=i;s.resolving&&Hm(Bb(o[e]));let a=sl(s.canSeeViewProviders);s.resolving=!0;let l,c=s.injectImpl?et(s.injectImpl):null,u=wv(n,r,K.Default);try{i=n[e]=s.factory(void 0,o,n,r),t.firstCreatePass&&e>=r.directiveStart&&BD(e,o[e],t)}finally{c!==null&&et(c),sl(a),s.resolving=!1,Dv()}}return i}function XD(n){if(typeof n=="string")return n.charCodeAt(0)||0;let t=n.hasOwnProperty(To)?n[To]:void 0;return typeof t=="number"?t>=0?t&Tv:eE:t}function om(n,t,e){let r=1<<n;return!!(e[t+(n>>Mv)]&r)}function sm(n,t){return!(n&K.Self)&&!(n&K.Host&&t)}var pr=class{_tNode;_lView;constructor(t,e){this._tNode=t,this._lView=e}get(t,e,r){return Ov(this._tNode,this._lView,t,Dl(r),e)}};function eE(){return new pr(He(),q())}function Go(n){return Uo(()=>{let t=n.prototype.constructor,e=t[Ya]||Wd(t),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Ya]||Wd(i);if(o&&o!==e)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Wd(n){return jm(n)?()=>{let t=Wd(We(n));return t&&t()}:gr(n)}function tE(n,t,e,r,i){let o=n,s=t;for(;o!==null&&s!==null&&s[U]&2048&&!nl(s);){let a=kv(o,s,e,r|K.Self,Kt);if(a!==Kt)return a;let l=o.parent;if(!l){let c=s[rv];if(c){let u=c.get(e,Kt,r);if(u!==Kt)return u}l=Pv(s),s=s[Mi]}o=l}return i}function Pv(n){let t=n[$],e=t.type;return e===2?t.declTNode:e===1?n[$t]:null}function nh(n){return JD(He(),n)}function am(n,t=null,e=null,r){let i=Fv(n,t,e,r);return i.resolveInjectorInitializers(),i}function Fv(n,t=null,e=null,r,i=new Set){let o=[e||tt,iD(n)];return r=r||(typeof n=="object"?void 0:nt(n)),new Ao(o,t||Bf(),r||null,i)}var pt=class n{static THROW_IF_NOT_FOUND=hr;static NULL=new Xa;static create(t,e){if(Array.isArray(t))return am({name:""},e,t,"");{let r=t.name??"";return am({name:r},t.parent,t.providers,r)}}static \u0275prov=x({token:n,providedIn:"any",factory:()=>M(Zm)});static __NG_ELEMENT_ID__=-1};var nE=new T("");nE.__NG_ELEMENT_ID__=n=>{let t=He();if(t===null)throw new S(204,!1);if(t.type&2)return t.value;if(n&K.Optional)return null;throw new S(204,!1)};var Lv=!1,zn=(()=>{class n{static __NG_ELEMENT_ID__=rE;static __NG_ENV_ID__=e=>e}return n})(),ll=class extends zn{_lView;constructor(t){super(),this._lView=t}onDestroy(t){let e=this._lView;return Ri(e)?(t(),()=>{}):(hv(e,t),()=>bD(e,t))}};function rE(){return new ll(q())}var Ir=class{},jv=new T("",{providedIn:"root",factory:()=>!1});var Vv=new T(""),Uv=new T(""),qn=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Fe(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}has(e){return this.pendingTasks.has(e)}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=x({token:n,providedIn:"root",factory:()=>new n})}return n})();var Zd=class extends _e{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,tv()&&(this.destroyRef=w(zn,{optional:!0})??void 0,this.pendingTasks=w(qn,{optional:!0})??void 0)}emit(t){let e=Z(null);try{super.next(t)}finally{Z(e)}}subscribe(t,e,r){let i=t,o=e||(()=>null),s=r;if(t&&typeof t=="object"){let l=t;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof Ie&&t.add(a),a}wrapInTimeout(t){return e=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{t(e)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},de=Zd;function ko(...n){}function Bv(n){let t,e;function r(){n=ko;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{n(),r()})),()=>r()}function lm(n){return queueMicrotask(()=>n()),()=>{n=ko}}var rh="isAngularZone",cl=rh+"_ID",iE=0,se=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new de(!1);onMicrotaskEmpty=new de(!1);onStable=new de(!1);onError=new de(!1);constructor(t){let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Lv}=t;if(typeof Zone>"u")throw new S(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,aE(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(rh)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new S(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new S(909,!1)}run(t,e,r){return this._inner.run(t,e,r)}runTask(t,e,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,oE,ko,ko);try{return o.runTask(s,e,r)}finally{o.cancelTask(s)}}runGuarded(t,e,r){return this._inner.runGuarded(t,e,r)}runOutsideAngular(t){return this._outer.run(t)}},oE={};function ih(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function sE(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function t(){Bv(()=>{n.callbackScheduled=!1,Yd(n),n.isCheckStableRunning=!0,ih(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{t()}):n._outer.run(()=>{t()}),Yd(n)}function aE(n){let t=()=>{sE(n)},e=iE++;n._inner=n._inner.fork({name:"angular",properties:{[rh]:!0,[cl]:e,[cl+e]:!0},onInvokeTask:(r,i,o,s,a,l)=>{if(lE(l))return r.invokeTask(o,s,a,l);try{return cm(n),r.invokeTask(o,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&t(),um(n)}},onInvoke:(r,i,o,s,a,l,c)=>{try{return cm(n),r.invoke(o,s,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!cE(l)&&t(),um(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Yd(n),ih(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Yd(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function cm(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function um(n){n._nesting--,ih(n)}var Kd=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new de;onMicrotaskEmpty=new de;onStable=new de;onError=new de;run(t,e,r){return t.apply(e,r)}runGuarded(t,e,r){return t.apply(e,r)}runOutsideAngular(t){return t()}runTask(t,e,r,i){return t.apply(e,r)}};function lE(n){return $v(n,"__ignore_ng_zone__")}function cE(n){return $v(n,"__scheduler_tick__")}function $v(n,t){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[t]===!0}var en=class{_console=console;handleError(t){this._console.error("ERROR",t)}},uE=new T("",{providedIn:"root",factory:()=>{let n=w(se),t=w(en);return e=>n.runOutsideAngular(()=>t.handleError(e))}});function dm(n,t){return Fm(n,t)}function dE(n){return Fm(Pm,n)}var Hv=(dm.required=dE,dm);function fE(){return ki(He(),q())}function ki(n,t){return new Dt(nn(n,t))}var Dt=(()=>{class n{nativeElement;constructor(e){this.nativeElement=e}static __NG_ELEMENT_ID__=fE}return n})();function hE(n){return n instanceof Dt?n.nativeElement:n}function pE(n){return typeof n=="function"&&n[wt]!==void 0}function W(n,t){let e=ed(n,t?.equal),r=e[wt];return e.set=i=>_o(r,i),e.update=i=>td(r,i),e.asReadonly=gE.bind(e),e}function gE(){let n=this[wt];if(n.readonlyFn===void 0){let t=()=>this();t[wt]=n,n.readonlyFn=t}return n.readonlyFn}function Gv(n){return pE(n)&&typeof n.set=="function"}function mE(){return this._results[Symbol.iterator]()}var Jd=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new _e}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;let r=Xb(t);(this._changesDetected=!Qb(this._results,r,e))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=mE};function zv(n){return(n.flags&128)===128}var qv=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(qv||{}),Wv=new Map,vE=0;function yE(){return vE++}function wE(n){Wv.set(n[Il],n)}function Qd(n){Wv.delete(n[Il])}var fm="__ngContext__";function Pi(n,t){$n(t)?(n[fm]=t[Il],wE(t)):n[fm]=t}function Zv(n){return Kv(n[No])}function Yv(n){return Kv(n[Vt])}function Kv(n){for(;n!==null&&!Tn(n);)n=n[Vt];return n}var Xd;function Jv(n){Xd=n}function _E(){if(Xd!==void 0)return Xd;if(typeof document<"u")return document;throw new S(210,!1)}var Al=new T("",{providedIn:"root",factory:()=>CE}),CE="ng",oh=new T(""),xe=new T("",{providedIn:"platform",factory:()=>"unknown"});var sh=new T("",{providedIn:"root",factory:()=>_E().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var bE="h",DE="b";var Qv=!1,EE=new T("",{providedIn:"root",factory:()=>Qv});var ah=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(ah||{}),Fi=new T(""),hm=new Set;function Ar(n){hm.has(n)||(hm.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var lh=(()=>{class n{view;node;constructor(e,r){this.view=e,this.node=r}static __NG_ELEMENT_ID__=IE}return n})();function IE(){return new lh(q(),He())}var yi=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(yi||{}),Xv=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=x({token:n,providedIn:"root",factory:()=>new n})}return n})(),SE=[yi.EarlyRead,yi.Write,yi.MixedReadWrite,yi.Read],xE=(()=>{class n{ngZone=w(se);scheduler=w(Ir);errorHandler=w(en,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){w(Fi,{optional:!0})}execute(){let e=this.sequences.size>0;e&&re(16),this.executing=!0;for(let r of SE)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),e&&re(17)}register(e){let{view:r}=e;r!==void 0?((r[_i]??=[]).push(e),Ni(r),r[U]|=8192):this.executing?this.deferredRegistrations.add(e):this.addSequence(e)}addSequence(e){this.sequences.add(e),this.scheduler.notify(7)}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}maybeTrace(e,r){return r?r.run(ah.AFTER_NEXT_RENDER,e):e()}static \u0275prov=x({token:n,providedIn:"root",factory:()=>new n})}return n})(),ef=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,e,r,i,o,s=null){this.impl=t,this.hooks=e,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[_i];t&&(this.view[_i]=t.filter(e=>e!==this))}};function ch(n,t){!t?.injector&&nv(ch);let e=t?.injector??w(pt);return Ar("NgAfterNextRender"),ME(n,e,t,!0)}function TE(n,t){if(n instanceof Function){let e=[void 0,void 0,void 0,void 0];return e[t]=n,e}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function ME(n,t,e,r){let i=t.get(Xv);i.impl??=t.get(xE);let o=t.get(Fi,null,{optional:!0}),s=e?.phase??yi.MixedReadWrite,a=e?.manualCleanup!==!0?t.get(zn):null,l=t.get(lh,null,{optional:!0}),c=new ef(i.impl,TE(n,s),l?.view,r,a,o?.snapshot(null));return i.impl.register(c),c}var AE=()=>null;function ey(n,t,e=!1){return AE(n,t,e)}function ty(n,t){let e=n.contentQueries;if(e!==null){let r=Z(null);try{for(let i=0;i<e.length;i+=2){let o=e[i],s=e[i+1];if(s!==-1){let a=n.data[s];Kf(o),a.contentQueries(2,t[s],s)}}}finally{Z(r)}}}function tf(n,t,e){Kf(0);let r=Z(null);try{t(n,e)}finally{Z(r)}}function uh(n,t,e){if($f(t)){let r=Z(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=e[s];a.contentQueries(1,l,s)}}}finally{Z(r)}}}var tn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(tn||{});var Ba;function RE(){if(Ba===void 0&&(Ba=null,fr.trustedTypes))try{Ba=fr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Ba}function pm(n){return RE()?.createScriptURL(n)||n}var ul=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Om})`}};function zo(n){return n instanceof ul?n.changingThisBreaksApplicationSecurity:n}function ny(n,t){let e=NE(n);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${Om})`)}return e===t}function NE(n){return n instanceof ul&&n.getTypeName()||null}var OE=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function kE(n){return n=String(n),n.match(OE)?n:"unsafe:"+n}var dh=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(dh||{});function rn(n){let t=iy();return t?t.sanitize(dh.URL,n)||"":ny(n,"URL")?zo(n):kE(bl(n))}function PE(n){let t=iy();if(t)return pm(t.sanitize(dh.RESOURCE_URL,n)||"");if(ny(n,"ResourceURL"))return pm(zo(n));throw new S(904,!1)}function FE(n,t){return t==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||t==="href"&&(n==="base"||n==="link")?PE:rn}function ry(n,t,e){return FE(t,e)(n)}function iy(){let n=q();return n&&n[Dn].sanitizer}var LE=/^>|^->|<!--|-->|--!>|<!-$/g,jE=/(<|>)/g,VE="\u200B$1\u200B";function UE(n){return n.replace(LE,t=>t.replace(jE,VE))}function oy(n){return n instanceof Function?n():n}function BE(n,t,e){let r=n.length;for(;;){let i=n.indexOf(t,e);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}e=i+1}}var sy="ng-template";function $E(n,t,e,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&BE(t[i+1].toLowerCase(),e,0)!==-1)return!0}else if(fh(n))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===e)return!0}return!1}function fh(n){return n.type===4&&n.value!==sy}function HE(n,t,e){let r=n.type===4&&!e?sy:n.value;return t===r}function GE(n,t,e){let r=4,i=n.attrs,o=i!==null?WE(i):0,s=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!s&&!Lt(r)&&!Lt(l))return!1;if(s&&Lt(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!HE(n,l,e)||l===""&&t.length===1){if(Lt(r))return!1;s=!0}}else if(r&8){if(i===null||!$E(n,i,l,e)){if(Lt(r))return!1;s=!0}}else{let c=t[++a],u=zE(l,i,fh(n),e);if(u===-1){if(Lt(r))return!1;s=!0;continue}if(c!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&c!==d){if(Lt(r))return!1;s=!0}}}}return Lt(r)||s}function Lt(n){return(n&1)===0}function zE(n,t,e,r){if(t===null)return-1;let i=0;if(r||!e){let o=!1;for(;i<t.length;){let s=t[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return ZE(t,n)}function qE(n,t,e=!1){for(let r=0;r<t.length;r++)if(GE(n,t[r],e))return!0;return!1}function WE(n){for(let t=0;t<n.length;t++){let e=n[t];if(Sv(e))return t}return n.length}function ZE(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){let r=n[e];if(typeof r=="number")return-1;if(r===t)return e;e++}return-1}function gm(n,t){return n?":not("+t.trim()+")":t}function YE(n){let t=n[0],e=1,r=2,i="",o=!1;for(;e<n.length;){let s=n[e];if(typeof s=="string")if(r&2){let a=n[++e];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Lt(s)&&(t+=gm(o,i),i=""),r=s,o=o||!Lt(r);e++}return i!==""&&(t+=gm(o,i)),t}function KE(n){return n.map(YE).join(",")}function JE(n){let t=[],e=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&t.push(o,n[++r]):i===8&&e.push(o);else{if(!Lt(i))break;i=o}r++}return e.length&&t.push(1,...e),t}var on={};function QE(n,t){return n.createText(t)}function XE(n,t,e){n.setValue(t,e)}function eI(n,t){return n.createComment(UE(t))}function ay(n,t,e){return n.createElement(t,e)}function dl(n,t,e,r,i){n.insertBefore(t,e,r,i)}function ly(n,t,e){n.appendChild(t,e)}function mm(n,t,e,r,i){r!==null?dl(n,t,e,r,i):ly(n,t,e)}function tI(n,t,e){n.removeChild(null,t,e)}function nI(n,t,e){n.setAttribute(t,"style",e)}function rI(n,t,e){e===""?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function cy(n,t,e){let{mergedAttrs:r,classes:i,styles:o}=e;r!==null&&zD(n,t,r),i!==null&&rI(n,t,i),o!==null&&nI(n,t,o)}function hh(n,t,e,r,i,o,s,a,l,c,u){let d=je+r,h=d+i,f=iI(d,h),y=typeof c=="function"?c():c;return f[$]={type:n,blueprint:f,template:e,queries:null,viewQuery:a,declTNode:t,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:y,incompleteFirstPass:!1,ssrId:u}}function iI(n,t){let e=[];for(let r=0;r<t;r++)e.push(r<n?null:on);return e}function oI(n){let t=n.tView;return t===null||t.incompleteFirstPass?n.tView=hh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function ph(n,t,e,r,i,o,s,a,l,c,u){let d=t.blueprint.slice();return d[xn]=i,d[U]=r|4|128|8|64|1024,(c!==null||n&&n[U]&2048)&&(d[U]|=2048),dv(d),d[$e]=d[Mi]=n,d[Ne]=e,d[Dn]=s||n&&n[Dn],d[be]=a||n&&n[be],d[yr]=l||n&&n[yr]||null,d[$t]=o,d[Il]=yE(),d[Ro]=u,d[rv]=c,d[Ut]=t.type==2?n[Ut]:d,d}function sI(n,t,e){let r=nn(t,n),i=oI(e),o=n[Dn].rendererFactory,s=gh(n,ph(n,i,null,uy(e),r,t,null,o.createRenderer(r,e),null,null,null));return n[t.index]=s}function uy(n){let t=16;return n.signals?t=4096:n.onPush&&(t=64),t}function dy(n,t,e,r){if(e===0)return-1;let i=t.length;for(let o=0;o<e;o++)t.push(r),n.blueprint.push(r),n.data.push(null);return i}function gh(n,t){return n[No]?n[tm][Vt]=t:n[No]=t,n[tm]=t,t}function v(n=1){fy(De(),q(),Gn()+n,!1)}function fy(n,t,e,r){if(!r)if((t[U]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Ga(t,o,e)}else{let o=n.preOrderHooks;o!==null&&za(t,o,0,e)}Dr(e)}var Rl=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Rl||{});function nf(n,t,e,r){let i=Z(null);try{let[o,s,a]=n.inputs[e],l=null;(s&Rl.SignalBased)!==0&&(l=t[o][wt]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):a!==null&&(r=a.call(t,r)),n.setInput!==null?n.setInput(t,l,r,e,o):ov(t,l,o,r)}finally{Z(i)}}function hy(n,t,e,r,i){let o=Gn(),s=r&2;try{Dr(-1),s&&t.length>je&&fy(n,t,je,!1),re(s?2:0,i),e(r,i)}finally{Dr(o),re(s?3:1,i)}}function Nl(n,t,e){fI(n,t,e),(e.flags&64)===64&&hI(n,t,e)}function mh(n,t,e=nn){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?e(t,n):n[s];n[i++]=a}}}function aI(n,t,e,r){let o=r.get(EE,Qv)||e===tn.ShadowDom,s=n.selectRootElement(t,o);return lI(s),s}function lI(n){cI(n)}var cI=()=>null;function uI(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function py(n,t,e,r,i,o,s,a){if(!a&&yh(t,n,e,r,i)){Ai(t)&&dI(e,t.index);return}if(t.type&3){let l=nn(t,e);r=uI(r),i=s!=null?s(i,t.value||"",r):i,o.setProperty(l,r,i)}else t.type&12}function dI(n,t){let e=Xt(t,n);e[U]&16||(e[U]|=64)}function fI(n,t,e){let r=e.directiveStart,i=e.directiveEnd;Ai(e)&&sI(t,e,n.data[r+e.componentOffset]),n.firstCreatePass||al(e,t);let o=e.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],l=Oo(t,n,s,e);if(Pi(l,t),o!==null&&vI(t,s-r,l,a,e,o),Jt(a)){let c=Xt(e.index,t);c[Ne]=Oo(t,n,s,e)}}}function hI(n,t,e){let r=e.directiveStart,i=e.directiveEnd,o=e.index,s=PD();try{Dr(o);for(let a=r;a<i;a++){let l=n.data[a],c=t[a];Gd(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&pI(l,c)}}finally{Dr(-1),Gd(s)}}function pI(n,t){n.hostBindings!==null&&n.hostBindings(1,t)}function vh(n,t){let e=n.directiveRegistry,r=null;if(e)for(let i=0;i<e.length;i++){let o=e[i];qE(t,o.selectors,!1)&&(r??=[],Jt(o)?r.unshift(o):r.push(o))}return r}function gI(n,t,e,r,i,o){let s=nn(n,t);mI(t[be],s,o,n.value,e,r,i)}function mI(n,t,e,r,i,o,s){if(o==null)n.removeAttribute(t,i,e);else{let a=s==null?bl(o):s(o,r||"",i);n.setAttribute(t,i,a,e)}}function vI(n,t,e,r,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],c=s[a+1];nf(r,e,l,c)}}function yI(n,t){let e=n[yr],r=e?e.get(en,null):null;r&&r.handleError(t)}function yh(n,t,e,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let l=0;l<s.length;l+=2){let c=s[l],u=s[l+1],d=t.data[c];nf(d,e[c],u,i),a=!0}if(o)for(let l of o){let c=e[l],u=t.data[l];nf(u,c,r,i),a=!0}return a}function wI(n,t){let e=Xt(t,n),r=e[$];_I(r,e);let i=e[xn];i!==null&&e[Ro]===null&&(e[Ro]=ey(i,e[yr])),re(18),wh(r,e,e[Ne]),re(19,e[Ne])}function _I(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}function wh(n,t,e){Jf(t);try{let r=n.viewQuery;r!==null&&tf(1,r,e);let i=n.template;i!==null&&hy(n,t,i,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),t[En]?.finishViewCreation(n),n.staticContentQueries&&ty(n,t),n.staticViewQueries&&tf(2,n.viewQuery,e);let o=n.components;o!==null&&CI(t,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{t[U]&=-5,Qf()}}function CI(n,t){for(let e=0;e<t.length;e++)wI(n,t[e])}function Ol(n,t,e,r){let i=Z(null);try{let o=t.tView,a=n[U]&4096?4096:16,l=ph(n,o,e,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=n[t.index];l[wr]=c;let u=n[En];return u!==null&&(l[En]=u.createEmbeddedView(o)),wh(o,l,e),l}finally{Z(i)}}function Po(n,t){return!t||t.firstChild===null||zv(n)}var bI;function _h(n,t){return bI(n,t)}var In=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(In||{});function gy(n){return(n.flags&32)===32}function wi(n,t,e,r,i){if(r!=null){let o,s=!1;Tn(r)?o=r:$n(r)&&(s=!0,r=r[xn]);let a=Qt(r);n===0&&e!==null?i==null?ly(t,e,a):dl(t,e,a,i||null,!0):n===1&&e!==null?dl(t,e,a,i||null,!0):n===2?tI(t,a,s):n===3&&t.destroyNode(a),o!=null&&kI(t,n,o,e,i)}}function DI(n,t){my(n,t),t[xn]=null,t[$t]=null}function EI(n,t,e,r,i,o){r[xn]=i,r[$t]=t,Fl(n,r,e,1,i,o)}function my(n,t){t[Dn].changeDetectionScheduler?.notify(9),Fl(n,t,t[be],2,null,null)}function II(n){let t=n[No];if(!t)return Ed(n[$],n);for(;t;){let e=null;if($n(t))e=t[No];else{let r=t[Ue];r&&(e=r)}if(!e){for(;t&&!t[Vt]&&t!==n;)$n(t)&&Ed(t[$],t),t=t[$e];t===null&&(t=n),$n(t)&&Ed(t[$],t),e=t&&t[Vt]}t=e}}function Ch(n,t){let e=n[Di],r=e.indexOf(t);e.splice(r,1)}function kl(n,t){if(Ri(t))return;let e=t[be];e.destroyNode&&Fl(n,t,e,3,null,null),II(t)}function Ed(n,t){if(Ri(t))return;let e=Z(null);try{t[U]&=-129,t[U]|=256,t[_t]&&wo(t[_t]),xI(n,t),SI(n,t),t[$].type===1&&t[be].destroy();let r=t[wr];if(r!==null&&Tn(t[$e])){r!==t[$e]&&Ch(r,t);let i=t[En];i!==null&&i.detachView(n)}Qd(t)}finally{Z(e)}}function SI(n,t){let e=n.cleanup,r=t[el];if(e!==null)for(let s=0;s<e.length-1;s+=2)if(typeof e[s]=="string"){let a=e[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[e[s+1]];e[s].call(a)}r!==null&&(t[el]=null);let i=t[Bn];if(i!==null){t[Bn]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=t[_r];if(o!==null){t[_r]=null;for(let s of o)s.destroy()}}function xI(n,t){let e;if(n!=null&&(e=n.destroyHooks)!=null)for(let r=0;r<e.length;r+=2){let i=t[e[r]];if(!(i instanceof Er)){let o=e[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];re(4,a,l);try{l.call(a)}finally{re(5,a,l)}}else{re(4,i,o);try{o.call(i)}finally{re(5,i,o)}}}}}function TI(n,t,e){return MI(n,t.parent,e)}function MI(n,t,e){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return e[xn];if(Ai(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===tn.None||i===tn.Emulated)return null}return nn(r,e)}function AI(n,t,e){return NI(n,t,e)}function RI(n,t,e){return n.type&40?nn(n,e):null}var NI=RI,vm;function Pl(n,t,e,r){let i=TI(n,r,t),o=t[be],s=r.parent||t[$t],a=AI(s,r,t);if(i!=null)if(Array.isArray(e))for(let l=0;l<e.length;l++)mm(o,i,e[l],a,!1);else mm(o,i,e,a,!1);vm!==void 0&&vm(o,r,t,e,i)}function xo(n,t){if(t!==null){let e=t.type;if(e&3)return nn(t,n);if(e&4)return rf(-1,n[t.index]);if(e&8){let r=t.child;if(r!==null)return xo(n,r);{let i=n[t.index];return Tn(i)?rf(-1,i):Qt(i)}}else{if(e&128)return xo(n,t.next);if(e&32)return _h(t,n)()||Qt(n[t.index]);{let r=vy(n,t);if(r!==null){if(Array.isArray(r))return r[0];let i=br(n[Ut]);return xo(i,r)}else return xo(n,t.next)}}}return null}function vy(n,t){if(t!==null){let r=n[Ut][$t],i=t.projection;return r.projection[i]}return null}function rf(n,t){let e=Ue+n+1;if(e<t.length){let r=t[e],i=r[$].firstChild;if(i!==null)return xo(r,i)}return t[Cr]}function bh(n,t,e,r,i,o,s){for(;e!=null;){if(e.type===128){e=e.next;continue}let a=r[e.index],l=e.type;if(s&&t===0&&(a&&Pi(Qt(a),r),e.flags|=2),!gy(e))if(l&8)bh(n,t,e.child,r,i,o,!1),wi(t,n,i,a,o);else if(l&32){let c=_h(e,r),u;for(;u=c();)wi(t,n,i,u,o);wi(t,n,i,a,o)}else l&16?OI(n,t,r,e,i,o):wi(t,n,i,a,o);e=s?e.projectionNext:e.next}}function Fl(n,t,e,r,i,o){bh(e,r,n.firstChild,t,i,o,!1)}function OI(n,t,e,r,i,o){let s=e[Ut],l=s[$t].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];wi(t,n,i,u,o)}else{let c=l,u=s[$e];zv(r)&&(c.flags|=128),bh(n,t,c,u,i,o,!0)}}function kI(n,t,e,r,i){let o=e[Cr],s=Qt(e);o!==s&&wi(t,n,r,o,i);for(let a=Ue;a<e.length;a++){let l=e[a];Fl(l[$],l,n,t,r,o)}}function PI(n,t,e,r,i){if(t)i?n.addClass(e,r):n.removeClass(e,r);else{let o=r.indexOf("-")===-1?void 0:In.DashCase;i==null?n.removeStyle(e,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=In.Important),n.setStyle(e,r,i,o))}}function fl(n,t,e,r,i=!1){for(;e!==null;){if(e.type===128){e=i?e.projectionNext:e.next;continue}let o=t[e.index];o!==null&&r.push(Qt(o)),Tn(o)&&FI(o,r);let s=e.type;if(s&8)fl(n,t,e.child,r);else if(s&32){let a=_h(e,t),l;for(;l=a();)r.push(l)}else if(s&16){let a=vy(t,e);if(Array.isArray(a))r.push(...a);else{let l=br(t[Ut]);fl(l[$],l,a,r,!0)}}e=i?e.projectionNext:e.next}return r}function FI(n,t){for(let e=Ue;e<n.length;e++){let r=n[e],i=r[$].firstChild;i!==null&&fl(r[$],r,i,t)}n[Cr]!==n[xn]&&t.push(n[Cr])}function yy(n){if(n[_i]!==null){for(let t of n[_i])t.impl.addSequence(t);n[_i].length=0}}var wy=[];function LI(n){return n[_t]??jI(n)}function jI(n){let t=wy.pop()??Object.create(UI);return t.lView=n,t}function VI(n){n.lView[_t]!==n&&(n.lView=null,wy.push(n))}var UI=P(D({},ii),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Ni(n.lView)},consumerOnSignalRead(){this.lView[_t]=this}});function BI(n){let t=n[_t]??Object.create($I);return t.lView=n,t}var $I=P(D({},ii),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let t=br(n.lView);for(;t&&!_y(t[$]);)t=br(t);t&&fv(t)},consumerOnSignalRead(){this.lView[_t]=this}});function _y(n){return n.type!==2}function Cy(n){if(n[_r]===null)return;let t=!0;for(;t;){let e=!1;for(let r of n[_r])r.dirty&&(e=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=e&&!!(n[U]&8192)}}var HI=100;function by(n,t=!0,e=0){let i=n[Dn].rendererFactory,o=!1;o||i.begin?.();try{GI(n,e)}catch(s){throw t&&yI(n,s),s}finally{o||i.end?.()}}function GI(n,t){let e=mv();try{rl(!0),of(n,t);let r=0;for(;xl(n);){if(r===HI)throw new S(103,!1);r++,of(n,1)}}finally{rl(e)}}function zI(n,t,e,r){if(Ri(t))return;let i=t[U],o=!1,s=!1;Jf(t);let a=!0,l=null,c=null;o||(_y(n)?(c=LI(t),l=yo(c)):Zu()===null?(a=!1,c=BI(t),l=yo(c)):t[_t]&&(wo(t[_t]),t[_t]=null));try{dv(t),ND(n.bindingStartIndex),e!==null&&hy(n,t,e,2,r);let u=(i&3)===3;if(!o)if(u){let f=n.preOrderCheckHooks;f!==null&&Ga(t,f,null)}else{let f=n.preOrderHooks;f!==null&&za(t,f,0,null),bd(t,0)}if(s||qI(t),Cy(t),Dy(t,0),n.contentQueries!==null&&ty(n,t),!o)if(u){let f=n.contentCheckHooks;f!==null&&Ga(t,f)}else{let f=n.contentHooks;f!==null&&za(t,f,1),bd(t,1)}ZI(n,t);let d=n.components;d!==null&&Iy(t,d,0);let h=n.viewQuery;if(h!==null&&tf(2,h,r),!o)if(u){let f=n.viewCheckHooks;f!==null&&Ga(t,f)}else{let f=n.viewHooks;f!==null&&za(t,f,2),bd(t,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),t[Cd]){for(let f of t[Cd])f();t[Cd]=null}o||(yy(t),t[U]&=-73)}catch(u){throw o||Ni(t),u}finally{c!==null&&(da(c,l),a&&VI(c)),Qf()}}function Dy(n,t){for(let e=Zv(n);e!==null;e=Yv(e))for(let r=Ue;r<e.length;r++){let i=e[r];Ey(i,t)}}function qI(n){for(let t=Zv(n);t!==null;t=Yv(t)){if(!(t[U]&2))continue;let e=t[Di];for(let r=0;r<e.length;r++){let i=e[r];fv(i)}}}function WI(n,t,e){re(18);let r=Xt(t,n);Ey(r,e),re(19,r[Ne])}function Ey(n,t){zf(n)&&of(n,t)}function of(n,t){let r=n[$],i=n[U],o=n[_t],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&fa(o)),s||=!1,o&&(o.dirty=!1),n[U]&=-9217,s)zI(r,n,r.template,n[Ne]);else if(i&8192){Cy(n),Dy(n,1);let a=r.components;a!==null&&Iy(n,a,1),yy(n)}}function Iy(n,t,e){for(let r=0;r<t.length;r++)WI(n,t[r],e)}function ZI(n,t){let e=n.hostBindingOpCodes;if(e!==null)try{for(let r=0;r<e.length;r++){let i=e[r];if(i<0)Dr(~i);else{let o=i,s=e[++r],a=e[++r];kD(s,o);let l=t[o];re(24,l),a(2,l),re(25,l)}}}finally{Dr(-1)}}function Dh(n,t){let e=mv()?64:1088;for(n[Dn].changeDetectionScheduler?.notify(t);n;){n[U]|=e;let r=br(n);if(nl(n)&&!r)return n;n=r}return null}function Sy(n,t,e,r){return[n,!0,0,t,null,r,null,e,null,null]}function xy(n,t){let e=Ue+t;if(e<n.length)return n[e]}function Ll(n,t,e,r=!0){let i=t[$];if(YI(i,t,n,e),r){let s=rf(e,n),a=t[be],l=a.parentNode(n[Cr]);l!==null&&EI(i,n[$t],a,t,l,s)}let o=t[Ro];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Ty(n,t){let e=Fo(n,t);return e!==void 0&&kl(e[$],e),e}function Fo(n,t){if(n.length<=Ue)return;let e=Ue+t,r=n[e];if(r){let i=r[wr];i!==null&&i!==n&&Ch(i,r),t>0&&(n[e-1][Vt]=r[Vt]);let o=Qa(n,Ue+t);DI(r[$],r);let s=o[En];s!==null&&s.detachView(o[$]),r[$e]=null,r[Vt]=null,r[U]&=-129}return r}function YI(n,t,e,r){let i=Ue+r,o=e.length;r>0&&(e[i-1][Vt]=t),r<o-Ue?(t[Vt]=e[i],Wm(e,Ue+r,t)):(e.push(t),t[Vt]=null),t[$e]=e;let s=t[wr];s!==null&&e!==s&&My(s,t);let a=t[En];a!==null&&a.insertView(n),$d(t),t[U]|=128}function My(n,t){let e=n[Di],r=t[$e];if($n(r))n[U]|=2;else{let i=r[$e][Ut];t[Ut]!==i&&(n[U]|=2)}e===null?n[Di]=[t]:e.push(t)}var Lo=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let t=this._lView,e=t[$];return fl(e,t,e.firstChild,[])}constructor(t,e,r=!0){this._lView=t,this._cdRefInjectingView=e,this.notifyErrorHandler=r}get context(){return this._lView[Ne]}set context(t){this._lView[Ne]=t}get destroyed(){return Ri(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[$e];if(Tn(t)){let e=t[tl],r=e?e.indexOf(this):-1;r>-1&&(Fo(t,r),Qa(e,r))}this._attachedToViewContainer=!1}kl(this._lView[$],this._lView)}onDestroy(t){hv(this._lView,t)}markForCheck(){Dh(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[U]&=-129}reattach(){$d(this._lView),this._lView[U]|=128}detectChanges(){this._lView[U]|=1024,by(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new S(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=nl(this._lView),e=this._lView[wr];e!==null&&!t&&Ch(e,this._lView),my(this._lView[$],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new S(902,!1);this._appRef=t;let e=nl(this._lView),r=this._lView[wr];r!==null&&!e&&My(r,this._lView),$d(this._lView)}};var Sn=(()=>{class n{static __NG_ELEMENT_ID__=QI}return n})(),KI=Sn,JI=class extends KI{_declarationLView;_declarationTContainer;elementRef;constructor(t,e,r){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,r){let i=Ol(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:e,dehydratedView:r});return new Lo(i)}};function QI(){return jl(He(),q())}function jl(n,t){return n.type&4?new JI(t,n,ki(n,t)):null}function Vl(n,t,e,r,i){let o=n.data[t];if(o===null)o=XI(n,t,e,r,i),OD()&&(o.flags|=32);else if(o.type&64){o.type=e,o.value=r,o.attrs=i;let s=AD();o.injectorIndex=s===null?-1:s.injectorIndex}return Mr(o,!0),o}function XI(n,t,e,r,i){let o=pv(),s=Yf(),a=s?o:o&&o.parent,l=n.data[t]=tS(n,a,e,t,r,i);return eS(n,l,o,s),l}function eS(n,t,e,r){n.firstChild===null&&(n.firstChild=t),e!==null&&(r?e.child==null&&t.parent!==null&&(e.child=t):e.next===null&&(e.next=t,t.prev=e))}function tS(n,t,e,r,i,o){let s=t?t.injectorIndex:-1,a=0;return xD()&&(a|=128),{type:e,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var hj=new RegExp(`^(\\d+)*(${DE}|${bE})*(.*)`);var nS=()=>null;function jo(n,t){return nS(n,t)}var rS=class{},Ay=class{},sf=class{resolveComponentFactory(t){throw Error(`No component factory found for ${nt(t)}.`)}},Ul=class{static NULL=new sf},Ii=class{},Wn=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>iS()}return n})();function iS(){let n=q(),t=He(),e=Xt(t.index,n);return($n(e)?e:n)[be]}var oS=(()=>{class n{static \u0275prov=x({token:n,providedIn:"root",factory:()=>null})}return n})();var Id={},af=class{injector;parentInjector;constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,r){r=Dl(r);let i=this.injector.get(t,Id,r);return i!==Id||e===Id?i:this.parentInjector.get(t,e,r)}};function lf(n,t,e){let r=e?n.styles:null,i=e?n.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=kd(i,a);else if(o==2){let l=a,c=t[++s];r=kd(r,l+": "+c+";")}}e?n.styles=r:n.stylesWithoutHost=r,e?n.classes=i:n.classesWithoutHost=i}function A(n,t=K.Default){let e=q();if(e===null)return M(n,t);let r=He();return Ov(r,e,We(n),t)}function Ry(){let n="invalid";throw new Error(n)}function Eh(n,t,e,r,i){let o=r===null?null:{"":-1},s=i(n,e);if(s!==null){let a,l=null,c=null,u=aS(s);u===null?a=s:[a,l,c]=u,uS(n,t,e,a,o,l,c)}o!==null&&r!==null&&sS(e,r,o)}function sS(n,t,e){let r=n.localNames=[];for(let i=0;i<t.length;i+=2){let o=e[t[i+1]];if(o==null)throw new S(-301,!1);r.push(t[i],o)}}function aS(n){let t=null,e=!1;for(let s=0;s<n.length;s++){let a=n[s];if(s===0&&Jt(a)&&(t=a),a.findHostDirectiveDefs!==null){e=!0;break}}if(!e)return null;let r=null,i=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,lS(s,r,o,i)),s===t&&(r??=[],r.push(s));return r!==null?(r.push(...t===null?n:n.slice(1)),[r,i,o]):null}function lS(n,t,e,r){let i=t.length;n.findHostDirectiveDefs(n,t,r),e.set(n,[i,t.length-1])}function cS(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function uS(n,t,e,r,i,o,s){let a=r.length,l=!1;for(let h=0;h<a;h++){let f=r[h];!l&&Jt(f)&&(l=!0,cS(n,e,h)),qd(al(e,t),n,f.type)}mS(e,n.data.length,a);for(let h=0;h<a;h++){let f=r[h];f.providersResolver&&f.providersResolver(f)}let c=!1,u=!1,d=dy(n,t,a,null);a>0&&(e.directiveToIndex=new Map);for(let h=0;h<a;h++){let f=r[h];if(e.mergedAttrs=Ei(e.mergedAttrs,f.hostAttrs),fS(n,e,t,d,f),gS(d,f,i),s!==null&&s.has(f)){let[C,I]=s.get(f);e.directiveToIndex.set(f.type,[d,C+e.directiveStart,I+e.directiveStart])}else(o===null||!o.has(f))&&e.directiveToIndex.set(f.type,d);f.contentQueries!==null&&(e.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(e.flags|=64);let y=f.type.prototype;!c&&(y.ngOnChanges||y.ngOnInit||y.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),c=!0),!u&&(y.ngOnChanges||y.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),u=!0),d++}dS(n,e,o)}function dS(n,t,e){for(let r=t.directiveStart;r<t.directiveEnd;r++){let i=n.data[r];if(e===null||!e.has(i))ym(0,t,i,r),ym(1,t,i,r),_m(t,r,!1);else{let o=e.get(i);wm(0,t,o,r),wm(1,t,o,r),_m(t,r,!0)}}}function ym(n,t,e,r){let i=n===0?e.inputs:e.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=t.inputs??={}:s=t.outputs??={},s[o]??=[],s[o].push(r),Ny(t,o)}}function wm(n,t,e,r){let i=n===0?e.inputs:e.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),Ny(t,s)}}function Ny(n,t){t==="class"?n.flags|=8:t==="style"&&(n.flags|=16)}function _m(n,t,e){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!e&&i===null||e&&o===null||fh(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let l=r[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!e&&i.hasOwnProperty(l)){let c=i[l];for(let u of c)if(u===t){s??=[],s.push(l,r[a+1]);break}}else if(e&&o.hasOwnProperty(l)){let c=o[l];for(let u=0;u<c.length;u+=2)if(c[u]===t){s??=[],s.push(c[u+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function fS(n,t,e,r,i){n.data[r]=i;let o=i.factory||(i.factory=gr(i.type,!0)),s=new Er(o,Jt(i),A);n.blueprint[r]=s,e[r]=s,hS(n,t,r,dy(n,e,i.hostVars,on),i)}function hS(n,t,e,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~t.index;pS(s)!=a&&s.push(a),s.push(e,r,o)}}function pS(n){let t=n.length;for(;t>0;){let e=n[--t];if(typeof e=="number"&&e<0)return e}return 0}function gS(n,t,e){if(e){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)e[t.exportAs[r]]=n;Jt(t)&&(e[""]=n)}}function mS(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function Oy(n,t,e,r,i,o,s,a){let l=t.consts,c=Hn(l,s),u=Vl(t,n,2,r,c);return o&&Eh(t,e,u,Hn(l,a),i),u.mergedAttrs=Ei(u.mergedAttrs,u.attrs),u.attrs!==null&&lf(u,u.attrs,!1),u.mergedAttrs!==null&&lf(u,u.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,u),u}function ky(n,t){eh(n,t),$f(t)&&n.queries.elementEnd(t)}var hl=class extends Ul{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=vr(t);return new Si(e,this.ngModule)}};function vS(n){return Object.keys(n).map(t=>{let[e,r,i]=n[t],o={propName:e,templateName:t,isSignal:(r&Rl.SignalBased)!==0};return i&&(o.transform=i),o})}function yS(n){return Object.keys(n).map(t=>({propName:n[t],templateName:t}))}function wS(n,t,e){let r=t instanceof Be?t:t?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new af(e,r):e}function _S(n){let t=n.get(Ii,null);if(t===null)throw new S(407,!1);let e=n.get(oS,null),r=n.get(Ir,null);return{rendererFactory:t,sanitizer:e,changeDetectionScheduler:r}}function CS(n,t){let e=(n.selectors[0][0]||"div").toLowerCase();return ay(t,e,e==="svg"?cv:e==="math"?yD:null)}var Si=class extends Ay{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=vS(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=yS(this.componentDef.outputs),this.cachedOutputs}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=KE(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!e}create(t,e,r,i){re(22);let o=Z(null);try{let s=this.componentDef,a=r?["ng-version","19.2.9"]:JE(this.componentDef.selectors[0]),l=hh(0,null,null,1,0,null,null,null,null,[a],null),c=wS(s,i||this.ngModule,t),u=_S(c),d=u.rendererFactory.createRenderer(null,s),h=r?aI(d,r,s.encapsulation,c):CS(s,d),f=ph(null,l,null,512|uy(s),null,null,u,d,c,null,ey(h,c,!0));f[je]=h,Jf(f);let y=null;try{let C=Oy(je,l,f,"#host",()=>[this.componentDef],!0,0);h&&(cy(d,h,C),Pi(h,f)),Nl(l,f,C),uh(l,C,f),ky(l,C),e!==void 0&&bS(C,this.ngContentSelectors,e),y=Xt(C.index,f),f[Ne]=y[Ne],wh(l,f,null)}catch(C){throw y!==null&&Qd(y),Qd(f),C}finally{re(23),Qf()}return new cf(this.componentType,f)}finally{Z(o)}}},cf=class extends rS{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,e){super(),this._rootLView=e,this._tNode=Hf(e[$],je),this.location=ki(this._tNode,e),this.instance=Xt(this._tNode.index,e)[Ne],this.hostView=this.changeDetectorRef=new Lo(e,void 0,!1),this.componentType=t}setInput(t,e){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let i=this._rootLView,o=yh(r,i[$],i,t,e);this.previousInputValues.set(t,e);let s=Xt(r.index,i);Dh(s,1)}get injector(){return new pr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function bS(n,t,e){let r=n.projection=[];for(let i=0;i<t.length;i++){let o=e[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Mn=(()=>{class n{static __NG_ELEMENT_ID__=DS}return n})();function DS(){let n=He();return Fy(n,q())}var ES=Mn,Py=class extends ES{_lContainer;_hostTNode;_hostLView;constructor(t,e,r){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=r}get element(){return ki(this._hostTNode,this._hostLView)}get injector(){return new pr(this._hostTNode,this._hostLView)}get parentInjector(){let t=th(this._hostTNode,this._hostLView);if(xv(t)){let e=ol(t,this._hostLView),r=il(t),i=e[$].data[r+8];return new pr(i,e)}else return new pr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=Cm(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-Ue}createEmbeddedView(t,e,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=jo(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},o,s);return this.insertImpl(a,i,Po(this._hostTNode,s)),a}createComponent(t,e,r,i,o){let s=t&&!pD(t),a;if(s)a=e;else{let y=e||{};a=y.index,r=y.injector,i=y.projectableNodes,o=y.environmentInjector||y.ngModuleRef}let l=s?t:new Si(vr(t)),c=r||this.parentInjector;if(!o&&l.ngModule==null){let C=(s?c:this.parentInjector).get(Be,null);C&&(o=C)}let u=vr(l.componentType??{}),d=jo(this._lContainer,u?.id??null),h=d?.firstChild??null,f=l.create(c,i,h,o);return this.insertImpl(f.hostView,a,Po(this._hostTNode,d)),f}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,r){let i=t._lView;if(_D(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=i[$e],c=new Py(l,l[$t],l[$e]);c.detach(c.indexOf(t))}}let o=this._adjustIndex(e),s=this._lContainer;return Ll(s,i,o,r),t.attachToViewContainerRef(),Wm(Sd(s),o,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=Cm(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),r=Fo(this._lContainer,e);r&&(Qa(Sd(this._lContainer),e),kl(r[$],r))}detach(t){let e=this._adjustIndex(t,-1),r=Fo(this._lContainer,e);return r&&Qa(Sd(this._lContainer),e)!=null?new Lo(r):null}_adjustIndex(t,e=0){return t??this.length+e}};function Cm(n){return n[tl]}function Sd(n){return n[tl]||(n[tl]=[])}function Fy(n,t){let e,r=t[n.index];return Tn(r)?e=r:(e=Sy(r,t,null,n),t[n.index]=e,gh(t,e)),SS(e,t,n,r),new Py(e,n,t)}function IS(n,t){let e=n[be],r=e.createComment(""),i=nn(t,n),o=e.parentNode(i);return dl(e,o,r,e.nextSibling(i),!1),r}var SS=MS,xS=()=>!1;function TS(n,t,e){return xS(n,t,e)}function MS(n,t,e,r){if(n[Cr])return;let i;e.type&8?i=Qt(r):i=IS(t,e),n[Cr]=i}var uf=class n{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},df=class n{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let e=t.queries;if(e!==null){let r=t.contentQueries!==null?t.contentQueries[0]:e.length,i=[];for(let o=0;o<r;o++){let s=e.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)Ih(t,e).matches!==null&&this.queries[e].setDirty()}},pl=class{flags;read;predicate;constructor(t,e,r=null){this.flags=e,this.read=r,typeof t=="string"?this.predicate=LS(t):this.predicate=t}},ff=class n{queries;constructor(t=[]){this.queries=t}elementStart(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let r=0;r<this.length;r++){let i=e!==null?e.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,e!==null?e.push(o):e=[o])}return e!==null?new n(e):null}template(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},hf=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,e=-1){this.metadata=t,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new n(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==e;)r=r.parent;return e===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,e){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(t,e,AS(e,o)),this.matchTNodeWithReadOption(t,e,qa(e,t,o,!1,!1))}else r===Sn?e.type&4&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,qa(e,t,r,!1,!1))}matchTNodeWithReadOption(t,e,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Dt||i===Mn||i===Sn&&e.type&4)this.addMatch(e.index,-2);else{let o=qa(e,t,i,!1,!1);o!==null&&this.addMatch(e.index,o)}else this.addMatch(e.index,r)}}addMatch(t,e){this.matches===null?this.matches=[t,e]:this.matches.push(t,e)}};function AS(n,t){let e=n.localNames;if(e!==null){for(let r=0;r<e.length;r+=2)if(e[r]===t)return e[r+1]}return null}function RS(n,t){return n.type&11?ki(n,t):n.type&4?jl(n,t):null}function NS(n,t,e,r){return e===-1?RS(t,n):e===-2?OS(n,t,r):Oo(n,n[$],e,t)}function OS(n,t,e){if(e===Dt)return ki(t,n);if(e===Sn)return jl(t,n);if(e===Mn)return Fy(t,n)}function Ly(n,t,e,r){let i=t[En].queries[r];if(i.matches===null){let o=n.data,s=e.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let u=o[c];a.push(NS(t,u,s[l+1],e.metadata.read))}}i.matches=a}return i.matches}function pf(n,t,e,r){let i=n.queries.getByIndex(e),o=i.matches;if(o!==null){let s=Ly(n,t,i,e);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)r.push(s[a/2]);else{let c=o[a+1],u=t[-l];for(let d=Ue;d<u.length;d++){let h=u[d];h[wr]===h[$e]&&pf(h[$],h,c,r)}if(u[Di]!==null){let d=u[Di];for(let h=0;h<d.length;h++){let f=d[h];pf(f[$],f,c,r)}}}}}return r}function kS(n,t){return n[En].queries[t].queryList}function jy(n,t,e){let r=new Jd((e&4)===4);return DD(n,t,r,r.destroy),(t[En]??=new df).queries.push(new uf(r))-1}function PS(n,t,e){let r=De();return r.firstCreatePass&&(Vy(r,new pl(n,t,e),-1),(t&2)===2&&(r.staticViewQueries=!0)),jy(r,q(),t)}function FS(n,t,e,r){let i=De();if(i.firstCreatePass){let o=He();Vy(i,new pl(t,e,r),o.index),jS(i,n),(e&2)===2&&(i.staticContentQueries=!0)}return jy(i,q(),e)}function LS(n){return n.split(",").map(t=>t.trim())}function Vy(n,t,e){n.queries===null&&(n.queries=new ff),n.queries.track(new hf(t,e))}function jS(n,t){let e=n.contentQueries||(n.contentQueries=[]),r=e.length?e[e.length-1]:-1;t!==r&&e.push(n.queries.length-1,t)}function Ih(n,t){return n.queries.getByIndex(t)}function VS(n,t){let e=n[$],r=Ih(e,t);return r.crossesNgTemplate?pf(e,n,t,[]):Ly(e,n,r,t)}var xi=class{},Sh=class{};var gf=class extends xi{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new hl(this);constructor(t,e,r,i=!0){super(),this.ngModuleType=t,this._parent=e;let o=Km(t);this._bootstrapComponents=oy(o.bootstrap),this._r3Injector=Fv(t,e,[{provide:xi,useValue:this},{provide:Ul,useValue:this.componentFactoryResolver},...r],nt(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},mf=class extends Sh{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new gf(this.moduleType,t,[])}};var gl=class extends xi{injector;componentFactoryResolver=new hl(this);instance=null;constructor(t){super();let e=new Ao([...t.providers,{provide:xi,useValue:this},{provide:Ul,useValue:this.componentFactoryResolver}],t.parent||Bf(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function qo(n,t,e=null){return new gl({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}var US=(()=>{class n{_injector;cachedInjectors=new Map;constructor(e){this._injector=e}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let r=Jm(!1,e.type),i=r.length>0?qo([r],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,i)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=x({token:n,providedIn:"environment",factory:()=>new n(M(Be))})}return n})();function he(n){return Uo(()=>{let t=Uy(n),e=P(D({},t),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===qv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:t.standalone?i=>i.get(US).getOrCreateStandaloneInjector(e):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||tn.Emulated,styles:n.styles||tt,_:null,schemas:n.schemas||null,tView:null,id:""});t.standalone&&Ar("NgStandalone"),By(e);let r=n.dependencies;return e.directiveDefs=bm(r,!1),e.pipeDefs=bm(r,!0),e.id=zS(e),e})}function BS(n){return vr(n)||nD(n)}function $S(n){return n!==null}function Ht(n){return Uo(()=>({type:n.type,bootstrap:n.bootstrap||tt,declarations:n.declarations||tt,imports:n.imports||tt,exports:n.exports||tt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function HS(n,t){if(n==null)return mr;let e={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,l;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,l=i[3]||null):(o=i,s=i,a=Rl.None,l=null),e[o]=[r,a,l],t[o]=s}return e}function GS(n){if(n==null)return mr;let t={};for(let e in n)n.hasOwnProperty(e)&&(t[n[e]]=e);return t}function Oe(n){return Uo(()=>{let t=Uy(n);return By(t),t})}function Bl(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Uy(n){let t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputConfig:n.inputs||mr,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||tt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:HS(n.inputs,t),outputs:GS(n.outputs),debugInfo:null}}function By(n){n.features?.forEach(t=>t(n))}function bm(n,t){if(!n)return null;let e=t?rD:BS;return()=>(typeof n=="function"?n():n).map(r=>e(r)).filter($S)}function zS(n){let t=0,e=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,e,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function qS(n){return Object.getPrototypeOf(n.prototype).constructor}function An(n){let t=qS(n.type),e=!0,r=[n];for(;t;){let i;if(Jt(n))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new S(903,!1);i=t.\u0275dir}if(i){if(e){r.push(i);let s=n;s.inputs=xd(n.inputs),s.declaredInputs=xd(n.declaredInputs),s.outputs=xd(n.outputs);let a=i.hostBindings;a&&JS(n,a);let l=i.viewQuery,c=i.contentQueries;if(l&&YS(n,l),c&&KS(n,c),WS(n,i),Ob(n.outputs,i.outputs),Jt(i)&&i.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===An&&(e=!1)}}t=Object.getPrototypeOf(t)}ZS(r)}function WS(n,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||n.inputs.hasOwnProperty(e))continue;let r=t.inputs[e];r!==void 0&&(n.inputs[e]=r,n.declaredInputs[e]=t.declaredInputs[e])}}function ZS(n){let t=0,e=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Ei(i.hostAttrs,e=Ei(e,i.hostAttrs))}}function xd(n){return n===mr?{}:n===tt?[]:n}function YS(n,t){let e=n.viewQuery;e?n.viewQuery=(r,i)=>{t(r,i),e(r,i)}:n.viewQuery=t}function KS(n,t){let e=n.contentQueries;e?n.contentQueries=(r,i,o)=>{t(r,i,o),e(r,i,o)}:n.contentQueries=t}function JS(n,t){let e=n.hostBindings;e?n.hostBindings=(r,i)=>{t(r,i),e(r,i)}:n.hostBindings=t}function $y(n){return XS(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function QS(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{let e=n[Symbol.iterator](),r;for(;!(r=e.next()).done;)t(r.value)}}function XS(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function xh(n,t,e){return n[t]=e}function Ct(n,t,e){let r=n[t];return Object.is(r,e)?!1:(n[t]=e,!0)}function Hy(n,t,e,r){let i=Ct(n,t,e);return Ct(n,t+1,r)||i}function ex(n,t,e,r,i){let o=Hy(n,t,e,r);return Ct(n,t+2,i)||o}function tx(n,t,e,r,i,o,s,a,l){let c=t.consts,u=Vl(t,n,4,s||null,a||null);Zf()&&Eh(t,e,u,Hn(c,l),vh),u.mergedAttrs=Ei(u.mergedAttrs,u.attrs),eh(t,u);let d=u.tView=hh(2,u,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c,null);return t.queries!==null&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}function vf(n,t,e,r,i,o,s,a,l,c){let u=e+je,d=t.firstCreatePass?tx(u,t,n,r,i,o,s,a,l):t.data[u];Mr(d,!1);let h=nx(t,n,d,e);Tl()&&Pl(t,n,h,d),Pi(h,n);let f=Sy(h,n,h,d);return n[u]=f,gh(n,f),TS(f,d,n),Sl(d)&&Nl(t,n,d),l!=null&&mh(n,d,c),d}function R(n,t,e,r,i,o,s,a){let l=q(),c=De(),u=Hn(c.consts,o);return vf(l,c,n,t,e,r,i,u,s,a),R}var nx=rx;function rx(n,t,e,r){return Ml(!0),t[be].createComment("")}var Gy=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var zy=new T("");var qy=(()=>{class n{static \u0275prov=x({token:n,providedIn:"root",factory:()=>new yf})}return n})(),yf=class{queuedEffectCount=0;queues=new Map;schedule(t){this.enqueue(t)}remove(t){let e=t.zone,r=this.queues.get(e);r.has(t)&&(r.delete(t),this.queuedEffectCount--)}enqueue(t){let e=t.zone;this.queues.has(e)||this.queues.set(e,new Set);let r=this.queues.get(e);r.has(t)||(this.queuedEffectCount++,r.add(t))}flush(){for(;this.queuedEffectCount>0;)for(let[t,e]of this.queues)t===null?this.flushQueue(e):t.run(()=>this.flushQueue(e))}flushQueue(t){for(let e of t)t.delete(e),this.queuedEffectCount--,e.run()}};function Rr(n){return!!n&&typeof n.then=="function"}function Wy(n){return!!n&&typeof n.subscribe=="function"}var Zy=new T("");function Th(n){return $o([{provide:Zy,multi:!0,useValue:n}])}var Yy=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((e,r)=>{this.resolve=e,this.reject=r});appInits=w(Zy,{optional:!0})??[];injector=w(pt);constructor(){}runInitializers(){if(this.initialized)return;let e=[];for(let i of this.appInits){let o=rt(this.injector,i);if(Rr(o))e.push(o);else if(Wy(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});e.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{r()}).catch(i=>{this.reject(i)}),e.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$l=new T("");function ix(){Xu(()=>{throw new S(600,!1)})}function ox(n){return n.isBoundToModule}var sx=10;var Sr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=w(uE);afterRenderManager=w(Xv);zonelessEnabled=w(jv);rootEffectScheduler=w(qy);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new _e;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=w(qn).hasPendingTasks.pipe(Y(e=>!e));constructor(){w(Fi,{optional:!0})}whenStable(){let e;return new Promise(r=>{e=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{e.unsubscribe()})}_injector=w(Be);_rendererFactory=null;get injector(){return this._injector}bootstrap(e,r){return this.bootstrapImpl(e,r)}bootstrapImpl(e,r,i=pt.NULL){re(10);let o=e instanceof Ay;if(!this._injector.get(Yy).done){let f="";throw new S(405,f)}let a;o?a=e:a=this._injector.get(Ul).resolveComponentFactory(e),this.componentTypes.push(a.componentType);let l=ox(a)?void 0:this._injector.get(xi),c=r||a.selector,u=a.create(i,[],c,l),d=u.location.nativeElement,h=u.injector.get(zy,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Wa(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),re(11,u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){re(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(ah.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new S(101,!1);let e=Z(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Z(e),this.afterTick.next(),re(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ii,null,{optional:!0}));let e=0;for(;this.dirtyFlags!==0&&e++<sx;)re(14),this.synchronizeOnce(),re(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let e=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)ax(r,i,e,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>xl(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let r=e;this._views.push(r),r.attachToAppRef(this)}detachView(e){let r=e;Wa(this._views,r),r.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get($l,[]).forEach(i=>i(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Wa(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new S(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Wa(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function ax(n,t,e,r){if(!e&&!xl(n))return;by(n,t,e&&!r?0:1)}function Hl(n,t,e,r){let i=q(),o=Oi();if(Ct(i,o,t)){let s=De(),a=Xf();gI(a,i,n,t,e,r)}return Hl}function lx(n,t,e,r){return Ct(n,Oi(),e)?t+bl(e)+r:on}function $a(n,t){return n<<17|t<<2}function xr(n){return n>>17&32767}function cx(n){return(n&2)==2}function ux(n,t){return n&131071|t<<17}function wf(n){return n|2}function Ti(n){return(n&131068)>>2}function Td(n,t){return n&-131069|t<<2}function dx(n){return(n&1)===1}function _f(n){return n|1}function fx(n,t,e,r,i,o){let s=o?t.classBindings:t.styleBindings,a=xr(s),l=Ti(s);n[r]=e;let c=!1,u;if(Array.isArray(e)){let d=e;u=d[1],(u===null||Bo(d,u)>0)&&(c=!0)}else u=e;if(i)if(l!==0){let h=xr(n[a+1]);n[r+1]=$a(h,a),h!==0&&(n[h+1]=Td(n[h+1],r)),n[a+1]=ux(n[a+1],r)}else n[r+1]=$a(a,0),a!==0&&(n[a+1]=Td(n[a+1],r)),a=r;else n[r+1]=$a(l,0),a===0?a=r:n[l+1]=Td(n[l+1],r),l=r;c&&(n[r+1]=wf(n[r+1])),Dm(n,u,r,!0),Dm(n,u,r,!1),hx(t,u,n,r,o),s=$a(a,l),o?t.classBindings=s:t.styleBindings=s}function hx(n,t,e,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof t=="string"&&Bo(o,t)>=0&&(e[r+1]=_f(e[r+1]))}function Dm(n,t,e,r){let i=n[e+1],o=t===null,s=r?xr(i):Ti(i),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],c=n[s+1];px(l,t)&&(a=!0,n[s+1]=r?_f(c):wf(c)),s=r?xr(c):Ti(c)}a&&(n[e+1]=r?wf(i):_f(i))}function px(n,t){return n===null||t==null||(Array.isArray(n)?n[1]:n)===t?!0:Array.isArray(n)&&typeof t=="string"?Bo(n,t)>=0:!1}var jt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function gx(n){return n.substring(jt.key,jt.keyEnd)}function mx(n){return vx(n),Ky(n,Jy(n,0,jt.textEnd))}function Ky(n,t){let e=jt.textEnd;return e===t?-1:(t=jt.keyEnd=yx(n,jt.key=t,e),Jy(n,t,e))}function vx(n){jt.key=0,jt.keyEnd=0,jt.value=0,jt.valueEnd=0,jt.textEnd=n.length}function Jy(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function yx(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}function b(n,t,e){let r=q(),i=Oi();if(Ct(r,i,t)){let o=De(),s=Xf();py(o,s,r,n,t,r[be],e,!1)}return b}function Cf(n,t,e,r,i){yh(t,n,e,i?"class":"style",r)}function Zn(n,t,e){return Qy(n,t,e,!1),Zn}function Et(n,t){return Qy(n,t,null,!0),Et}function Li(n){_x(Sx,wx,n,!0)}function wx(n,t){for(let e=mx(t);e>=0;e=Ky(t,e))Vf(n,gx(t),!0)}function Qy(n,t,e,r){let i=q(),o=De(),s=vv(2);if(o.firstUpdatePass&&e0(o,n,s,r),t!==on&&Ct(i,s,t)){let a=o.data[Gn()];t0(o,a,i,i[be],n,i[s+1]=Tx(t,e),r,s)}}function _x(n,t,e,r){let i=De(),o=vv(2);i.firstUpdatePass&&e0(i,null,o,r);let s=q();if(e!==on&&Ct(s,o,e)){let a=i.data[Gn()];if(n0(a,r)&&!Xy(i,o)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(e=kd(l,e||"")),Cf(i,a,s,e,r)}else xx(i,a,s,s[be],s[o+1],s[o+1]=Ix(n,t,e),r,o)}}function Xy(n,t){return t>=n.expandoStartIndex}function e0(n,t,e,r){let i=n.data;if(i[e+1]===null){let o=i[Gn()],s=Xy(n,e);n0(o,r)&&t===null&&!s&&(t=!1),t=Cx(i,o,t,r),fx(i,o,t,e,s,r)}}function Cx(n,t,e,r){let i=FD(n),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(e=Md(null,n,t,e,r),e=Vo(e,t.attrs,r),o=null);else{let s=t.directiveStylingLast;if(s===-1||n[s]!==i)if(e=Md(i,n,t,e,r),o===null){let l=bx(n,t,r);l!==void 0&&Array.isArray(l)&&(l=Md(null,n,t,l[1],r),l=Vo(l,t.attrs,r),Dx(n,t,r,l))}else o=Ex(n,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),e}function bx(n,t,e){let r=e?t.classBindings:t.styleBindings;if(Ti(r)!==0)return n[xr(r)]}function Dx(n,t,e,r){let i=e?t.classBindings:t.styleBindings;n[xr(i)]=r}function Ex(n,t,e){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Vo(r,s,e)}return Vo(r,t.attrs,e)}function Md(n,t,e,r,i){let o=null,s=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<s&&(o=t[a],r=Vo(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(e.directiveStylingLast=a),r}function Vo(n,t,e){let r=e?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Vf(n,s,e?!0:t[++o]))}return n===void 0?null:n}function Ix(n,t,e){if(e==null||e==="")return tt;let r=[],i=zo(e);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&t(r,i);return r}function Sx(n,t,e){let r=String(t);r!==""&&!r.includes(" ")&&Vf(n,r,e)}function xx(n,t,e,r,i,o,s,a){i===on&&(i=tt);let l=0,c=0,u=0<i.length?i[0]:null,d=0<o.length?o[0]:null;for(;u!==null||d!==null;){let h=l<i.length?i[l+1]:void 0,f=c<o.length?o[c+1]:void 0,y=null,C;u===d?(l+=2,c+=2,h!==f&&(y=d,C=f)):d===null||u!==null&&u<d?(l+=2,y=u):(c+=2,y=d,C=f),y!==null&&t0(n,t,e,r,y,C,s,a),u=l<i.length?i[l]:null,d=c<o.length?o[c]:null}}function t0(n,t,e,r,i,o,s,a){if(!(t.type&3))return;let l=n.data,c=l[a+1],u=dx(c)?Em(l,t,e,i,Ti(c),s):void 0;if(!ml(u)){ml(o)||cx(c)&&(o=Em(l,null,e,i,a,s));let d=uv(Gn(),e);PI(r,s,d,i,o)}}function Em(n,t,e,r,i,o){let s=t===null,a;for(;i>0;){let l=n[i],c=Array.isArray(l),u=c?l[1]:l,d=u===null,h=e[i+1];h===on&&(h=d?tt:void 0);let f=d?wd(h,r):u===r?h:void 0;if(c&&!ml(f)&&(f=wd(l,r)),ml(f)&&(a=f,s))return a;let y=n[i+1];i=s?xr(y):Ti(y)}if(t!==null){let l=o?t.residualClasses:t.residualStyles;l!=null&&(a=wd(l,r))}return a}function ml(n){return n!==void 0}function Tx(n,t){return n==null||n===""||(typeof t=="string"?n=n+t:typeof n=="object"&&(n=nt(zo(n)))),n}function n0(n,t){return(n.flags&(t?8:16))!==0}var bf=class{destroy(t){}updateValue(t,e){}swap(t,e){let r=Math.min(t,e),i=Math.max(t,e),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(t,e){this.attach(e,this.detach(t))}};function Ad(n,t,e,r,i){return n===e&&Object.is(t,r)?1:Object.is(i(n,t),i(e,r))?-1:0}function Mx(n,t,e){let r,i,o=0,s=n.length-1,a=void 0;if(Array.isArray(t)){let l=t.length-1;for(;o<=s&&o<=l;){let c=n.at(o),u=t[o],d=Ad(o,c,o,u,e);if(d!==0){d<0&&n.updateValue(o,u),o++;continue}let h=n.at(s),f=t[l],y=Ad(s,h,l,f,e);if(y!==0){y<0&&n.updateValue(s,f),s--,l--;continue}let C=e(o,c),I=e(s,h),N=e(o,u);if(Object.is(N,I)){let we=e(l,f);Object.is(we,C)?(n.swap(o,s),n.updateValue(s,f),l--,s--):n.move(s,o),n.updateValue(o,u),o++;continue}if(r??=new vl,i??=Sm(n,o,s,e),Df(n,r,o,N))n.updateValue(o,u),o++,s++;else if(i.has(N))r.set(C,n.detach(o)),s--;else{let we=n.create(o,t[o]);n.attach(o,we),o++,s++}}for(;o<=l;)Im(n,r,e,o,t[o]),o++}else if(t!=null){let l=t[Symbol.iterator](),c=l.next();for(;!c.done&&o<=s;){let u=n.at(o),d=c.value,h=Ad(o,u,o,d,e);if(h!==0)h<0&&n.updateValue(o,d),o++,c=l.next();else{r??=new vl,i??=Sm(n,o,s,e);let f=e(o,d);if(Df(n,r,o,f))n.updateValue(o,d),o++,s++,c=l.next();else if(!i.has(f))n.attach(o,n.create(o,d)),o++,s++,c=l.next();else{let y=e(o,u);r.set(y,n.detach(o)),s--}}}for(;!c.done;)Im(n,r,e,n.length,c.value),c=l.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(l=>{n.destroy(l)})}function Df(n,t,e,r){return t!==void 0&&t.has(r)?(n.attach(e,t.get(r)),t.delete(r),!0):!1}function Im(n,t,e,r,i){if(Df(n,t,r,e(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function Sm(n,t,e,r){let i=new Set;for(let o=t;o<=e;o++)i.add(r(o,n.at(o)));return i}var vl=class{kvMap=new Map;_vMap=void 0;has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let e=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(e)?(this.kvMap.set(t,this._vMap.get(e)),this._vMap.delete(e)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,e){if(this.kvMap.has(t)){let r=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,e)}else this.kvMap.set(t,e)}forEach(t){for(let[e,r]of this.kvMap)if(t(r,e),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),t(r,e)}}};function It(n,t){Ar("NgControlFlow");let e=q(),r=Oi(),i=e[r]!==on?e[r]:-1,o=i!==-1?yl(e,je+i):void 0,s=0;if(Ct(e,r,n)){let a=Z(null);try{if(o!==void 0&&Ty(o,s),n!==-1){let l=je+n,c=yl(e,l),u=xf(e[$],l),d=jo(c,u.tView.ssrId),h=Ol(e,u,t,{dehydratedView:d});Ll(c,h,s,Po(u,d))}}finally{Z(a)}}else if(o!==void 0){let a=xy(o,s);a!==void 0&&(a[Ne]=t)}}var Ef=class{lContainer;$implicit;$index;constructor(t,e,r){this.lContainer=t,this.$implicit=e,this.$index=r}get $count(){return this.lContainer.length-Ue}};var If=class{hasEmptyBlock;trackByFn;liveCollection;constructor(t,e,r){this.hasEmptyBlock=t,this.trackByFn=e,this.liveCollection=r}};function r0(n,t,e,r,i,o,s,a,l,c,u,d,h){Ar("NgControlFlow");let f=q(),y=De(),C=l!==void 0,I=q(),N=a?s.bind(I[Ut][Ne]):s,we=new If(C,N);I[je+n]=we,vf(f,y,n+1,t,e,r,i,Hn(y.consts,o)),C&&vf(f,y,n+2,l,c,u,d,Hn(y.consts,h))}var Sf=class extends bf{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(t,e,r){super(),this.lContainer=t,this.hostLView=e,this.templateTNode=r}get length(){return this.lContainer.length-Ue}at(t){return this.getLView(t)[Ne].$implicit}attach(t,e){let r=e[Ro];this.needsIndexUpdate||=t!==this.length,Ll(this.lContainer,e,t,Po(this.templateTNode,r))}detach(t){return this.needsIndexUpdate||=t!==this.length-1,Ax(this.lContainer,t)}create(t,e){let r=jo(this.lContainer,this.templateTNode.tView.ssrId),i=Ol(this.hostLView,this.templateTNode,new Ef(this.lContainer,e,t),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(t){kl(t[$],t),this.operationsCounter?.recordDestroy()}updateValue(t,e){this.getLView(t)[Ne].$implicit=e}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[Ne].$index=t}getLView(t){return Rx(this.lContainer,t)}};function i0(n){let t=Z(null),e=Gn();try{let r=q(),i=r[$],o=r[e],s=e+1,a=yl(r,s);if(o.liveCollection===void 0){let c=xf(i,s);o.liveCollection=new Sf(a,r,c)}else o.liveCollection.reset();let l=o.liveCollection;if(Mx(l,n,o.trackByFn),l.updateIndexes(),o.hasEmptyBlock){let c=Oi(),u=l.length===0;if(Ct(r,c,u)){let d=e+2,h=yl(r,d);if(u){let f=xf(i,d),y=jo(h,f.tView.ssrId),C=Ol(r,f,void 0,{dehydratedView:y});Ll(h,C,0,Po(f,y))}else Ty(h,0)}}}finally{Z(t)}}function yl(n,t){return n[t]}function Ax(n,t){return Fo(n,t)}function Rx(n,t){return xy(n,t)}function xf(n,t){return Hf(n,t)}function g(n,t,e,r){let i=q(),o=De(),s=je+n,a=i[be],l=o.firstCreatePass?Oy(s,o,i,t,vh,Zf(),e,r):o.data[s],c=Nx(o,i,l,a,t,n);i[s]=c;let u=Sl(l);return Mr(l,!0),cy(a,c,l),!gy(l)&&Tl()&&Pl(o,i,c,l),(ED()===0||u)&&Pi(c,i),ID(),u&&(Nl(o,i,l),uh(o,l,i)),r!==null&&mh(i,l),g}function m(){let n=He();Yf()?gv():(n=n.parent,Mr(n,!1));let t=n;TD(t)&&MD(),SD();let e=De();return e.firstCreatePass&&ky(e,t),t.classesWithoutHost!=null&&HD(t)&&Cf(e,t,q(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&GD(t)&&Cf(e,t,q(),t.stylesWithoutHost,!1),m}function O(n,t,e,r){return g(n,t,e,r),m(),O}var Nx=(n,t,e,r,i,o)=>(Ml(!0),ay(r,i,UD()));function Ox(n,t,e,r,i){let o=t.consts,s=Hn(o,r),a=Vl(t,n,8,"ng-container",s);s!==null&&lf(a,s,!0);let l=Hn(o,i);return Zf()&&Eh(t,e,a,l,vh),a.mergedAttrs=Ei(a.mergedAttrs,a.attrs),t.queries!==null&&t.queries.elementStart(t,a),a}function Nr(n,t,e){let r=q(),i=De(),o=n+je,s=i.firstCreatePass?Ox(o,i,r,t,e):i.data[o];Mr(s,!0);let a=kx(i,r,s,n);return r[o]=a,Tl()&&Pl(i,r,a,s),Pi(a,r),Sl(s)&&(Nl(i,r,s),uh(i,s,r)),e!=null&&mh(r,s),Nr}function Or(){let n=He(),t=De();return Yf()?gv():(n=n.parent,Mr(n,!1)),t.firstCreatePass&&(eh(t,n),$f(n)&&t.queries.elementEnd(n)),Or}function Mh(n,t,e){return Nr(n,t,e),Or(),Mh}var kx=(n,t,e,r)=>(Ml(!0),eI(t[be],""));function me(){return q()}var dr=void 0;function Px(n){let t=Math.floor(Math.abs(n)),e=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&e===0?1:5}var Fx=["en",[["a","p"],["AM","PM"],dr],[["AM","PM"],dr,dr],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],dr,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],dr,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",dr,"{1} 'at' {0}",dr],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",Px],Rd={};function St(n){let t=Lx(n),e=xm(t);if(e)return e;let r=t.split("-")[0];if(e=xm(r),e)return e;if(r==="en")return Fx;throw new S(701,!1)}function xm(n){return n in Rd||(Rd[n]=fr.ng&&fr.ng.common&&fr.ng.common.locales&&fr.ng.common.locales[n]),Rd[n]}var Ee=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Ee||{});function Lx(n){return n.toLowerCase().replace(/_/g,"-")}var wl="en-US";var jx=wl;function Vx(n){typeof n=="string"&&(jx=n.toLowerCase().replace(/_/g,"-"))}function Tm(n,t,e){return function r(i){if(i===Function)return e;let o=Ai(n)?Xt(n.index,t):t;Dh(o,5);let s=t[Ne],a=Mm(t,s,e,i),l=r.__ngNextListenerFn__;for(;l;)a=Mm(t,s,l,i)&&a,l=l.__ngNextListenerFn__;return a}}function Mm(n,t,e,r){let i=Z(null);try{return re(6,t,e),e(r)!==!1}catch(o){return Ux(n,o),!1}finally{re(7,t,e),Z(i)}}function Ux(n,t){let e=n[yr],r=e?e.get(en,null):null;r&&r.handleError(t)}function Am(n,t,e,r,i,o){let s=t[e],a=t[$],c=a.data[e].outputs[r],u=s[c],d=a.firstCreatePass?Wf(a):null,h=qf(t),f=u.subscribe(o),y=h.length;h.push(o,f),d&&d.push(i,n.index,y,-(y+1))}var Bx=new Map;function V(n,t,e,r){let i=q(),o=De(),s=He();return o0(o,i,i[be],s,n,t,r),V}function $x(n,t,e,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===e&&i[o+1]===r){let a=t[el],l=i[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function o0(n,t,e,r,i,o,s){let a=Sl(r),c=n.firstCreatePass?Wf(n):null,u=qf(t),d=!0;if(r.type&3||s){let h=nn(r,t),f=s?s(h):h,y=u.length,C=s?N=>s(Qt(N[r.index])):r.index,I=null;if(!s&&a&&(I=$x(n,t,i,r.index)),I!==null){let N=I.__ngLastListenerFn__||I;N.__ngNextListenerFn__=o,I.__ngLastListenerFn__=o,d=!1}else{o=Tm(r,t,o);let N=t[yr].get(Al);Bx.get(N)?.(f,i,o);let te=e.listen(f,i,o);u.push(o,te),c&&c.push(i,C,y,y+1)}}else o=Tm(r,t,o);if(d){let h=r.outputs?.[i],f=r.hostDirectiveOutputs?.[i];if(f&&f.length)for(let y=0;y<f.length;y+=2){let C=f[y],I=f[y+1];Am(r,t,C,I,i,o)}if(h&&h.length)for(let y of h)Am(r,t,y,i,i,o)}}function E(n=1){return jD(n)}function Ah(n,t,e,r){FS(n,t,e,r)}function s0(n,t,e){PS(n,t,e)}function Wo(n){let t=q(),e=De(),r=yv();Kf(r+1);let i=Ih(e,r);if(n.dirty&&wD(t)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=VS(t,r);n.reset(o,hE),n.notifyOnChanges()}return!0}return!1}function Zo(){return kS(q(),yv())}function Hx(n,t,e,r){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=r}function Gl(n){let t=RD();return Gf(t,je+n)}function _(n,t=""){let e=q(),r=De(),i=n+je,o=r.firstCreatePass?Vl(r,i,1,t,null):r.data[i],s=Gx(r,e,o,t,n);e[i]=s,Tl()&&Pl(r,e,s,o),Mr(o,!1)}var Gx=(n,t,e,r,i)=>(Ml(!0),QE(t[be],r));function ie(n){return xt("",n,""),ie}function xt(n,t,e){let r=q(),i=lx(r,n,t,e);return i!==on&&zx(r,Gn(),i),xt}function zx(n,t,e){let r=uv(t,n);XE(n[be],r,e)}function Ze(n,t,e){Gv(t)&&(t=t());let r=q(),i=Oi();if(Ct(r,i,t)){let o=De(),s=Xf();py(o,s,r,n,t,r[be],e,!1)}return Ze}function ot(n,t){let e=Gv(n);return e&&n.set(t),e}function Ye(n,t){let e=q(),r=De(),i=He();return o0(r,e,e[be],i,n,t),Ye}function qx(n,t,e){let r=De();if(r.firstCreatePass){let i=Jt(n);Tf(e,r.data,r.blueprint,i,!0),Tf(t,r.data,r.blueprint,i,!1)}}function Tf(n,t,e,r,i){if(n=We(n),Array.isArray(n))for(let o=0;o<n.length;o++)Tf(n[o],t,e,r,i);else{let o=De(),s=q(),a=He(),l=bi(n)?n:We(n.provide),c=ev(n),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(bi(n)||!n.multi){let f=new Er(c,i,A),y=Od(l,t,i?u:u+h,d);y===-1?(qd(al(a,s),o,l),Nd(o,n,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),e.push(f),s.push(f)):(e[y]=f,s[y]=f)}else{let f=Od(l,t,u+h,d),y=Od(l,t,u,u+h),C=f>=0&&e[f],I=y>=0&&e[y];if(i&&!I||!i&&!C){qd(al(a,s),o,l);let N=Yx(i?Zx:Wx,e.length,i,r,c);!i&&I&&(e[y].providerFactory=N),Nd(o,n,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),e.push(N),s.push(N)}else{let N=a0(e[i?y:f],c,!i&&r);Nd(o,n,f>-1?f:y,N)}!i&&r&&I&&e[y].componentProviders++}}}function Nd(n,t,e,r){let i=bi(t),o=lD(t);if(i||o){let l=(o?We(t.useClass):t).prototype.ngOnDestroy;if(l){let c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&t.multi){let u=c.indexOf(e);u===-1?c.push(e,[r,l]):c[u+1].push(r,l)}else c.push(e,l)}}}function a0(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function Od(n,t,e,r){for(let i=e;i<r;i++)if(t[i]===n)return i;return-1}function Wx(n,t,e,r){return Mf(this.multi,[])}function Zx(n,t,e,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Oo(e,e[$],this.providerFactory.index,r);o=a.slice(0,s),Mf(i,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],Mf(i,o);return o}function Mf(n,t){for(let e=0;e<n.length;e++){let r=n[e];t.push(r())}return t}function Yx(n,t,e,r,i){let o=new Er(n,e,A);return o.multi=[],o.index=t,o.componentProviders=0,a0(o,i,r&&!e),o}function Yo(n,t=[]){return e=>{e.providersResolver=(r,i)=>qx(r,i?i(n):n,t)}}function Yn(n,t,e,r){return c0(q(),Ho(),n,t,e,r)}function Ko(n,t,e,r,i){return u0(q(),Ho(),n,t,e,r,i)}function l0(n,t,e,r,i,o){return Kx(q(),Ho(),n,t,e,r,i,o)}function Rh(n,t){let e=n[t];return e===on?void 0:e}function c0(n,t,e,r,i,o){let s=t+e;return Ct(n,s,i)?xh(n,s+1,o?r.call(o,i):r(i)):Rh(n,s+1)}function u0(n,t,e,r,i,o,s){let a=t+e;return Hy(n,a,i,o)?xh(n,a+2,s?r.call(s,i,o):r(i,o)):Rh(n,a+2)}function Kx(n,t,e,r,i,o,s,a){let l=t+e;return ex(n,l,i,o,s)?xh(n,l+3,a?r.call(a,i,o,s):r(i,o,s)):Rh(n,l+3)}function zl(n,t){let e=De(),r,i=n+je;e.firstCreatePass?(r=Jx(t,e.pipeRegistry),e.data[i]=r,r.onDestroy&&(e.destroyHooks??=[]).push(i,r.onDestroy)):r=e.data[i];let o=r.factory||(r.factory=gr(r.type,!0)),s,a=et(A);try{let l=sl(!1),c=o();return sl(l),Hx(e,q(),i,c),c}finally{et(a)}}function Jx(n,t){if(t)for(let e=t.length-1;e>=0;e--){let r=t[e];if(n===r.name)return r}}function d0(n,t,e){let r=n+je,i=q(),o=Gf(i,r);return h0(i,r)?c0(i,Ho(),t,o.transform,e,o):o.transform(e)}function f0(n,t,e,r){let i=n+je,o=q(),s=Gf(o,i);return h0(o,i)?u0(o,Ho(),t,s.transform,e,r,s):s.transform(e,r)}function h0(n,t){return n[$].data[t].pure}function p0(n,t){return jl(n,t)}var Af=class{ngModuleFactory;componentFactories;constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},g0=(()=>{class n{compileModuleSync(e){return new mf(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let r=this.compileModuleSync(e),i=Km(e),o=oy(i.declarations).reduce((s,a)=>{let l=vr(a);return l&&s.push(new Si(l)),s},[]);return new Af(r,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Qx=(()=>{class n{zone=w(se);changeDetectionScheduler=w(Ir);applicationRef=w(Sr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Xx({ngZoneFactory:n,ignoreChangesOutsideZone:t,scheduleInRootZone:e}){return n??=()=>new se(P(D({},eT()),{scheduleInRootZone:e})),[{provide:se,useFactory:n},{provide:Mo,multi:!0,useFactory:()=>{let r=w(Qx,{optional:!0});return()=>r.initialize()}},{provide:Mo,multi:!0,useFactory:()=>{let r=w(tT);return()=>{r.initialize()}}},t===!0?{provide:Vv,useValue:!0}:[],{provide:Uv,useValue:e??Lv}]}function eT(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var tT=(()=>{class n{subscription=new Ie;initialized=!1;zone=w(se);pendingTasks=w(qn);initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{se.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{se.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var nT=(()=>{class n{appRef=w(Sr);taskService=w(qn);ngZone=w(se);zonelessEnabled=w(jv);tracing=w(Fi,{optional:!0});disableScheduling=w(Vv,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ie;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(cl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(w(Uv,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Kd||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&e===5)return;let r=!1;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?lm:Bv;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(e){return!(this.disableScheduling&&!e||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(cl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(e),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,lm(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function rT(){return typeof $localize<"u"&&$localize.locale||wl}var ql=new T("",{providedIn:"root",factory:()=>w(ql,K.Optional|K.SkipSelf)||rT()});var Rf=new T(""),iT=new T("");function Io(n){return!n.moduleRef}function oT(n){let t=Io(n)?n.r3Injector:n.moduleRef.injector,e=t.get(se);return e.run(()=>{Io(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=t.get(en,null),i;if(e.runOutsideAngular(()=>{i=e.onError.subscribe({next:o=>{r.handleError(o)}})}),Io(n)){let o=()=>t.destroy(),s=n.platformInjector.get(Rf);s.add(o),t.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Rf);s.add(o),n.moduleRef.onDestroy(()=>{Wa(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return aT(r,e,()=>{let o=t.get(Yy);return o.runInitializers(),o.donePromise.then(()=>{let s=t.get(ql,wl);if(Vx(s||wl),!t.get(iT,!0))return Io(n)?t.get(Sr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Io(n)){let l=t.get(Sr);return n.rootComponent!==void 0&&l.bootstrap(n.rootComponent),l}else return sT(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function sT(n,t){let e=n.injector.get(Sr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>e.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(e);else throw new S(-403,!1);t.push(n)}function aT(n,t,e){try{let r=e();return Rr(r)?r.catch(i=>{throw t.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>n.handleError(r)),r}}var Za=null;function lT(n=[],t){return pt.create({name:t,providers:[{provide:El,useValue:"platform"},{provide:Rf,useValue:new Set([()=>Za=null])},...n]})}function cT(n=[]){if(Za)return Za;let t=lT(n);return Za=t,ix(),uT(t),t}function uT(n){let t=n.get(oh,null);rt(n,()=>{t?.forEach(e=>e())})}var kr=(()=>{class n{static __NG_ELEMENT_ID__=dT}return n})();function dT(n){return fT(He(),q(),(n&16)===16)}function fT(n,t,e){if(Ai(n)&&!e){let r=Xt(n.index,t);return new Lo(r,r)}else if(n.type&175){let r=t[Ut];return new Lo(r,t)}return null}var Nf=class{constructor(){}supports(t){return $y(t)}create(t){return new Of(t)}},hT=(n,t)=>t,Of=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||hT}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,r=this._removalsHead,i=0,o=null;for(;e||r;){let s=!r||e&&e.currentIndex<Rm(r,i,o)?e:r,a=Rm(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(e=e._next,s.previousIndex==null)i++;else{o||(o=[]);let c=a-i,u=l-i;if(c!=u){for(let h=0;h<c;h++){let f=h<o.length?o[h]:o[h]=0,y=f+h;u<=y&&y<c&&(o[h]=f+1)}let d=s.previousIndex;o[d]=u-c}}a!==l&&t(s,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!$y(t))throw new S(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,r=!1,i,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,o,s,a),r=!0):(r&&(e=this._verifyReinsertion(e,o,s,a)),Object.is(e.item,o)||this._addIdentityChange(e,o)),e=e._next}else i=0,QS(t,a=>{s=this._trackByFn(i,a),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,a,s,i),r=!0):(r&&(e=this._verifyReinsertion(e,a,s,i)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next,i++}),this.length=i;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,r,i){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,o,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,o,i)):t=this._addAfter(new kf(e,r),o,i)),t}_verifyReinsertion(t,e,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,o=t._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,e,r),this._addToMoves(t,r),t}_moveAfter(t,e,r){return this._unlink(t),this._insertAfter(t,e,r),this._addToMoves(t,r),t}_addAfter(t,e,r){return this._insertAfter(t,e,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,r){let i=e===null?this._itHead:e._next;return t._next=i,t._prev=e,i===null?this._itTail=t:i._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new _l),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,r=t._next;return e===null?this._itHead=r:e._next=r,r===null?this._itTail=e:r._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new _l),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},kf=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,e){this.item=t,this.trackById=e}},Pf=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let r;for(r=this._head;r!==null;r=r._nextDup)if((e===null||e<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let e=t._prevDup,r=t._nextDup;return e===null?this._head=r:e._nextDup=r,r===null?this._tail=e:r._prevDup=e,this._head===null}},_l=class{map=new Map;put(t){let e=t.trackById,r=this.map.get(e);r||(r=new Pf,this.map.set(e,r)),r.add(t)}get(t,e){let r=t,i=this.map.get(r);return i?i.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Rm(n,t,e){let r=n.previousIndex;if(r===null)return r;let i=0;return e&&r<e.length&&(i=e[r]),r+t+i}function Nm(){return new Nh([new Nf])}var Nh=(()=>{class n{factories;static \u0275prov=x({token:n,providedIn:"root",factory:Nm});constructor(e){this.factories=e}static create(e,r){if(r!=null){let i=r.factories.slice();e=e.concat(i)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||Nm()),deps:[[n,new Jb,new Kb]]}}find(e){let r=this.factories.find(i=>i.supports(e));if(r!=null)return r;throw new S(901,!1)}}return n})();function m0(n){re(8);try{let{rootComponent:t,appProviders:e,platformProviders:r}=n,i=cT(r),o=[Xx({}),{provide:Ir,useExisting:nT},...e||[]],s=new gl({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return oT({r3Injector:s.injector,platformInjector:i,rootComponent:t})}catch(t){return Promise.reject(t)}finally{re(9)}}function Pr(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Rn(n){return nd(n)}function Jo(n,t){return Qu(n,t?.equal)}var Ff=class{[wt];constructor(t){this[wt]=t}destroy(){this[wt].destroy()}};function st(n,t){!t?.injector&&nv(st);let e=t?.injector??w(pt),r=t?.manualCleanup!==!0?e.get(zn):null,i,o=e.get(lh,null,{optional:!0}),s=e.get(Ir);return o!==null&&!t?.forceRoot?(i=mT(o.view,s,n),r instanceof ll&&r._lView===o.view&&(r=null)):i=vT(n,e.get(qy),s),i.injector=e,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new Ff(i)}var v0=P(D({},ii),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:ko,run(){if(this.dirty=!1,this.hasRun&&!fa(this))return;this.hasRun=!0;let n=r=>(this.cleanupFns??=[]).push(r),t=yo(this),e=rl(!1);try{this.maybeCleanup(),this.fn(n)}finally{rl(e),da(this,t)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}}),pT=P(D({},v0),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){wo(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),gT=P(D({},v0),{consumerMarkedDirty(){this.view[U]|=8192,Ni(this.view),this.notifier.notify(13)},destroy(){wo(this),this.onDestroyFn(),this.maybeCleanup(),this.view[_r]?.delete(this)}});function mT(n,t,e){let r=Object.create(gT);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=t,r.fn=e,n[_r]??=new Set,n[_r].add(r),r.consumerMarkedDirty(r),r}function vT(n,t,e){let r=Object.create(pT);return r.fn=n,r.scheduler=t,r.notifier=e,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.schedule(r),r.notifier.notify(12),r}function y0(n){let t=vr(n);if(!t)return null;let e=new Si(t);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var Te=new T("");var C0=null;function Tt(){return C0}function Oh(n){C0??=n}var Qo=class{},Xo=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=x({token:n,factory:()=>w(b0),providedIn:"platform"})}return n})(),kh=new T(""),b0=(()=>{class n extends Xo{_location;_history;_doc=w(Te);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Tt().getBaseHref(this._doc)}onPopState(e){let r=Tt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){let r=Tt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,r,i){this._history.pushState(e,r,i)}replaceState(e,r,i){this._history.replaceState(e,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=x({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Wl(n,t){return n?t?n.endsWith("/")?t.startsWith("/")?n+t.slice(1):n+t:t.startsWith("/")?n+t:`${n}/${t}`:n:t}function w0(n){let t=n.search(/#|\?|$/);return n[t-1]==="/"?n.slice(0,t-1)+n.slice(t):n}function Gt(n){return n&&n[0]!=="?"?`?${n}`:n}var zt=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=x({token:n,factory:()=>w(Yl),providedIn:"root"})}return n})(),Zl=new T(""),Yl=(()=>{class n extends zt{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,r){super(),this._platformLocation=e,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??w(Te).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Wl(this._baseHref,e)}path(e=!1){let r=this._platformLocation.pathname+Gt(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${r}${i}`:r}pushState(e,r,i,o){let s=this.prepareExternalUrl(i+Gt(o));this._platformLocation.pushState(e,r,s)}replaceState(e,r,i,o){let s=this.prepareExternalUrl(i+Gt(o));this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(r){return new(r||n)(M(Xo),M(Zl,8))};static \u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Kn=(()=>{class n{_subject=new _e;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let r=this._locationStrategy.getBaseHref();this._basePath=_T(w0(_0(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+Gt(r))}normalize(e){return n.stripTrailingSlash(wT(this._basePath,_0(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",i=null){this._locationStrategy.pushState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Gt(r)),i)}replaceState(e,r="",i=null){this._locationStrategy.replaceState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Gt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(i=>i(e,r))}subscribe(e,r,i){return this._subject.subscribe({next:e,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Gt;static joinWithSlash=Wl;static stripTrailingSlash=w0;static \u0275fac=function(r){return new(r||n)(M(zt))};static \u0275prov=x({token:n,factory:()=>yT(),providedIn:"root"})}return n})();function yT(){return new Kn(M(zt))}function wT(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function _0(n){return n.replace(/\/index.html$/,"")}function _T(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var Vh=(()=>{class n extends zt{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(e,r){super(),this._platformLocation=e,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(e){let r=Wl(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,i,o){let s=this.prepareExternalUrl(i+Gt(o))||this._platformLocation.pathname;this._platformLocation.pushState(e,r,s)}replaceState(e,r,i,o){let s=this.prepareExternalUrl(i+Gt(o))||this._platformLocation.pathname;this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(r){return new(r||n)(M(Xo),M(Zl,8))};static \u0275prov=x({token:n,factory:n.\u0275fac})}return n})();var Ge=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Ge||{}),oe=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(oe||{}),at=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(at||{}),On={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function x0(n){return St(n)[Ee.LocaleId]}function T0(n,t,e){let r=St(n),i=[r[Ee.DayPeriodsFormat],r[Ee.DayPeriodsStandalone]],o=Mt(i,t);return Mt(o,e)}function M0(n,t,e){let r=St(n),i=[r[Ee.DaysFormat],r[Ee.DaysStandalone]],o=Mt(i,t);return Mt(o,e)}function A0(n,t,e){let r=St(n),i=[r[Ee.MonthsFormat],r[Ee.MonthsStandalone]],o=Mt(i,t);return Mt(o,e)}function R0(n,t){let r=St(n)[Ee.Eras];return Mt(r,t)}function es(n,t){let e=St(n);return Mt(e[Ee.DateFormat],t)}function ts(n,t){let e=St(n);return Mt(e[Ee.TimeFormat],t)}function ns(n,t){let r=St(n)[Ee.DateTimeFormat];return Mt(r,t)}function rs(n,t){let e=St(n),r=e[Ee.NumberSymbols][t];if(typeof r>"u"){if(t===On.CurrencyDecimal)return e[Ee.NumberSymbols][On.Decimal];if(t===On.CurrencyGroup)return e[Ee.NumberSymbols][On.Group]}return r}function N0(n){if(!n[Ee.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Ee.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function O0(n){let t=St(n);return N0(t),(t[Ee.ExtraData][2]||[]).map(r=>typeof r=="string"?Ph(r):[Ph(r[0]),Ph(r[1])])}function k0(n,t,e){let r=St(n);N0(r);let i=[r[Ee.ExtraData][0],r[Ee.ExtraData][1]],o=Mt(i,t)||[];return Mt(o,e)||[]}function Mt(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new Error("Locale data API: locale data undefined")}function Ph(n){let[t,e]=n.split(":");return{hours:+t,minutes:+e}}var CT=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Kl={},bT=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function P0(n,t,e,r){let i=RT(n);t=Nn(e,t)||t;let s=[],a;for(;t;)if(a=bT.exec(t),a){s=s.concat(a.slice(1));let u=s.pop();if(!u)break;t=u}else{s.push(t);break}let l=i.getTimezoneOffset();r&&(l=L0(r,l),i=AT(i,r));let c="";return s.forEach(u=>{let d=TT(u);c+=d?d(i,e,l):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function tc(n,t,e){let r=new Date(0);return r.setFullYear(n,t,e),r.setHours(0,0,0),r}function Nn(n,t){let e=x0(n);if(Kl[e]??={},Kl[e][t])return Kl[e][t];let r="";switch(t){case"shortDate":r=es(n,at.Short);break;case"mediumDate":r=es(n,at.Medium);break;case"longDate":r=es(n,at.Long);break;case"fullDate":r=es(n,at.Full);break;case"shortTime":r=ts(n,at.Short);break;case"mediumTime":r=ts(n,at.Medium);break;case"longTime":r=ts(n,at.Long);break;case"fullTime":r=ts(n,at.Full);break;case"short":let i=Nn(n,"shortTime"),o=Nn(n,"shortDate");r=Jl(ns(n,at.Short),[i,o]);break;case"medium":let s=Nn(n,"mediumTime"),a=Nn(n,"mediumDate");r=Jl(ns(n,at.Medium),[s,a]);break;case"long":let l=Nn(n,"longTime"),c=Nn(n,"longDate");r=Jl(ns(n,at.Long),[l,c]);break;case"full":let u=Nn(n,"fullTime"),d=Nn(n,"fullDate");r=Jl(ns(n,at.Full),[u,d]);break}return r&&(Kl[e][t]=r),r}function Jl(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,r){return t!=null&&r in t?t[r]:e})),n}function qt(n,t,e="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=e));let s=String(n);for(;s.length<t;)s="0"+s;return r&&(s=s.slice(s.length-t)),o+s}function DT(n,t){return qt(n,3).substring(0,t)}function Me(n,t,e=0,r=!1,i=!1){return function(o,s){let a=ET(n,o);if((e>0||a>-e)&&(a+=e),n===3)a===0&&e===-12&&(a=12);else if(n===6)return DT(a,t);let l=rs(s,On.MinusSign);return qt(a,t,l,r,i)}}function ET(n,t){switch(n){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate();case 3:return t.getHours();case 4:return t.getMinutes();case 5:return t.getSeconds();case 6:return t.getMilliseconds();case 7:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function ce(n,t,e=Ge.Format,r=!1){return function(i,o){return IT(i,o,n,t,e,r)}}function IT(n,t,e,r,i,o){switch(e){case 2:return A0(t,i,r)[n.getMonth()];case 1:return M0(t,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let c=O0(t),u=k0(t,i,r),d=c.findIndex(h=>{if(Array.isArray(h)){let[f,y]=h,C=s>=f.hours&&a>=f.minutes,I=s<y.hours||s===y.hours&&a<y.minutes;if(f.hours<y.hours){if(C&&I)return!0}else if(C||I)return!0}else if(h.hours===s&&h.minutes===a)return!0;return!1});if(d!==-1)return u[d]}return T0(t,i,r)[s<12?0:1];case 3:return R0(t,r)[n.getFullYear()<=0?0:1];default:let l=e;throw new Error(`unexpected translation type ${l}`)}}function Ql(n){return function(t,e,r){let i=-1*r,o=rs(e,On.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+qt(s,2,o)+qt(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+qt(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+qt(s,2,o)+":"+qt(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+qt(s,2,o)+":"+qt(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var ST=0,ec=4;function xT(n){let t=tc(n,ST,1).getDay();return tc(n,0,1+(t<=ec?ec:ec+7)-t)}function F0(n){let t=n.getDay(),e=t===0?-3:ec-t;return tc(n.getFullYear(),n.getMonth(),n.getDate()+e)}function Fh(n,t=!1){return function(e,r){let i;if(t){let o=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,s=e.getDate();i=1+Math.floor((s+o)/7)}else{let o=F0(e),s=xT(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return qt(i,n,rs(r,On.MinusSign))}}function Xl(n,t=!1){return function(e,r){let o=F0(e).getFullYear();return qt(o,n,rs(r,On.MinusSign),t)}}var Lh={};function TT(n){if(Lh[n])return Lh[n];let t;switch(n){case"G":case"GG":case"GGG":t=ce(3,oe.Abbreviated);break;case"GGGG":t=ce(3,oe.Wide);break;case"GGGGG":t=ce(3,oe.Narrow);break;case"y":t=Me(0,1,0,!1,!0);break;case"yy":t=Me(0,2,0,!0,!0);break;case"yyy":t=Me(0,3,0,!1,!0);break;case"yyyy":t=Me(0,4,0,!1,!0);break;case"Y":t=Xl(1);break;case"YY":t=Xl(2,!0);break;case"YYY":t=Xl(3);break;case"YYYY":t=Xl(4);break;case"M":case"L":t=Me(1,1,1);break;case"MM":case"LL":t=Me(1,2,1);break;case"MMM":t=ce(2,oe.Abbreviated);break;case"MMMM":t=ce(2,oe.Wide);break;case"MMMMM":t=ce(2,oe.Narrow);break;case"LLL":t=ce(2,oe.Abbreviated,Ge.Standalone);break;case"LLLL":t=ce(2,oe.Wide,Ge.Standalone);break;case"LLLLL":t=ce(2,oe.Narrow,Ge.Standalone);break;case"w":t=Fh(1);break;case"ww":t=Fh(2);break;case"W":t=Fh(1,!0);break;case"d":t=Me(2,1);break;case"dd":t=Me(2,2);break;case"c":case"cc":t=Me(7,1);break;case"ccc":t=ce(1,oe.Abbreviated,Ge.Standalone);break;case"cccc":t=ce(1,oe.Wide,Ge.Standalone);break;case"ccccc":t=ce(1,oe.Narrow,Ge.Standalone);break;case"cccccc":t=ce(1,oe.Short,Ge.Standalone);break;case"E":case"EE":case"EEE":t=ce(1,oe.Abbreviated);break;case"EEEE":t=ce(1,oe.Wide);break;case"EEEEE":t=ce(1,oe.Narrow);break;case"EEEEEE":t=ce(1,oe.Short);break;case"a":case"aa":case"aaa":t=ce(0,oe.Abbreviated);break;case"aaaa":t=ce(0,oe.Wide);break;case"aaaaa":t=ce(0,oe.Narrow);break;case"b":case"bb":case"bbb":t=ce(0,oe.Abbreviated,Ge.Standalone,!0);break;case"bbbb":t=ce(0,oe.Wide,Ge.Standalone,!0);break;case"bbbbb":t=ce(0,oe.Narrow,Ge.Standalone,!0);break;case"B":case"BB":case"BBB":t=ce(0,oe.Abbreviated,Ge.Format,!0);break;case"BBBB":t=ce(0,oe.Wide,Ge.Format,!0);break;case"BBBBB":t=ce(0,oe.Narrow,Ge.Format,!0);break;case"h":t=Me(3,1,-12);break;case"hh":t=Me(3,2,-12);break;case"H":t=Me(3,1);break;case"HH":t=Me(3,2);break;case"m":t=Me(4,1);break;case"mm":t=Me(4,2);break;case"s":t=Me(5,1);break;case"ss":t=Me(5,2);break;case"S":t=Me(6,1);break;case"SS":t=Me(6,2);break;case"SSS":t=Me(6,3);break;case"Z":case"ZZ":case"ZZZ":t=Ql(0);break;case"ZZZZZ":t=Ql(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=Ql(1);break;case"OOOO":case"ZZZZ":case"zzzz":t=Ql(2);break;default:return null}return Lh[n]=t,t}function L0(n,t){n=n.replace(/:/g,"");let e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function MT(n,t){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+t),n}function AT(n,t,e){let i=n.getTimezoneOffset(),o=L0(t,i);return MT(n,-1*(o-i))}function RT(n){if(D0(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return tc(i,o-1,s)}let e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let r;if(r=n.match(CT))return NT(r)}let t=new Date(n);if(!D0(t))throw new Error(`Unable to convert "${n}" into a date`);return t}function NT(n){let t=new Date(0),e=0,r=0,i=n[8]?t.setUTCFullYear:t.setFullYear,o=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-e,a=Number(n[5]||0)-r,l=Number(n[6]||0),c=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(t,s,a,l,c),t}function D0(n){return n instanceof Date&&!isNaN(n.valueOf())}var jh=/\s+/,E0=[],is=(()=>{class n{_ngEl;_renderer;initialClasses=E0;rawClass;stateMap=new Map;constructor(e,r){this._ngEl=e,this._renderer=r}set klass(e){this.initialClasses=e!=null?e.trim().split(jh):E0}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(jh):e}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let r of e)this._updateState(r,!0);else if(e!=null)for(let r of Object.keys(e))this._updateState(r,!!e[r]);this._applyStateDiff()}_updateState(e,r){let i=this.stateMap.get(e);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let r=e[0],i=e[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(e,r){e=e.trim(),e.length>0&&e.split(jh).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(A(Dt),A(Wn))};static \u0275dir=Oe({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var nc=class{$implicit;ngForOf;index;count;constructor(t,e,r,i){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ji=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(e,r,i){this._viewContainer=e,this._template=r,this._differs=i}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let r=this._viewContainer;e.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new nc(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),I0(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);I0(o,i)})}static ngTemplateContextGuard(e,r){return!0}static \u0275fac=function(r){return new(r||n)(A(Mn),A(Sn),A(Nh))};static \u0275dir=Oe({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function I0(n,t){n.context.$implicit=t.item}var ke=(()=>{class n{_viewContainer;_context=new rc;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(e,r){this._viewContainer=e,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){S0(e,!1),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){S0(e,!1),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(e,r){return!0}static \u0275fac=function(r){return new(r||n)(A(Mn),A(Sn))};static \u0275dir=Oe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),rc=class{$implicit=null;ngIf=null};function S0(n,t){if(n&&!n.createEmbeddedView)throw new S(2020,!1)}var Uh=(()=>{class n{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(e){this._viewContainerRef=e}ngOnChanges(e){if(this._shouldRecreateView(e)){let r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let i=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,i,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(e){return!!e.ngTemplateOutlet||!!e.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(e,r,i)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,r,i):!1,get:(e,r,i)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,i)}})}static \u0275fac=function(r){return new(r||n)(A(Mn))};static \u0275dir=Oe({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[bt]})}return n})();function OT(n,t){return new S(2100,!1)}var kT="mediumDate",j0=new T(""),V0=new T(""),Bh=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(e,r,i){this.locale=e,this.defaultTimezone=r,this.defaultOptions=i}transform(e,r,i,o){if(e==null||e===""||e!==e)return null;try{let s=r??this.defaultOptions?.dateFormat??kT,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return P0(e,s,o||this.locale,a)}catch(s){throw OT(n,s.message)}}static \u0275fac=function(r){return new(r||n)(A(ql,16),A(j0,24),A(V0,24))};static \u0275pipe=Bl({name:"date",type:n,pure:!0})}return n})();var ve=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ht({type:n});static \u0275inj=Bt({})}return n})();function os(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let r=e.indexOf("="),[i,o]=r==-1?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var ic="browser",U0="server";function gt(n){return n===ic}function oc(n){return n===U0}var Fr=class{};var B0=(()=>{class n{static \u0275prov=x({token:n,providedIn:"root",factory:()=>new $h(w(Te),window)})}return n})(),$h=class{document;window;offset=()=>[0,0];constructor(t,e){this.document=t,this.window=e}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t){this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){let e=FT(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){this.window.history.scrollRestoration=t}scrollToElement(t){let e=t.getBoundingClientRect(),r=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function FT(n,t){let e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}i=r.nextNode()}}return null}var lc=new T(""),qh=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,r){this._zone=r,e.forEach(i=>{i.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,i,o){return this._findPluginFor(r).addEventListener(e,r,i,o)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(o=>o.supports(e)),!r)throw new S(5101,!1);return this._eventNameToPlugin.set(e,r),r}static \u0275fac=function(r){return new(r||n)(M(lc),M(se))};static \u0275prov=x({token:n,factory:n.\u0275fac})}return n})(),ss=class{_doc;constructor(t){this._doc=t}manager},sc="ng-app-id";function $0(n){for(let t of n)t.remove()}function H0(n,t){let e=t.createElement("style");return e.textContent=n,e}function LT(n,t,e,r){let i=n.head?.querySelectorAll(`style[${sc}="${t}"],link[${sc}="${t}"]`);if(i)for(let o of i)o.removeAttribute(sc),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&e.set(o.textContent,{usage:0,elements:[o]})}function Gh(n,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e}var Wh=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,r,i,o={}){this.doc=e,this.appId=r,this.nonce=i,this.isServer=oc(o),LT(e,r,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,r){for(let i of e)this.addUsage(i,this.inline,H0);r?.forEach(i=>this.addUsage(i,this.external,Gh))}removeStyles(e,r){for(let i of e)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(e,r,i){let o=r.get(e);o?o.usage++:r.set(e,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(e,this.doc)))})}removeUsage(e,r){let i=r.get(e);i&&(i.usage--,i.usage<=0&&($0(i.elements),r.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])$0(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(e,H0(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(e,Gh(r,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(sc,this.appId),e.appendChild(r)}static \u0275fac=function(r){return new(r||n)(M(Te),M(Al),M(sh,8),M(xe))};static \u0275prov=x({token:n,factory:n.\u0275fac})}return n})(),Hh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Zh=/%COMP%/g;var z0="%COMP%",jT=`_nghost-${z0}`,VT=`_ngcontent-${z0}`,UT=!0,BT=new T("",{providedIn:"root",factory:()=>UT});function $T(n){return VT.replace(Zh,n)}function HT(n){return jT.replace(Zh,n)}function q0(n,t){return t.map(e=>e.replace(Zh,n))}var Yh=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,r,i,o,s,a,l,c=null,u=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=c,this.tracingService=u,this.platformIsServer=oc(a),this.defaultRenderer=new as(e,s,l,this.platformIsServer,this.tracingService)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===tn.ShadowDom&&(r=P(D({},r),{encapsulation:tn.Emulated}));let i=this.getOrCreateRenderer(e,r);return i instanceof ac?i.applyToHost(e):i instanceof ls&&i.applyStyles(),i}getOrCreateRenderer(e,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,h=this.tracingService;switch(r.encapsulation){case tn.Emulated:o=new ac(l,c,r,this.appId,u,s,a,d,h);break;case tn.ShadowDom:return new zh(l,c,e,r,s,a,this.nonce,d,h);default:o=new ls(l,c,r,u,s,a,d,h);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(r){return new(r||n)(M(qh),M(Wh),M(Al),M(BT),M(Te),M(xe),M(se),M(sh),M(Fi,8))};static \u0275prov=x({token:n,factory:n.\u0275fac})}return n})(),as=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,r,i,o){this.eventManager=t,this.doc=e,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(Hh[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(G0(t)?t.content:t).appendChild(e)}insertBefore(t,e,r){t&&(G0(t)?t.content:t).insertBefore(e,r)}removeChild(t,e){e.remove()}selectRootElement(t,e){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new S(-5104,!1);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;let o=Hh[i];o?t.setAttributeNS(o,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){let i=Hh[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(In.DashCase|In.Important)?t.style.setProperty(e,r,i&In.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&In.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t!=null&&(t[e]=r)}setValue(t,e){t.nodeValue=e}listen(t,e,r,i){if(typeof t=="string"&&(t=Tt().getGlobalEventTarget(this.doc,t),!t))throw new S(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(t,e,o)),this.eventManager.addEventListener(t,e,o,i)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function G0(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var zh=class extends as{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,r,i,o,s,a,l,c){super(t,o,s,l,c),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=q0(i.id,u);for(let h of u){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=h,this.shadowRoot.appendChild(f)}let d=i.getExternalStyles?.();if(d)for(let h of d){let f=Gh(h,o);a&&f.setAttribute("nonce",a),this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ls=class extends as{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,r,i,o,s,a,l,c){super(t,o,s,a,l),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=c?q0(c,u):u,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},ac=class extends ls{contentAttr;hostAttr;constructor(t,e,r,i,o,s,a,l,c){let u=i+"-"+r.id;super(t,e,r,o,s,a,l,c,u),this.contentAttr=$T(u),this.hostAttr=HT(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}};var cc=class n extends Qo{supportsDOMEvents=!0;static makeCurrent(){Oh(new n)}onAndCancel(t,e,r,i){return t.addEventListener(e,r,i),()=>{t.removeEventListener(e,r,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=GT();return e==null?null:zT(e)}resetBaseElement(){cs=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return os(document.cookie,t)}},cs=null;function GT(){return cs=cs||document.querySelector("base"),cs?cs.getAttribute("href"):null}function zT(n){return new URL(n,document.baseURI).pathname}var qT=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=x({token:n,factory:n.\u0275fac})}return n})(),Z0=(()=>{class n extends ss{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i,o){return e.addEventListener(r,i,o),()=>this.removeEventListener(e,r,i,o)}removeEventListener(e,r,i,o){return e.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(M(Te))};static \u0275prov=x({token:n,factory:n.\u0275fac})}return n})(),W0=["alt","control","meta","shift"],WT={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ZT={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Y0=(()=>{class n extends ss{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Tt().onAndCancel(e,s.domEventName,a,o))}static parseEventName(e){let r=e.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),W0.forEach(c=>{let u=r.indexOf(c);u>-1&&(r.splice(u,1),s+=c+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(e,r){let i=WT[e.key]||e.key,o="";return r.indexOf("code.")>-1&&(i=e.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),W0.forEach(s=>{if(s!==i){let a=ZT[s];a(e)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(e,r,i){return o=>{n.matchEventFullKeyCode(o,e)&&i.runGuarded(()=>r(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(r){return new(r||n)(M(Te))};static \u0275prov=x({token:n,factory:n.\u0275fac})}return n})();function Kh(n,t){return m0(D({rootComponent:n},YT(t)))}function YT(n){return{appProviders:[...eM,...n?.providers??[]],platformProviders:XT}}function KT(){cc.makeCurrent()}function JT(){return new en}function QT(){return Jv(document),document}var XT=[{provide:xe,useValue:ic},{provide:oh,useValue:KT,multi:!0},{provide:Te,useFactory:QT}];var eM=[{provide:El,useValue:"root"},{provide:en,useFactory:JT},{provide:lc,useClass:Z0,multi:!0,deps:[Te]},{provide:lc,useClass:Y0,multi:!0,deps:[Te]},Yh,Wh,qh,{provide:Ii,useExisting:Yh},{provide:Fr,useClass:qT},[]];var Ui=class{},ds=class{},Lr=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let r=e.indexOf(":");if(r>0){let i=e.slice(0,r),o=e.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,r)=>{this.addHeaderEntry(r,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,r])=>{this.setHeaderEntries(e,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,e);let i=(t.op==="a"?this.headers.get(e):void 0)||[];i.push(...r),this.headers.set(e,i);break;case"d":let o=t.value;if(!o)this.headers.delete(e),this.normalizedNames.delete(e);else{let s=this.headers.get(e);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}break}}addHeaderEntry(t,e){let r=t.toLowerCase();this.maybeSetNormalizedName(t,r),this.headers.has(r)?this.headers.get(r).push(e):this.headers.set(r,[e])}setHeaderEntries(t,e){let r=(Array.isArray(e)?e:[e]).map(o=>o.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var dc=class{encodeKey(t){return K0(t)}encodeValue(t){return K0(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function tM(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],l=e.get(s)||[];l.push(a),e.set(s,l)}),e}var nM=/%(\d[a-f0-9])/gi,rM={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function K0(n){return encodeURIComponent(n).replace(nM,(t,e)=>rM[e]??t)}function uc(n){return`${n}`}var Jn=class n{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new dc,t.fromString){if(t.fromObject)throw new S(2805,!1);this.map=tM(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let r=t.fromObject[e],i=Array.isArray(r)?r.map(uc):[uc(r)];this.map.set(e,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(r=>{let i=t[r];Array.isArray(i)?i.forEach(o=>{e.push({param:r,value:o,op:"a"})}):e.push({param:r,value:i,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(uc(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],i=r.indexOf(uc(t.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var fc=class{map=new Map;set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function iM(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function J0(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Q0(n){return typeof Blob<"u"&&n instanceof Blob}function X0(n){return typeof FormData<"u"&&n instanceof FormData}function oM(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var ew="Content-Type",tw="Accept",nw="X-Request-URL",rw="text/plain",iw="application/json",sM=`${iw}, ${rw}, */*`,us=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(t,e,r,i){this.url=e,this.method=t.toUpperCase();let o;if(iM(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Lr,this.context??=new fc,!this.params)this.params=new Jn,this.urlWithParams=e;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),l=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||J0(this.body)||Q0(this.body)||X0(this.body)||oM(this.body)?this.body:this.body instanceof Jn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||X0(this.body)?null:Q0(this.body)?this.body.type||null:J0(this.body)?null:typeof this.body=="string"?rw:this.body instanceof Jn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?iw:null}clone(t={}){let e=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=t.transferCache??this.transferCache,s=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,l=t.reportProgress??this.reportProgress,c=t.headers||this.headers,u=t.params||this.params,d=t.context??this.context;return t.setHeaders!==void 0&&(c=Object.keys(t.setHeaders).reduce((h,f)=>h.set(f,t.setHeaders[f]),c)),t.setParams&&(u=Object.keys(t.setParams).reduce((h,f)=>h.set(f,t.setParams[f]),u)),new n(e,r,s,{params:u,headers:c,context:d,reportProgress:l,responseType:i,withCredentials:a,transferCache:o})}},Vi=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Vi||{}),Bi=class{headers;status;statusText;url;ok;type;constructor(t,e=200,r="OK"){this.headers=t.headers||new Lr,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},hc=class n extends Bi{constructor(t={}){super(t)}type=Vi.ResponseHeader;clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},pc=class n extends Bi{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=Vi.Response;clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},gc=class extends Bi{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},aM=200,lM=204;function Jh(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var cM=(()=>{class n{handler;constructor(e){this.handler=e}request(e,r,i={}){let o;if(e instanceof us)o=e;else{let l;i.headers instanceof Lr?l=i.headers:l=new Lr(i.headers);let c;i.params&&(i.params instanceof Jn?c=i.params:c=new Jn({fromObject:i.params})),o=new us(e,r,i.body!==void 0?i.body:null,{headers:l,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=F(o).pipe(Yt(l=>this.handler.handle(l)));if(e instanceof us||i.observe==="events")return s;let a=s.pipe(qe(l=>l instanceof pc));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Y(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new S(2806,!1);return l.body}));case"blob":return a.pipe(Y(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new S(2807,!1);return l.body}));case"text":return a.pipe(Y(l=>{if(l.body!==null&&typeof l.body!="string")throw new S(2808,!1);return l.body}));case"json":default:return a.pipe(Y(l=>l.body))}case"response":return a;default:throw new S(2809,!1)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:new Jn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,i={}){return this.request("PATCH",e,Jh(i,r))}post(e,r,i={}){return this.request("POST",e,Jh(i,r))}put(e,r,i={}){return this.request("PUT",e,Jh(i,r))}static \u0275fac=function(r){return new(r||n)(M(Ui))};static \u0275prov=x({token:n,factory:n.\u0275fac})}return n})();var uM=new T("");function dM(n,t){return t(n)}function fM(n,t,e){return(r,i)=>rt(e,()=>t(r,o=>n(o,i)))}var ow=new T(""),hM=new T(""),sw=new T("",{providedIn:"root",factory:()=>!0});var mc=(()=>{class n extends Ui{backend;injector;chain=null;pendingTasks=w(qn);contributeToStability=w(sw);constructor(e,r){super(),this.backend=e,this.injector=r}handle(e){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(ow),...this.injector.get(hM,[])]));this.chain=r.reduceRight((i,o)=>fM(i,o,this.injector),dM)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(e,i=>this.backend.handle(i)).pipe(ur(()=>this.pendingTasks.remove(r)))}else return this.chain(e,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(M(ds),M(Be))};static \u0275prov=x({token:n,factory:n.\u0275fac})}return n})();var pM=/^\)\]\}',?\n/,gM=RegExp(`^${nw}:`,"m");function mM(n){return"responseURL"in n&&n.responseURL?n.responseURL:gM.test(n.getAllResponseHeaders())?n.getResponseHeader(nw):null}var Qh=(()=>{class n{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new S(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?le(r.\u0275loadImpl()):F(null)).pipe(Xe(()=>new ee(o=>{let s=r.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((C,I)=>s.setRequestHeader(C,I.join(","))),e.headers.has(tw)||s.setRequestHeader(tw,sM),!e.headers.has(ew)){let C=e.detectContentTypeHeader();C!==null&&s.setRequestHeader(ew,C)}if(e.responseType){let C=e.responseType.toLowerCase();s.responseType=C!=="json"?C:"text"}let a=e.serializeBody(),l=null,c=()=>{if(l!==null)return l;let C=s.statusText||"OK",I=new Lr(s.getAllResponseHeaders()),N=mM(s)||e.url;return l=new hc({headers:I,status:s.status,statusText:C,url:N}),l},u=()=>{let{headers:C,status:I,statusText:N,url:we}=c(),te=null;I!==lM&&(te=typeof s.response>"u"?s.responseText:s.response),I===0&&(I=te?aM:0);let ze=I>=200&&I<300;if(e.responseType==="json"&&typeof te=="string"){let Pt=te;te=te.replace(pM,"");try{te=te!==""?JSON.parse(te):null}catch(jn){te=Pt,ze&&(ze=!1,te={error:jn,text:te})}}ze?(o.next(new pc({body:te,headers:C,status:I,statusText:N,url:we||void 0})),o.complete()):o.error(new gc({error:te,headers:C,status:I,statusText:N,url:we||void 0}))},d=C=>{let{url:I}=c(),N=new gc({error:C,status:s.status||0,statusText:s.statusText||"Unknown Error",url:I||void 0});o.error(N)},h=!1,f=C=>{h||(o.next(c()),h=!0);let I={type:Vi.DownloadProgress,loaded:C.loaded};C.lengthComputable&&(I.total=C.total),e.responseType==="text"&&s.responseText&&(I.partialText=s.responseText),o.next(I)},y=C=>{let I={type:Vi.UploadProgress,loaded:C.loaded};C.lengthComputable&&(I.total=C.total),o.next(I)};return s.addEventListener("load",u),s.addEventListener("error",d),s.addEventListener("timeout",d),s.addEventListener("abort",d),e.reportProgress&&(s.addEventListener("progress",f),a!==null&&s.upload&&s.upload.addEventListener("progress",y)),s.send(a),o.next({type:Vi.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",u),s.removeEventListener("timeout",d),e.reportProgress&&(s.removeEventListener("progress",f),a!==null&&s.upload&&s.upload.removeEventListener("progress",y)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(M(Fr))};static \u0275prov=x({token:n,factory:n.\u0275fac})}return n})(),aw=new T(""),vM="XSRF-TOKEN",yM=new T("",{providedIn:"root",factory:()=>vM}),wM="X-XSRF-TOKEN",_M=new T("",{providedIn:"root",factory:()=>wM}),fs=class{},CM=(()=>{class n{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,r,i){this.doc=e,this.platform=r,this.cookieName=i}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=os(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(r){return new(r||n)(M(Te),M(xe),M(yM))};static \u0275prov=x({token:n,factory:n.\u0275fac})}return n})();function bM(n,t){let e=n.url.toLowerCase();if(!w(aw)||n.method==="GET"||n.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(n);let r=w(fs).getToken(),i=w(_M);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),t(n)}function Xh(...n){let t=[cM,Qh,mc,{provide:Ui,useExisting:mc},{provide:ds,useFactory:()=>w(uM,{optional:!0})??w(Qh)},{provide:ow,useValue:bM,multi:!0},{provide:aw,useValue:!0},{provide:fs,useClass:CM}];for(let e of n)t.push(...e.\u0275providers);return $o(t)}var lw=(()=>{class n{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(r){return new(r||n)(M(Te))};static \u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var G="primary",Is=Symbol("RouteTitle"),ip=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Ur(n){return new ip(n)}function mw(n,t,e){let r=e.path.split("/");if(r.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function EM(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!an(n[e],t[e]))return!1;return!0}function an(n,t){let e=n?op(n):void 0,r=t?op(t):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let o=0;o<e.length;o++)if(i=e[o],!vw(n[i],t[i]))return!1;return!0}function op(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function vw(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),r=[...t].sort();return e.every((i,o)=>r[o]===i)}else return n===t}function yw(n){return n.length>0?n[n.length-1]:null}function nr(n){return hd(n)?n:Rr(n)?le(Promise.resolve(n)):F(n)}var IM={exact:_w,subset:Cw},ww={exact:SM,subset:xM,ignored:()=>!0};function cw(n,t,e){return IM[e.paths](n.root,t.root,e.matrixParams)&&ww[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function SM(n,t){return an(n,t)}function _w(n,t,e){if(!jr(n.segments,t.segments)||!wc(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!n.children[r]||!_w(n.children[r],t.children[r],e))return!1;return!0}function xM(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>vw(n[e],t[e]))}function Cw(n,t,e){return bw(n,t,t.segments,e)}function bw(n,t,e,r){if(n.segments.length>e.length){let i=n.segments.slice(0,e.length);return!(!jr(i,e)||t.hasChildren()||!wc(i,e,r))}else if(n.segments.length===e.length){if(!jr(n.segments,e)||!wc(n.segments,e,r))return!1;for(let i in t.children)if(!n.children[i]||!Cw(n.children[i],t.children[i],r))return!1;return!0}else{let i=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!jr(n.segments,i)||!wc(n.segments,i,r)||!n.children[G]?!1:bw(n.children[G],t,o,r)}}function wc(n,t,e){return t.every((r,i)=>ww[e](n[i].parameters,r.parameters))}var cn=class{root;queryParams;fragment;_queryParamMap;constructor(t=new ne([],{}),e={},r=null){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ur(this.queryParams),this._queryParamMap}toString(){return AM.serialize(this)}},ne=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _c(this)}},Qn=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=Ur(this.parameters),this._parameterMap}toString(){return Ew(this)}};function TM(n,t){return jr(n,t)&&n.every((e,r)=>an(e.parameters,t[r].parameters))}function jr(n,t){return n.length!==t.length?!1:n.every((e,r)=>e.path===t[r].path)}function MM(n,t){let e=[];return Object.entries(n.children).forEach(([r,i])=>{r===G&&(e=e.concat(t(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==G&&(e=e.concat(t(i,r)))}),e}var Br=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=x({token:n,factory:()=>new Xn,providedIn:"root"})}return n})(),Xn=class{parse(t){let e=new ap(t);return new cn(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${hs(t.root,!0)}`,r=OM(t.queryParams),i=typeof t.fragment=="string"?`#${RM(t.fragment)}`:"";return`${e}${r}${i}`}},AM=new Xn;function _c(n){return n.segments.map(t=>Ew(t)).join("/")}function hs(n,t){if(!n.hasChildren())return _c(n);if(t){let e=n.children[G]?hs(n.children[G],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==G&&r.push(`${i}:${hs(o,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}else{let e=MM(n,(r,i)=>i===G?[hs(n.children[G],!1)]:[`${i}:${hs(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[G]!=null?`${_c(n)}/${e[0]}`:`${_c(n)}/(${e.join("//")})`}}function Dw(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function vc(n){return Dw(n).replace(/%3B/gi,";")}function RM(n){return encodeURI(n)}function sp(n){return Dw(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Cc(n){return decodeURIComponent(n)}function uw(n){return Cc(n.replace(/\+/g,"%20"))}function Ew(n){return`${sp(n.path)}${NM(n.parameters)}`}function NM(n){return Object.entries(n).map(([t,e])=>`;${sp(t)}=${sp(e)}`).join("")}function OM(n){let t=Object.entries(n).map(([e,r])=>Array.isArray(r)?r.map(i=>`${vc(e)}=${vc(i)}`).join("&"):`${vc(e)}=${vc(r)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var kM=/^[^\/()?;#]+/;function ep(n){let t=n.match(kM);return t?t[0]:""}var PM=/^[^\/()?;=#]+/;function FM(n){let t=n.match(PM);return t?t[0]:""}var LM=/^[^=?&#]+/;function jM(n){let t=n.match(LM);return t?t[0]:""}var VM=/^[^&#]+/;function UM(n){let t=n.match(VM);return t?t[0]:""}var ap=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ne([],{}):new ne([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[G]=new ne(t,e)),r}parseSegment(){let t=ep(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new S(4009,!1);return this.capture(t),new Qn(Cc(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=FM(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let i=ep(this.remaining);i&&(r=i,this.capture(r))}t[Cc(e)]=Cc(r)}parseQueryParam(t){let e=jM(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let s=UM(this.remaining);s&&(r=s,this.capture(r))}let i=uw(e),o=uw(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=ep(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new S(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=G);let s=this.parseChildren();e[o]=Object.keys(s).length===1?s[G]:new ne([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new S(4011,!1)}};function Iw(n){return n.segments.length>0?new ne([],{[G]:n}):n}function Sw(n){let t={};for(let[r,i]of Object.entries(n.children)){let o=Sw(i);if(r===G&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let e=new ne(n.segments,t);return BM(e)}function BM(n){if(n.numberOfChildren===1&&n.children[G]){let t=n.children[G];return new ne(n.segments.concat(t.segments),t.children)}return n}function er(n){return n instanceof cn}function xw(n,t,e=null,r=null){let i=Tw(n);return Mw(i,t,e,r)}function Tw(n){let t;function e(o){let s={};for(let l of o.children){let c=e(l);s[l.outlet]=c}let a=new ne(o.url,s);return o===n&&(t=a),a}let r=e(n.root),i=Iw(r);return t??i}function Mw(n,t,e,r){let i=n;for(;i.parent;)i=i.parent;if(t.length===0)return tp(i,i,i,e,r);let o=$M(t);if(o.toRoot())return tp(i,i,new ne([],{}),e,r);let s=HM(o,i,n),a=s.processChildren?gs(s.segmentGroup,s.index,o.commands):Rw(s.segmentGroup,s.index,o.commands);return tp(i,s.segmentGroup,a,e,r)}function Dc(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function vs(n){return typeof n=="object"&&n!=null&&n.outlets}function tp(n,t,e,r,i){let o={};r&&Object.entries(r).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let s;n===t?s=e:s=Aw(n,t,e);let a=Iw(Sw(s));return new cn(a,o,i)}function Aw(n,t,e){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===t?r[i]=e:r[i]=Aw(o,t,e)}),new ne(n.segments,r)}var Ec=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&Dc(r[0]))throw new S(4003,!1);let i=r.find(vs);if(i&&i!==yw(r))throw new S(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function $M(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Ec(!0,0,n);let t=0,e=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?e=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Ec(e,t,r)}var Gi=class{segmentGroup;processChildren;index;constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}};function HM(n,t,e){if(n.isAbsolute)return new Gi(t,!0,0);if(!e)return new Gi(t,!1,NaN);if(e.parent===null)return new Gi(e,!0,0);let r=Dc(n.commands[0])?0:1,i=e.segments.length-1+r;return GM(e,i,n.numberOfDoubleDots)}function GM(n,t,e){let r=n,i=t,o=e;for(;o>i;){if(o-=i,r=r.parent,!r)throw new S(4005,!1);i=r.segments.length}return new Gi(r,!1,i-o)}function zM(n){return vs(n[0])?n[0].outlets:{[G]:n}}function Rw(n,t,e){if(n??=new ne([],{}),n.segments.length===0&&n.hasChildren())return gs(n,t,e);let r=qM(n,t,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new ne(n.segments.slice(0,r.pathIndex),{});return o.children[G]=new ne(n.segments.slice(r.pathIndex),n.children),gs(o,0,i)}else return r.match&&i.length===0?new ne(n.segments,{}):r.match&&!n.hasChildren()?lp(n,t,e):r.match?gs(n,0,i):lp(n,t,e)}function gs(n,t,e){if(e.length===0)return new ne(n.segments,{});{let r=zM(e),i={};if(Object.keys(r).some(o=>o!==G)&&n.children[G]&&n.numberOfChildren===1&&n.children[G].segments.length===0){let o=gs(n.children[G],t,e);return new ne(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Rw(n.children[o],t,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ne(n.segments,i)}}function qM(n,t,e){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=e.length)return o;let s=n.segments[i],a=e[r];if(vs(a))break;let l=`${a}`,c=r<e.length-1?e[r+1]:null;if(i>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!fw(l,c,s))return o;r+=2}else{if(!fw(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function lp(n,t,e){let r=n.segments.slice(0,t),i=0;for(;i<e.length;){let o=e[i];if(vs(o)){let l=WM(o.outlets);return new ne(r,l)}if(i===0&&Dc(e[0])){let l=n.segments[t];r.push(new Qn(l.path,dw(e[0]))),i++;continue}let s=vs(o)?o.outlets[G]:`${o}`,a=i<e.length-1?e[i+1]:null;s&&a&&Dc(a)?(r.push(new Qn(s,dw(a))),i+=2):(r.push(new Qn(s,{})),i++)}return new ne(r,{})}function WM(n){let t={};return Object.entries(n).forEach(([e,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[e]=lp(new ne([],{}),0,r))}),t}function dw(n){let t={};return Object.entries(n).forEach(([e,r])=>t[e]=`${r}`),t}function fw(n,t,e){return n==e.path&&an(t,e.parameters)}var bc="imperative",Pe=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Pe||{}),vt=class{id;url;constructor(t,e){this.id=t,this.url=e}},tr=class extends vt{type=Pe.NavigationStart;navigationTrigger;restoredState;constructor(t,e,r="imperative",i=null){super(t,e),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},At=class extends vt{urlAfterRedirects;type=Pe.NavigationEnd;constructor(t,e,r){super(t,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},lt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(lt||{}),qi=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(qi||{}),ln=class extends vt{reason;code;type=Pe.NavigationCancel;constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},un=class extends vt{reason;code;type=Pe.NavigationSkipped;constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i}},Wi=class extends vt{error;target;type=Pe.NavigationError;constructor(t,e,r,i){super(t,e),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ys=class extends vt{urlAfterRedirects;state;type=Pe.RoutesRecognized;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ic=class extends vt{urlAfterRedirects;state;type=Pe.GuardsCheckStart;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sc=class extends vt{urlAfterRedirects;state;shouldActivate;type=Pe.GuardsCheckEnd;constructor(t,e,r,i,o){super(t,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},xc=class extends vt{urlAfterRedirects;state;type=Pe.ResolveStart;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tc=class extends vt{urlAfterRedirects;state;type=Pe.ResolveEnd;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Mc=class{route;type=Pe.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ac=class{route;type=Pe.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Rc=class{snapshot;type=Pe.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Nc=class{snapshot;type=Pe.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Oc=class{snapshot;type=Pe.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},kc=class{snapshot;type=Pe.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zi=class{routerEvent;position;anchor;type=Pe.Scroll;constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},ws=class{},Yi=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function ZM(n,t){return n.providers&&!n._injector&&(n._injector=qo(n.providers,t,`Route: ${n.path}`)),n._injector??t}function Wt(n){return n.outlet||G}function YM(n,t){let e=n.filter(r=>Wt(r)===t);return e.push(...n.filter(r=>Wt(r)!==t)),e}function Ss(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Pc=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ss(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new $r(this.rootInjector)}},$r=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,r){let i=this.getOrCreateContext(e);i.outlet=r,this.contexts.set(e,i)}onChildOutletDestroyed(e){let r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new Pc(this.rootInjector),this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(r){return new(r||n)(M(Be))};static \u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fc=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=cp(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){let e=cp(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=up(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return up(t,this._root).map(e=>e.value)}};function cp(n,t){if(n===t.value)return t;for(let e of t.children){let r=cp(n,e);if(r)return r}return null}function up(n,t){if(n===t.value)return[t];for(let e of t.children){let r=up(n,e);if(r.length)return r.unshift(t),r}return[]}var mt=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function Hi(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var _s=class extends Fc{snapshot;constructor(t,e){super(t),this.snapshot=e,yp(this,t)}toString(){return this.snapshot.toString()}};function Nw(n){let t=KM(n),e=new Fe([new Qn("",{})]),r=new Fe({}),i=new Fe({}),o=new Fe({}),s=new Fe(""),a=new ct(e,r,o,s,i,G,n,t.root);return a.snapshot=t.root,new _s(new mt(a,[]),t)}function KM(n){let t={},e={},r={},i="",o=new Vr([],t,r,i,e,G,n,null,{});return new Cs("",new mt(o,[]))}var ct=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,r,i,o,s,a,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Y(c=>c[Is]))??F(void 0),this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Y(t=>Ur(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Y(t=>Ur(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Lc(n,t,e="emptyOnly"){let r,{routeConfig:i}=n;return t!==null&&(e==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:D(D({},t.params),n.params),data:D(D({},t.data),n.data),resolve:D(D(D(D({},n.data),t.data),i?.data),n._resolvedData)}:r={params:D({},n.params),data:D({},n.data),resolve:D(D({},n.data),n._resolvedData??{})},i&&kw(i)&&(r.resolve[Is]=i.title),r}var Vr=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Is]}constructor(t,e,r,i,o,s,a,l,c){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ur(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ur(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Cs=class extends Fc{url;constructor(t,e){super(e),this.url=t,yp(this,e)}toString(){return Ow(this._root)}};function yp(n,t){t.value._routerState=n,t.children.forEach(e=>yp(n,e))}function Ow(n){let t=n.children.length>0?` { ${n.children.map(Ow).join(", ")} } `:"";return`${n.value}${t}`}function np(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,an(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),an(t.params,e.params)||n.paramsSubject.next(e.params),EM(t.url,e.url)||n.urlSubject.next(e.url),an(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function dp(n,t){let e=an(n.params,t.params)&&TM(n.url,t.url),r=!n.parent!=!t.parent;return e&&!r&&(!n.parent||dp(n.parent,t.parent))}function kw(n){return typeof n.title=="string"||n.title===null}var Pw=new T(""),xs=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=G;activateEvents=new de;deactivateEvents=new de;attachEvents=new de;detachEvents=new de;routerOutletData=Hv(void 0);parentContexts=w($r);location=w(Mn);changeDetector=w(kr);inputBinder=w(Ts,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:r,previousValue:i}=e.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new S(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new S(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new S(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new S(4013,!1);this._activatedRoute=e;let i=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new fp(e,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Oe({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[bt]})}return n})(),fp=class{route;childContexts;parent;outletData;constructor(t,e,r,i){this.route=t,this.childContexts=e,this.parent=r,this.outletData=i}get(t,e){return t===ct?this.route:t===$r?this.childContexts:t===Pw?this.outletData:this.parent.get(t,e)}},Ts=new T(""),wp=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:r}=e,i=Eo([r.queryParams,r.params,r.data]).pipe(Xe(([o,s,a],l)=>(a=D(D(D({},o),s),a),l===0?F(a):Promise.resolve(a)))).subscribe(o=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(e);return}let s=y0(r.component);if(!s){this.unsubscribeFromRouteData(e);return}for(let{templateName:a}of s.inputs)e.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(e,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=x({token:n,factory:n.\u0275fac})}return n})();function JM(n,t,e){let r=bs(n,t._root,e?e._root:void 0);return new _s(r,t)}function bs(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let r=e.value;r._futureSnapshot=t.value;let i=QM(n,t,e);return new mt(r,i)}else{if(n.shouldAttach(t.value)){let o=n.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>bs(n,a)),s}}let r=XM(t.value),i=t.children.map(o=>bs(n,o));return new mt(r,i)}}function QM(n,t,e){return t.children.map(r=>{for(let i of e.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return bs(n,r,i);return bs(n,r)})}function XM(n){return new ct(new Fe(n.url),new Fe(n.params),new Fe(n.queryParams),new Fe(n.fragment),new Fe(n.data),n.outlet,n.component,n)}var Ki=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},Fw="ngNavigationCancelingError";function jc(n,t){let{redirectTo:e,navigationBehaviorOptions:r}=er(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=Lw(!1,lt.Redirect);return i.url=e,i.navigationBehaviorOptions=r,i}function Lw(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[Fw]=!0,e.cancellationCode=t,e}function eA(n){return jw(n)&&er(n.url)}function jw(n){return!!n&&n[Fw]}var tA=(n,t,e,r)=>Y(i=>(new hp(t,i.targetRouterState,i.currentRouterState,e,r).activate(n),i)),hp=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,r,i,o){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),np(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){let i=Hi(e);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,e,r){let i=t.value,o=e?e.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,r);else o&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=Hi(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=Hi(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,e,r){let i=Hi(e);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new kc(o.value.snapshot))}),t.children.length&&this.forwardEvent(new Nc(t.value.snapshot))}activateRoutes(t,e,r){let i=t.value,o=e?e.value:null;if(np(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),np(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,r)}},Vc=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},zi=class{component;route;constructor(t,e){this.component=t,this.route=e}};function nA(n,t,e){let r=n._root,i=t?t._root:null;return ps(r,i,e,[r.value])}function rA(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function Qi(n,t){let e=Symbol(),r=t.get(n,e);return r===e?typeof n=="function"&&!Vm(n)?n:t.get(n):r}function ps(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Hi(t);return n.children.forEach(s=>{iA(s,o[s.value.outlet],e,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ms(a,e.getContext(s),i)),i}function iA(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=oA(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Vc(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ps(n,t,a?a.children:null,r,i):ps(n,t,e,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new zi(a.outlet.component,s))}else s&&ms(t,a,i),i.canActivateChecks.push(new Vc(r)),o.component?ps(n,null,a?a.children:null,r,i):ps(n,null,e,r,i);return i}function oA(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!jr(n.url,t.url);case"pathParamsOrQueryParamsChange":return!jr(n.url,t.url)||!an(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!dp(n,t)||!an(n.queryParams,t.queryParams);case"paramsChange":default:return!dp(n,t)}}function ms(n,t,e){let r=Hi(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?t?ms(s,t.children.getContext(o),e):ms(s,null,e):ms(s,t,e)}),i.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new zi(t.outlet.component,i)):e.canDeactivateChecks.push(new zi(null,i)):e.canDeactivateChecks.push(new zi(null,i))}function Ms(n){return typeof n=="function"}function sA(n){return typeof n=="boolean"}function aA(n){return n&&Ms(n.canLoad)}function lA(n){return n&&Ms(n.canActivate)}function cA(n){return n&&Ms(n.canActivateChild)}function uA(n){return n&&Ms(n.canDeactivate)}function dA(n){return n&&Ms(n.canMatch)}function Vw(n){return n instanceof wn||n?.name==="EmptyError"}var yc=Symbol("INITIAL_VALUE");function Ji(){return Xe(n=>Eo(n.map(t=>t.pipe(Cn(1),vd(yc)))).pipe(Y(t=>{for(let e of t)if(e!==!0){if(e===yc)return yc;if(e===!1||fA(e))return e}return!0}),qe(t=>t!==yc),Cn(1)))}function fA(n){return er(n)||n instanceof Ki}function hA(n,t){return Ce(e=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return s.length===0&&o.length===0?F(P(D({},e),{guardsResult:!0})):pA(s,r,i,n).pipe(Ce(a=>a&&sA(a)?gA(r,o,n,t):F(a)),Y(a=>P(D({},e),{guardsResult:a})))})}function pA(n,t,e,r){return le(n).pipe(Ce(i=>_A(i.component,i.route,e,t,r)),bn(i=>i!==!0,!0))}function gA(n,t,e,r){return le(t).pipe(Yt(i=>pi(vA(i.route.parent,r),mA(i.route,r),wA(n,i.path,e),yA(n,i.route,e))),bn(i=>i!==!0,!0))}function mA(n,t){return n!==null&&t&&t(new Oc(n)),F(!0)}function vA(n,t){return n!==null&&t&&t(new Rc(n)),F(!0)}function yA(n,t,e){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return F(!0);let i=r.map(o=>ja(()=>{let s=Ss(t)??e,a=Qi(o,s),l=lA(a)?a.canActivate(t,n):rt(s,()=>a(t,n));return nr(l).pipe(bn())}));return F(i).pipe(Ji())}function wA(n,t,e){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>rA(s)).filter(s=>s!==null).map(s=>ja(()=>{let a=s.guards.map(l=>{let c=Ss(s.node)??e,u=Qi(l,c),d=cA(u)?u.canActivateChild(r,n):rt(c,()=>u(r,n));return nr(d).pipe(bn())});return F(a).pipe(Ji())}));return F(o).pipe(Ji())}function _A(n,t,e,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return F(!0);let s=o.map(a=>{let l=Ss(t)??i,c=Qi(a,l),u=uA(c)?c.canDeactivate(n,t,e,r):rt(l,()=>c(n,t,e,r));return nr(u).pipe(bn())});return F(s).pipe(Ji())}function CA(n,t,e,r){let i=t.canLoad;if(i===void 0||i.length===0)return F(!0);let o=i.map(s=>{let a=Qi(s,n),l=aA(a)?a.canLoad(t,e):rt(n,()=>a(t,e));return nr(l)});return F(o).pipe(Ji(),Uw(r))}function Uw(n){return cd(Le(t=>{if(typeof t!="boolean")throw jc(n,t)}),Y(t=>t===!0))}function bA(n,t,e,r){let i=t.canMatch;if(!i||i.length===0)return F(!0);let o=i.map(s=>{let a=Qi(s,n),l=dA(a)?a.canMatch(t,e):rt(n,()=>a(t,e));return nr(l)});return F(o).pipe(Ji(),Uw(r))}var Ds=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},Es=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function $i(n){return fi(new Ds(n))}function DA(n){return fi(new S(4e3,!1))}function EA(n){return fi(Lw(!1,lt.GuardRejected))}var pp=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return F(r);if(i.numberOfChildren>1||!i.children[G])return DA(`${t.redirectTo}`);i=i.children[G]}}applyRedirectCommands(t,e,r,i,o){if(typeof e!="string"){let a=e,{queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,params:f,data:y,title:C}=i,I=rt(o,()=>a({params:f,data:y,queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,title:C}));if(I instanceof cn)throw new Es(I);e=I}let s=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,r);if(e[0]==="/")throw new Es(s);return s}applyRedirectCreateUrlTree(t,e,r,i){let o=this.createSegmentGroup(t,e.root,r,i);return new cn(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=e[a]}else r[i]=o}),r}createSegmentGroup(t,e,r,i){let o=this.createSegments(t,e.segments,r,i),s={};return Object.entries(e.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(t,l,r,i)}),new ne(o,s)}createSegments(t,e,r,i){return e.map(o=>o.path[0]===":"?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,e,r){let i=r[e.path.substring(1)];if(!i)throw new S(4001,!1);return i}findOrReturn(t,e){let r=0;for(let i of e){if(i.path===t.path)return e.splice(r),i;r++}return t}},gp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function IA(n,t,e,r,i){let o=Bw(n,t,e);return o.matched?(r=ZM(t,r),bA(r,t,e,i).pipe(Y(s=>s===!0?o:D({},gp)))):F(o)}function Bw(n,t,e){if(t.path==="**")return SA(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?D({},gp):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let i=(t.matcher||mw)(e,n,t);if(!i)return D({},gp);let o={};Object.entries(i.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=i.consumed.length>0?D(D({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function SA(n){return{matched:!0,parameters:n.length>0?yw(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function hw(n,t,e,r){return e.length>0&&MA(n,e,r)?{segmentGroup:new ne(t,TA(r,new ne(e,n.children))),slicedSegments:[]}:e.length===0&&AA(n,e,r)?{segmentGroup:new ne(n.segments,xA(n,e,r,n.children)),slicedSegments:e}:{segmentGroup:new ne(n.segments,n.children),slicedSegments:e}}function xA(n,t,e,r){let i={};for(let o of e)if(Bc(n,t,o)&&!r[Wt(o)]){let s=new ne([],{});i[Wt(o)]=s}return D(D({},r),i)}function TA(n,t){let e={};e[G]=t;for(let r of n)if(r.path===""&&Wt(r)!==G){let i=new ne([],{});e[Wt(r)]=i}return e}function MA(n,t,e){return e.some(r=>Bc(n,t,r)&&Wt(r)!==G)}function AA(n,t,e){return e.some(r=>Bc(n,t,r))}function Bc(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function RA(n,t,e){return t.length===0&&!n.children[e]}var mp=class{};function NA(n,t,e,r,i,o,s="emptyOnly"){return new vp(n,t,e,r,i,s,o).recognize()}var OA=31,vp=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,r,i,o,s,a){this.injector=t,this.configLoader=e,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new pp(this.urlSerializer,this.urlTree)}noMatchError(t){return new S(4002,`'${t.segmentGroup}'`)}recognize(){let t=hw(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(Y(({children:e,rootSnapshot:r})=>{let i=new mt(r,e),o=new Cs("",i),s=xw(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(t){let e=new Vr([],Object.freeze({}),Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),G,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,G,e).pipe(Y(r=>({children:r,rootSnapshot:e})),_n(r=>{if(r instanceof Es)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ds?this.noMatchError(r):r}))}processSegmentGroup(t,e,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,e,r,o):this.processSegment(t,e,r,r.segments,i,!0,o).pipe(Y(s=>s instanceof mt?[s]:[]))}processChildren(t,e,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return le(o).pipe(Yt(s=>{let a=r.children[s],l=YM(e,s);return this.processSegmentGroup(t,l,a,s,i)}),md((s,a)=>(s.push(...a),s)),Un(null),gd(),Ce(s=>{if(s===null)return $i(r);let a=$w(s);return kA(a),F(a)}))}processSegment(t,e,r,i,o,s,a){return le(e).pipe(Yt(l=>this.processSegmentAgainstRoute(l._injector??t,e,l,r,i,o,s,a).pipe(_n(c=>{if(c instanceof Ds)return F(null);throw c}))),bn(l=>!!l),_n(l=>{if(Vw(l))return RA(r,i,o)?F(new mp):$i(r);throw l}))}processSegmentAgainstRoute(t,e,r,i,o,s,a,l){return Wt(r)!==s&&(s===G||!Bc(i,o,r))?$i(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,i,e,r,o,s,l):$i(i)}expandSegmentAgainstRouteUsingRedirect(t,e,r,i,o,s,a){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=Bw(e,i,o);if(!l)return $i(e);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>OA&&(this.allowRedirects=!1));let f=new Vr(o,c,Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,pw(i),Wt(i),i.component??i._loadedComponent??null,i,gw(i)),y=Lc(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(y.params),f.data=Object.freeze(y.data);let C=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,f,t);return this.applyRedirects.lineralizeSegments(i,C).pipe(Ce(I=>this.processSegment(t,r,e,I.concat(h),s,!1,a)))}matchSegmentAgainstRoute(t,e,r,i,o,s){let a=IA(e,r,i,t,this.urlSerializer);return r.path==="**"&&(e.children={}),a.pipe(Xe(l=>l.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(Xe(({routes:c})=>{let u=r._loadedInjector??t,{parameters:d,consumedSegments:h,remainingSegments:f}=l,y=new Vr(h,d,Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,pw(r),Wt(r),r.component??r._loadedComponent??null,r,gw(r)),C=Lc(y,s,this.paramsInheritanceStrategy);y.params=Object.freeze(C.params),y.data=Object.freeze(C.data);let{segmentGroup:I,slicedSegments:N}=hw(e,h,f,c);if(N.length===0&&I.hasChildren())return this.processChildren(u,c,I,y).pipe(Y(te=>new mt(y,te)));if(c.length===0&&N.length===0)return F(new mt(y,[]));let we=Wt(r)===o;return this.processSegment(u,c,I,N,we?G:o,!0,y).pipe(Y(te=>new mt(y,te instanceof mt?[te]:[])))}))):$i(e)))}getChildConfig(t,e,r){return e.children?F({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?F({routes:e._loadedRoutes,injector:e._loadedInjector}):CA(t,e,r,this.urlSerializer).pipe(Ce(i=>i?this.configLoader.loadChildren(t,e).pipe(Le(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):EA(e))):F({routes:[],injector:t})}};function kA(n){n.sort((t,e)=>t.value.outlet===G?-1:e.value.outlet===G?1:t.value.outlet.localeCompare(e.value.outlet))}function PA(n){let t=n.value.routeConfig;return t&&t.path===""}function $w(n){let t=[],e=new Set;for(let r of n){if(!PA(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),e.add(i)):t.push(r)}for(let r of e){let i=$w(r.children);t.push(new mt(r.value,i))}return t.filter(r=>!e.has(r))}function pw(n){return n.data||{}}function gw(n){return n.resolve||{}}function FA(n,t,e,r,i,o){return Ce(s=>NA(n,t,e,r,s.extractedUrl,i,o).pipe(Y(({state:a,tree:l})=>P(D({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function LA(n,t){return Ce(e=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return F(e);let o=new Set(i.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let c of Hw(l))s.add(c);let a=0;return le(s).pipe(Yt(l=>o.has(l)?jA(l,r,n,t):(l.data=Lc(l,l.parent,n).resolve,F(void 0))),Le(()=>a++),gi(1),Ce(l=>a===s.size?F(e):Je))})}function Hw(n){let t=n.children.map(e=>Hw(e)).flat();return[n,...t]}function jA(n,t,e,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!kw(i)&&(o[Is]=i.title),VA(o,n,t,r).pipe(Y(s=>(n._resolvedData=s,n.data=Lc(n,n.parent,e).resolve,null)))}function VA(n,t,e,r){let i=op(n);if(i.length===0)return F({});let o={};return le(i).pipe(Ce(s=>UA(n[s],t,e,r).pipe(bn(),Le(a=>{if(a instanceof Ki)throw jc(new Xn,a);o[s]=a}))),gi(1),Y(()=>o),_n(s=>Vw(s)?Je:fi(s)))}function UA(n,t,e,r){let i=Ss(t)??r,o=Qi(n,i),s=o.resolve?o.resolve(t,e):rt(i,()=>o(t,e));return nr(s)}function rp(n){return Xe(t=>{let e=n(t);return e?le(e).pipe(Y(()=>t)):F(t)})}var _p=(()=>{class n{buildTitle(e){let r,i=e.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===G);return r}getResolvedTitleForRoute(e){return e.data[Is]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=x({token:n,factory:()=>w(Gw),providedIn:"root"})}return n})(),Gw=(()=>{class n extends _p{title;constructor(e){super(),this.title=e}updateTitle(e){let r=this.buildTitle(e);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(M(lw))};static \u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Hr=new T("",{providedIn:"root",factory:()=>({})}),Cp=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=he({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&O(0,"router-outlet")},dependencies:[xs],encapsulation:2})}return n})();function bp(n){let t=n.children&&n.children.map(bp),e=t?P(D({},n),{children:t}):D({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==G&&(e.component=Cp),e}var Gr=new T(""),$c=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=w(g0);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return F(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let r=nr(e.loadComponent()).pipe(Y(qw),Le(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),ur(()=>{this.componentLoaders.delete(e)})),i=new di(r,()=>new _e).pipe(ui());return this.componentLoaders.set(e,i),i}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return F({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=zw(r,this.compiler,e,this.onLoadEndListener).pipe(ur(()=>{this.childrenLoaders.delete(r)})),s=new di(o,()=>new _e).pipe(ui());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zw(n,t,e,r){return nr(n.loadChildren()).pipe(Y(qw),Ce(i=>i instanceof Sh||Array.isArray(i)?F(i):le(t.compileModuleAsync(i))),Y(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(e).injector,s=o.get(Gr,[],{optional:!0,self:!0}).flat()),{routes:s.map(bp),injector:o}}))}function BA(n){return n&&typeof n=="object"&&"default"in n}function qw(n){return BA(n)?n.default:n}var Hc=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=x({token:n,factory:()=>w($A),providedIn:"root"})}return n})(),$A=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}static \u0275fac=function(r){return new(r||n)};static \u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Dp=new T(""),Ep=new T("");function Ww(n,t,e){let r=n.get(Ep),i=n.get(Te);return n.get(se).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(c=>setTimeout(c));let o,s=new Promise(c=>{o=c}),a=i.startViewTransition(()=>(o(),HA(n))),{onViewTransitionCreated:l}=r;return l&&rt(n,()=>l({transition:a,from:t,to:e})),s})}function HA(n){return new Promise(t=>{ch({read:()=>setTimeout(t)},{injector:n})})}var Ip=new T(""),Gc=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new _e;transitionAbortSubject=new _e;configLoader=w($c);environmentInjector=w(Be);destroyRef=w(zn);urlSerializer=w(Br);rootContexts=w($r);location=w(Kn);inputBindingEnabled=w(Ts,{optional:!0})!==null;titleStrategy=w(_p);options=w(Hr,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=w(Hc);createViewTransition=w(Dp,{optional:!0});navigationErrorHandler=w(Ip,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>F(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=i=>this.events.next(new Mc(i)),r=i=>this.events.next(new Ac(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let r=++this.navigationId;this.transitions?.next(P(D({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(e){return this.transitions=new Fe(null),this.transitions.pipe(qe(r=>r!==null),Xe(r=>{let i=!1,o=!1;return F(r).pipe(Xe(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",lt.SupersededByNewNavigation),Je;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?P(D({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!a&&l!=="reload"){let c="";return this.events.next(new un(s.id,this.urlSerializer.serialize(s.rawUrl),c,qi.IgnoredSameUrlNavigation)),s.resolve(!1),Je}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return F(s).pipe(Xe(c=>(this.events.next(new tr(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?Je:Promise.resolve(c))),FA(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Le(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation=P(D({},this.currentNavigation),{finalUrl:c.urlAfterRedirects});let u=new ys(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:c,extractedUrl:u,source:d,restoredState:h,extras:f}=s,y=new tr(c,this.urlSerializer.serialize(u),d,h);this.events.next(y);let C=Nw(this.rootComponentType).snapshot;return this.currentTransition=r=P(D({},s),{targetSnapshot:C,urlAfterRedirects:u,extras:P(D({},f),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=u,F(r)}else{let c="";return this.events.next(new un(s.id,this.urlSerializer.serialize(s.extractedUrl),c,qi.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Je}}),Le(s=>{let a=new Ic(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Y(s=>(this.currentTransition=r=P(D({},s),{guards:nA(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),hA(this.environmentInjector,s=>this.events.next(s)),Le(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw jc(this.urlSerializer,s.guardsResult);let a=new Sc(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),qe(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",lt.GuardRejected),!1)),rp(s=>{if(s.guards.canActivateChecks.length!==0)return F(s).pipe(Le(a=>{let l=new xc(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),Xe(a=>{let l=!1;return F(a).pipe(LA(this.paramsInheritanceStrategy,this.environmentInjector),Le({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(a,"",lt.NoDataFromResolver)}}))}),Le(a=>{let l=new Tc(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),rp(s=>{let a=l=>{let c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(Le(u=>{l.component=u}),Y(()=>{})));for(let u of l.children)c.push(...a(u));return c};return Eo(a(s.targetSnapshot.root)).pipe(Un(null),Cn(1))}),rp(()=>this.afterPreactivation()),Xe(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,l=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return l?le(l).pipe(Y(()=>r)):F(r)}),Y(s=>{let a=JM(e.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=P(D({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),Le(()=>{this.events.next(new ws)}),tA(this.rootContexts,e.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Cn(1),Le({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new At(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),yd(this.transitionAbortSubject.pipe(Le(s=>{throw s}))),ur(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",lt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),_n(s=>{if(this.destroyed)return r.resolve(!1),Je;if(o=!0,jw(s))this.events.next(new ln(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),eA(s)?this.events.next(new Yi(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Wi(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let l=rt(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(l instanceof Ki){let{message:c,cancellationCode:u}=jc(this.urlSerializer,l);this.events.next(new ln(r.id,this.urlSerializer.serialize(r.extractedUrl),c,u)),this.events.next(new Yi(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(l){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(l)}}return Je}))}))}cancelNavigationTransition(e,r,i){let o=new ln(e.id,this.urlSerializer.serialize(e.extractedUrl),r,i);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function GA(n){return n!==bc}var Zw=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=x({token:n,factory:()=>w(zA),providedIn:"root"})}return n})(),Uc=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},zA=(()=>{class n extends Uc{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Go(n)))(i||n)}})();static \u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Yw=(()=>{class n{urlSerializer=w(Br);options=w(Hr,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=w(Kn);urlHandlingStrategy=w(Hc);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new cn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:r,targetBrowserUrl:i}){let o=e!==void 0?this.urlHandlingStrategy.merge(e,r):r,s=i??o;return s instanceof cn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:e,finalUrl:r,initialUrl:i}){r&&e?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=e):this.rawUrlTree=i}routerState=Nw(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=x({token:n,factory:()=>w(qA),providedIn:"root"})}return n})(),qA=(()=>{class n extends Yw{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{e(r.url,r.state,"popstate")})})}handleRouterEvent(e,r){e instanceof tr?this.updateStateMemento():e instanceof un?this.commitTransition(r):e instanceof ys?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof ws?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof ln&&(e.code===lt.GuardRejected||e.code===lt.NoDataFromResolver)?this.restoreHistory(r):e instanceof Wi?this.restoreHistory(r,!0):e instanceof At&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(e)||o){let a=this.browserPageId,l=D(D({},s),this.generateNgRouterState(i,a));this.location.replaceState(e,"",l)}else{let a=D(D({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(e,"",a)}}restoreHistory(e,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===e.finalUrl&&o===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Go(n)))(i||n)}})();static \u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zc(n,t){n.events.pipe(qe(e=>e instanceof At||e instanceof ln||e instanceof Wi||e instanceof un),Y(e=>e instanceof At||e instanceof un?0:(e instanceof ln?e.code===lt.Redirect||e.code===lt.SupersededByNewNavigation:!1)?2:1),qe(e=>e!==2),Cn(1)).subscribe(()=>{t()})}var WA={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ZA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ye=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=w(Gy);stateManager=w(Yw);options=w(Hr,{optional:!0})||{};pendingTasks=w(qn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=w(Gc);urlSerializer=w(Br);location=w(Kn);urlHandlingStrategy=w(Hc);_events=new _e;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=w(Zw);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=w(Gr,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!w(Ts,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ie;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof ln&&r.code!==lt.Redirect&&r.code!==lt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof At)this.navigated=!0;else if(r instanceof Yi){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=D({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||GA(i.source)},s);this.scheduleNavigation(a,bc,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}KA(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),bc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,r,i)=>{this.navigateToSyncWithBrowser(e,i,r)})}navigateToSyncWithBrowser(e,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let l=D({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(e);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(bp),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=D(D({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=i?i.snapshot:this.routerState.snapshot.root;d=Tw(h)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),d=this.currentUrlTree.root}return Mw(d,e,u,c??null)}navigateByUrl(e,r={skipLocationChange:!1}){let i=er(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,bc,null,r)}navigate(e,r={skipLocationChange:!1}){return YA(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,r){let i;if(r===!0?i=D({},WA):r===!1?i=D({},ZA):i=r,er(e))return cw(this.currentUrlTree,e,i);let o=this.parseUrl(e);return cw(this.currentUrlTree,o,i)}removeEmptyProps(e){return Object.entries(e).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(e,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((d,h)=>{a=d,l=h});let u=this.pendingTasks.add();return zc(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function YA(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new S(4008,!1)}function KA(n){return!(n instanceof ws)&&!(n instanceof Yi)}var rr=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new _e;constructor(e,r,i,o,s,a){this.router=e,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a;let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=e.events.subscribe(c=>{c instanceof At&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(er(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let r=this.href===null?null:ry(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(e,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,e,r):i.removeAttribute(o,e)}get urlTree(){return this.routerLinkInput===null?null:er(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(A(ye),A(ct),nh("tabindex"),A(Wn),A(Dt),A(zt))};static \u0275dir=Oe({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&V("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Hl("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Pr],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Pr],replaceUrl:[2,"replaceUrl","replaceUrl",Pr],routerLink:"routerLink"},features:[bt]})}return n})();var As=class{};var Kw=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(e,r,i,o){this.router=e,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(qe(e=>e instanceof At),Yt(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=qo(o.providers,e,`Route: ${o.path}`));let s=o._injector??e,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return le(i).pipe(hi())}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(e,r):i=F(null);let o=i.pipe(Ce(s=>s===null?F(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??e,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return le([o,s]).pipe(hi())}else return o})}static \u0275fac=function(r){return new(r||n)(M(ye),M(Be),M(As),M($c))};static \u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Jw=new T(""),JA=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(e,r,i,o,s={}){this.urlSerializer=e,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof tr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof At?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof un&&e.code===qi.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Zi&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Zi(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){Ry()};static \u0275prov=x({token:n,factory:n.\u0275fac})}return n})();function xp(n,...t){return $o([{provide:Gr,multi:!0,useValue:n},[],{provide:ct,useFactory:Qw,deps:[ye]},{provide:$l,multi:!0,useFactory:Xw},t.map(e=>e.\u0275providers)])}function Qw(n){return n.routerState.root}function Rs(n,t){return{\u0275kind:n,\u0275providers:t}}function Xw(){let n=w(pt);return t=>{let e=n.get(Sr);if(t!==e.components[0])return;let r=n.get(ye),i=n.get(e_);n.get(Tp)===1&&r.initialNavigation(),n.get(r_,null,K.Optional)?.setUpPreloading(),n.get(Jw,null,K.Optional)?.init(),r.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var e_=new T("",{factory:()=>new _e}),Tp=new T("",{providedIn:"root",factory:()=>1});function t_(){let n=[{provide:Tp,useValue:0},Th(()=>{let t=w(pt);return t.get(kh,Promise.resolve()).then(()=>new Promise(r=>{let i=t.get(ye),o=t.get(e_);zc(i,()=>{r(!0)}),t.get(Gc).afterPreactivation=()=>(r(!0),o.closed?F(void 0):o),i.initialNavigation()}))})];return Rs(2,n)}function n_(){let n=[Th(()=>{w(ye).setUpLocationChangeListener()}),{provide:Tp,useValue:2}];return Rs(3,n)}var r_=new T("");function i_(n){return Rs(0,[{provide:r_,useExisting:Kw},{provide:As,useExisting:n}])}function o_(){return Rs(8,[wp,{provide:Ts,useExisting:wp}])}function s_(n){Ar("NgRouterViewTransitions");let t=[{provide:Dp,useValue:Ww},{provide:Ep,useValue:D({skipNextTransition:!!n?.skipInitialTransition},n)}];return Rs(9,t)}var a_=[Kn,{provide:Br,useClass:Xn},ye,$r,{provide:ct,useFactory:Qw,deps:[ye]},$c,[]],zr=(()=>{class n{constructor(){}static forRoot(e,r){return{ngModule:n,providers:[a_,[],{provide:Gr,multi:!0,useValue:e},[],r?.errorHandler?{provide:Ip,useValue:r.errorHandler}:[],{provide:Hr,useValue:r||{}},r?.useHash?XA():eR(),QA(),r?.preloadingStrategy?i_(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?tR(r):[],r?.bindToComponentInputs?o_().\u0275providers:[],r?.enableViewTransitions?s_().\u0275providers:[],nR()]}}static forChild(e){return{ngModule:n,providers:[{provide:Gr,multi:!0,useValue:e}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ht({type:n});static \u0275inj=Bt({})}return n})();function QA(){return{provide:Jw,useFactory:()=>{let n=w(B0),t=w(se),e=w(Hr),r=w(Gc),i=w(Br);return e.scrollOffset&&n.setOffset(e.scrollOffset),new JA(i,r,n,t,e)}}}function XA(){return{provide:zt,useClass:Vh}}function eR(){return{provide:zt,useClass:Yl}}function tR(n){return[n.initialNavigation==="disabled"?n_().\u0275providers:[],n.initialNavigation==="enabledBlocking"?t_().\u0275providers:[]]}var Sp=new T("");function nR(){return[{provide:Sp,useFactory:Xw},{provide:$l,multi:!0,useExisting:Sp}]}var m_=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,r){this._renderer=e,this._elementRef=r}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(r){return new(r||n)(A(Wn),A(Dt))};static \u0275dir=Oe({type:n})}return n})(),rR=(()=>{class n extends m_{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Go(n)))(i||n)}})();static \u0275dir=Oe({type:n,features:[An]})}return n})(),Pp=new T("");var iR={provide:Pp,useExisting:Tr(()=>ut),multi:!0};function oR(){let n=Tt()?Tt().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var sR=new T(""),ut=(()=>{class n extends m_{_compositionMode;_composing=!1;constructor(e,r,i){super(e,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!oR())}writeValue(e){let r=e??"";this.setProperty("value",r)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(r){return new(r||n)(A(Wn),A(Dt),A(sR,8))};static \u0275dir=Oe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&V("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Yo([iR]),An]})}return n})();function Fp(n){return n==null||Lp(n)===0}function Lp(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var jp=new T(""),Vp=new T(""),aR=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ke=class{static min(t){return lR(t)}static max(t){return cR(t)}static required(t){return uR(t)}static requiredTrue(t){return dR(t)}static email(t){return fR(t)}static minLength(t){return hR(t)}static maxLength(t){return pR(t)}static pattern(t){return gR(t)}static nullValidator(t){return v_()}static compose(t){return D_(t)}static composeAsync(t){return I_(t)}};function lR(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function cR(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function uR(n){return Fp(n.value)?{required:!0}:null}function dR(n){return n.value===!0?null:{required:!0}}function fR(n){return Fp(n.value)||aR.test(n.value)?null:{email:!0}}function hR(n){return t=>{let e=t.value?.length??Lp(t.value);return e===null||e===0?null:e<n?{minlength:{requiredLength:n,actualLength:e}}:null}}function pR(n){return t=>{let e=t.value?.length??Lp(t.value);return e!==null&&e>n?{maxlength:{requiredLength:n,actualLength:e}}:null}}function gR(n){if(!n)return v_;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),r=>{if(Fp(r.value))return null;let i=r.value;return t.test(i)?null:{pattern:{requiredPattern:e,actualValue:i}}}}function v_(n){return null}function y_(n){return n!=null}function w_(n){return Rr(n)?le(n):n}function __(n){let t={};return n.forEach(e=>{t=e!=null?D(D({},t),e):t}),Object.keys(t).length===0?null:t}function C_(n,t){return t.map(e=>e(n))}function mR(n){return!n.validate}function b_(n){return n.map(t=>mR(t)?t:e=>t.validate(e))}function D_(n){if(!n)return null;let t=n.filter(y_);return t.length==0?null:function(e){return __(C_(e,t))}}function E_(n){return n!=null?D_(b_(n)):null}function I_(n){if(!n)return null;let t=n.filter(y_);return t.length==0?null:function(e){let r=C_(e,t).map(w_);return pd(r).pipe(Y(__))}}function S_(n){return n!=null?I_(b_(n)):null}function l_(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function x_(n){return n._rawValidators}function T_(n){return n._rawAsyncValidators}function Mp(n){return n?Array.isArray(n)?n:[n]:[]}function Wc(n,t){return Array.isArray(n)?n.includes(t):n===t}function c_(n,t){let e=Mp(t);return Mp(n).forEach(i=>{Wc(e,i)||e.push(i)}),e}function u_(n,t){return Mp(t).filter(e=>!Wc(n,e))}var Zc=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=E_(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=S_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},qr=class extends Zc{name;get formDirective(){return null}get path(){return null}},Wr=class extends Zc{_parent=null;name=null;valueAccessor=null},Yc=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},vR={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},l$=P(D({},vR),{"[class.ng-submitted]":"isSubmitted"}),Rt=(()=>{class n extends Yc{constructor(e){super(e)}static \u0275fac=function(r){return new(r||n)(A(Wr,2))};static \u0275dir=Oe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Et("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[An]})}return n})(),eu=(()=>{class n extends Yc{constructor(e){super(e)}static \u0275fac=function(r){return new(r||n)(A(qr,10))};static \u0275dir=Oe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Et("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[An]})}return n})();var Os="VALID",qc="INVALID",Xi="PENDING",ks="DISABLED",ir=class{},Kc=class extends ir{value;source;constructor(t,e){super(),this.value=t,this.source=e}},Ps=class extends ir{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},Fs=class extends ir{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},eo=class extends ir{status;source;constructor(t,e){super(),this.status=t,this.source=e}},Ap=class extends ir{source;constructor(t){super(),this.source=t}},Rp=class extends ir{source;constructor(t){super(),this.source=t}};function Up(n){return(tu(n)?n.validators:n)||null}function yR(n){return Array.isArray(n)?E_(n):n||null}function Bp(n,t){return(tu(t)?t.asyncValidators:n)||null}function wR(n){return Array.isArray(n)?S_(n):n||null}function tu(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function M_(n,t,e){let r=n.controls;if(!(t?Object.keys(r):r).length)throw new S(1e3,"");if(!r[e])throw new S(1001,"")}function A_(n,t,e){n._forEachChild((r,i)=>{if(e[i]===void 0)throw new S(1002,"")})}var to=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Rn(this.statusReactive)}set status(t){Rn(()=>this.statusReactive.set(t))}_status=Jo(()=>this.statusReactive());statusReactive=W(void 0);get valid(){return this.status===Os}get invalid(){return this.status===qc}get pending(){return this.status==Xi}get disabled(){return this.status===ks}get enabled(){return this.status!==ks}errors;get pristine(){return Rn(this.pristineReactive)}set pristine(t){Rn(()=>this.pristineReactive.set(t))}_pristine=Jo(()=>this.pristineReactive());pristineReactive=W(!0);get dirty(){return!this.pristine}get touched(){return Rn(this.touchedReactive)}set touched(t){Rn(()=>this.touchedReactive.set(t))}_touched=Jo(()=>this.touchedReactive());touchedReactive=W(!1);get untouched(){return!this.touched}_events=new _e;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(c_(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(c_(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(u_(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(u_(t,this._rawAsyncValidators))}hasValidator(t){return Wc(this._rawValidators,t)}hasAsyncValidator(t){return Wc(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(P(D({},t),{sourceControl:r})),e&&t.emitEvent!==!1&&this._events.next(new Fs(!0,r))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),e&&t.emitEvent!==!1&&this._events.next(new Fs(!1,r))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(P(D({},t),{sourceControl:r})),e&&t.emitEvent!==!1&&this._events.next(new Ps(!1,r))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),e&&t.emitEvent!==!1&&this._events.next(new Ps(!0,r))}markAsPending(t={}){this.status=Xi;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new eo(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(P(D({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=ks,this.errors=null,this._forEachChild(i=>{i.disable(P(D({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Kc(this.value,r)),this._events.next(new eo(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(P(D({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Os,this._forEachChild(r=>{r.enable(P(D({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(P(D({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Os||this.status===Xi)&&this._runAsyncValidator(r,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Kc(this.value,e)),this._events.next(new eo(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(P(D({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ks:Os}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=Xi,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let r=w_(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((r,i)=>r&&r._find(i),this)}getError(t,e){let r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new eo(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,r)}_initObservables(){this.valueChanges=new de,this.statusChanges=new de}_calculateStatus(){return this._allControlsDisabled()?ks:this.errors?qc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Xi)?Xi:this._anyControlsHaveStatus(qc)?qc:Os}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),i&&this._events.next(new Ps(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new Fs(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){tu(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=yR(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=wR(this._rawAsyncValidators)}},Jc=class extends to{constructor(t,e,r){super(Up(e),Bp(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){A_(this,!0,t),Object.keys(t).forEach(r=>{M_(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>r._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,r]of Object.entries(this.controls))if(this.contains(e)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,r,i)=>((r.enabled||this.disabled)&&(e[i]=r.value),e))}_reduceChildren(t,e){let r=t;return this._forEachChild((i,o)=>{r=e(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Np=class extends Jc{};var nu=new T("",{providedIn:"root",factory:()=>ru}),ru="always";function R_(n,t){return[...t.path,n]}function Op(n,t,e=ru){$p(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),CR(n,t),DR(n,t),bR(n,t),_R(n,t)}function d_(n,t,e=!0){let r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),Xc(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Qc(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function _R(n,t){if(t.valueAccessor.setDisabledState){let e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function $p(n,t){let e=x_(n);t.validator!==null?n.setValidators(l_(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let r=T_(n);t.asyncValidator!==null?n.setAsyncValidators(l_(r,t.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Qc(t._rawValidators,i),Qc(t._rawAsyncValidators,i)}function Xc(n,t){let e=!1;if(n!==null){if(t.validator!==null){let i=x_(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==t.validator);o.length!==i.length&&(e=!0,n.setValidators(o))}}if(t.asyncValidator!==null){let i=T_(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==t.asyncValidator);o.length!==i.length&&(e=!0,n.setAsyncValidators(o))}}}let r=()=>{};return Qc(t._rawValidators,r),Qc(t._rawAsyncValidators,r),e}function CR(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&N_(n,t)})}function bR(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&N_(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function N_(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function DR(n,t){let e=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function ER(n,t){n==null,$p(n,t)}function IR(n,t){return Xc(n,t)}function O_(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function SR(n){return Object.getPrototypeOf(n.constructor)===rR}function xR(n,t){n._syncPendingControls(),t.forEach(e=>{let r=e.control;r.updateOn==="submit"&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function k_(n,t){if(!t)return null;Array.isArray(t);let e,r,i;return t.forEach(o=>{o.constructor===ut?e=o:SR(o)?r=o:i=o}),i||r||e||null}function TR(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function f_(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function h_(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Ls=class extends to{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,r){super(Up(e),Bp(r,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),tu(e)&&(e.nonNullable||e.initialValueIsDefault)&&(h_(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){f_(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){f_(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){h_(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var MR=n=>n instanceof Ls;var AR={provide:Wr,useExisting:Tr(()=>kn)},p_=Promise.resolve(),kn=(()=>{class n extends Wr{_changeDetectorRef;callSetDisabledState;control=new Ls;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new de;constructor(e,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=k_(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let r=e.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),O_(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Op(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){p_.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let r=e.isDisabled.currentValue,i=r!==0&&Pr(r);p_.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?R_(e,this._parent):[e]}static \u0275fac=function(r){return new(r||n)(A(qr,9),A(jp,10),A(Vp,10),A(Pp,10),A(kr,8),A(nu,8))};static \u0275dir=Oe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Yo([AR]),An,bt]})}return n})();var iu=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Oe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var P_=new T("");var RR={provide:qr,useExisting:Tr(()=>js)},js=(()=>{class n extends qr{callSetDisabledState;get submitted(){return Rn(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=Jo(()=>this._submittedReactive());_submittedReactive=W(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new de;constructor(e,r,i){super(),this.callSetDisabledState=i,this._setValidators(e),this._setAsyncValidators(r)}ngOnChanges(e){e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Xc(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let r=this.form.get(e.path);return Op(r,e,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),r}getControl(e){return this.form.get(e.path)}removeControl(e){d_(e.control||null,e,!1),TR(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,r){this.form.get(e.path).setValue(r)}onSubmit(e){return this._submittedReactive.set(!0),xR(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new Ap(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new Rp(this.form))}_updateDomValue(){this.directives.forEach(e=>{let r=e.control,i=this.form.get(e.path);r!==i&&(d_(r||null,e),MR(i)&&(Op(i,e,this.callSetDisabledState),e.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let r=this.form.get(e.path);ER(r,e),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let r=this.form.get(e.path);r&&IR(r,e)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){$p(this.form,this),this._oldForm&&Xc(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(A(jp,10),A(Vp,10),A(nu,8))};static \u0275dir=Oe({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&V("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Yo([RR]),An,bt]})}return n})();var NR={provide:Wr,useExisting:Tr(()=>Vs)},Vs=(()=>{class n extends Wr{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(e){}model;update=new de;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=k_(this,o)}ngOnChanges(e){this._added||this._setUpControl(),O_(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return R_(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(A(qr,13),A(jp,10),A(Vp,10),A(Pp,10),A(P_,8))};static \u0275dir=Oe({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Yo([NR]),An,bt]})}return n})();var F_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ht({type:n});static \u0275inj=Bt({})}return n})(),kp=class extends to{constructor(t,e,r){super(Up(e),Bp(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,r={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,e={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,r={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),e&&(this.controls.splice(i,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){A_(this,!1,t),t.forEach((r,i)=>{M_(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,r)=>r._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,r)=>{t(e,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function g_(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var ou=(()=>{class n{useNonNullable=!1;get nonNullable(){let e=new n;return e.useNonNullable=!0,e}group(e,r=null){let i=this._reduceControls(e),o={};return g_(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Jc(i,o)}record(e,r=null){let i=this._reduceControls(e);return new Np(i,r)}control(e,r,i){let o={};return this.useNonNullable?(g_(r)?o=r:(o.validators=r,o.asyncValidators=i),new Ls(e,P(D({},o),{nonNullable:!0}))):new Ls(e,r,i)}array(e,r,i){let o=e.map(s=>this._createControl(s));return new kp(o,r,i)}_reduceControls(e){let r={};return Object.keys(e).forEach(i=>{r[i]=this._createControl(e[i])}),r}_createControl(e){if(e instanceof Ls)return e;if(e instanceof to)return e;if(Array.isArray(e)){let r=e[0],i=e.length>1?e[1]:null,o=e.length>2?e[2]:null;return this.control(r,i,o)}else return this.control(e)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var dn=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:nu,useValue:e.callSetDisabledState??ru}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ht({type:n});static \u0275inj=Bt({imports:[F_]})}return n})(),no=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:P_,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:nu,useValue:e.callSetDisabledState??ru}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ht({type:n});static \u0275inj=Bt({imports:[F_]})}return n})();var L_=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-BX7VDEVO.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)};var Us=class extends Error{constructor(t,e="FunctionsError",r){super(t),this.name=e,this.context=r}},su=class extends Us{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},au=class extends Us{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},lu=class extends Us{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}},Hp=function(n){return n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2",n}(Hp||{});var OR=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(n,t||[])).next())})},Bs=class{constructor(t,{headers:e={},customFetch:r,region:i=Hp.Any}={}){this.url=t,this.headers=e,this.region=i,this.fetch=L_(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,e={}){var r;return OR(this,void 0,void 0,function*(){try{let{headers:i,method:o,body:s}=e,a={},{region:l}=e;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;s&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&s instanceof Blob||s instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=s):typeof s=="string"?(a["Content-Type"]="text/plain",c=s):typeof FormData<"u"&&s instanceof FormData?c=s:(a["Content-Type"]="application/json",c=JSON.stringify(s)));let u=yield this.fetch(`${this.url}/${t}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:c}).catch(y=>{throw new su(y)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new au(u);if(!u.ok)throw new lu(u);let h=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),f;return h==="application/json"?f=yield u.json():h==="application/octet-stream"?f=yield u.blob():h==="text/event-stream"?f=u:h==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(i){return{data:null,error:i}}})}};var K_=QC(Y_(),1),{PostgrestClient:J_,PostgrestQueryBuilder:T$,PostgrestFilterBuilder:M$,PostgrestTransformBuilder:A$,PostgrestBuilder:R$,PostgrestError:zR}=K_.default;var Q_="2.11.2";var X_={"X-Client-Info":`realtime-js/${Q_}`},eC="1.0.0",fu=1e4,tC=1e3,oo=function(n){return n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",n}(oo||{}),yt=function(n){return n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",n}(yt||{}),Nt=function(n){return n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token",n}(Nt||{}),tg=function(n){return n.websocket="websocket",n}(tg||{}),Zr=function(n){return n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed",n}(Zr||{});var hu=class{constructor(){this.HEADER_LENGTH=1}decode(t,e){return t.constructor===ArrayBuffer?e(this._binaryDecode(t)):e(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){let e=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,e,r)}_decodeBroadcast(t,e,r){let i=e.getUint8(1),o=e.getUint8(2),s=this.HEADER_LENGTH+2,a=r.decode(t.slice(s,s+i));s=s+i;let l=r.decode(t.slice(s,s+o));s=s+o;let c=JSON.parse(r.decode(t.slice(s,t.byteLength)));return{ref:null,topic:a,event:l,payload:c}}};var so=class{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var ue=function(n){return n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange",n}(ue||{}),rg=(n,t,e={})=>{var r;let i=(r=e.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((o,s)=>(o[s]=qR(s,n,t,i),o),{})},qR=(n,t,e,r)=>{let i=t.find(a=>a.name===n),o=i?.type,s=e[n];return o&&!r.includes(o)?nC(o,s):ng(s)},nC=(n,t)=>{if(n.charAt(0)==="_"){let e=n.slice(1,n.length);return KR(t,e)}switch(n){case ue.bool:return WR(t);case ue.float4:case ue.float8:case ue.int2:case ue.int4:case ue.int8:case ue.numeric:case ue.oid:return ZR(t);case ue.json:case ue.jsonb:return YR(t);case ue.timestamp:return JR(t);case ue.abstime:case ue.date:case ue.daterange:case ue.int4range:case ue.int8range:case ue.money:case ue.reltime:case ue.text:case ue.time:case ue.timestamptz:case ue.timetz:case ue.tsrange:case ue.tstzrange:return ng(t);default:return ng(t)}},ng=n=>n,WR=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},ZR=n=>{if(typeof n=="string"){let t=parseFloat(n);if(!Number.isNaN(t))return t}return n},YR=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(t){return console.log(`JSON parse error: ${t}`),n}return n},KR=(n,t)=>{if(typeof n!="string")return n;let e=n.length-1,r=n[e];if(n[0]==="{"&&r==="}"){let o,s=n.slice(1,e);try{o=JSON.parse("["+s+"]")}catch{o=s?s.split(","):[]}return o.map(a=>nC(t,a))}return n},JR=n=>typeof n=="string"?n.replace(" ","T"):n,pu=n=>{let t=n;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};var ao=class{constructor(t,e,r={},i=fu){this.channel=t,this.event=e,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var r;return this._hasReceived(t)&&e((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let t=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}};var Zs=class n{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=e?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=n.syncState(this.state,i,o,s),this.pendingDiffs.forEach(l=>{this.state=n.syncDiff(this.state,l,o,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=n.syncDiff(this.state,i,o,s),a())}),this.onJoin((i,o,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:s})}),this.onLeave((i,o,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,r,i){let o=this.cloneDeep(t),s=this.transformState(e),a={},l={};return this.map(o,(c,u)=>{s[c]||(l[c]=u)}),this.map(s,(c,u)=>{let d=o[c];if(d){let h=u.map(I=>I.presence_ref),f=d.map(I=>I.presence_ref),y=u.filter(I=>f.indexOf(I.presence_ref)<0),C=d.filter(I=>h.indexOf(I.presence_ref)<0);y.length>0&&(a[c]=y),C.length>0&&(l[c]=C)}else a[c]=u}),this.syncDiff(o,{joins:a,leaves:l},r,i)}static syncDiff(t,e,r,i){let{joins:o,leaves:s}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(a,l)=>{var c;let u=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),u.length>0){let d=t[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);t[a].unshift(...h)}r(a,u,l)}),this.map(s,(a,l)=>{let c=t[a];if(!c)return;let u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),t[a]=c,i(a,c,l),c.length===0&&delete t[a]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(r=>e(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,r)=>{let i=t[r];return"metas"in i?e[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):e[r]=i,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Pn=function(n){return n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR",n}(Pn||{});var Ys=class n{constructor(t,e={config:{}},r){this.topic=t,this.params=e,this.socket=r,this.bindings={},this.state=yt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new ao(this,Nt.join,this.params,this.timeout),this.rejoinTimer=new so(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=yt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=yt.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=yt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=yt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Nt.reply,{},(i,o)=>{this._trigger(this._replyEventName(o),i)}),this.presence=new Zs(this),this.broadcastEndpointURL=pu(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,e=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{let{config:{broadcast:o,presence:s,private:a}}=this.params;this._onError(u=>t?.(Pn.CHANNEL_ERROR,u)),this._onClose(()=>t?.(Pn.CLOSED));let l={},c={broadcast:o,presence:s,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",d=>p(this,[d],function*({postgres_changes:u}){var h;if(this.socket.setAuth(),u===void 0){t?.(Pn.SUBSCRIBED);return}else{let f=this.bindings.postgres_changes,y=(h=f?.length)!==null&&h!==void 0?h:0,C=[];for(let I=0;I<y;I++){let N=f[I],{filter:{event:we,schema:te,table:ze,filter:Pt}}=N,jn=u&&u[I];if(jn&&jn.event===we&&jn.schema===te&&jn.table===ze&&jn.filter===Pt)C.push(Object.assign(Object.assign({},N),{id:jn.id}));else{this.unsubscribe(),t?.(Pn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,t&&t(Pn.SUBSCRIBED);return}})).receive("error",u=>{t?.(Pn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t?.(Pn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(r){return p(this,arguments,function*(t,e={}){return yield this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)})}untrack(){return p(this,arguments,function*(t={}){return yield this.send({type:"presence",event:"untrack"},t)})}on(t,e,r){return this._on(t,e,r)}send(r){return p(this,arguments,function*(t,e={}){var i,o;if(!this._canPush()&&t.type==="broadcast"){let{event:s,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{let u=yield this._fetchWithTimeout(this.broadcastEndpointURL,c,(i=e.timeout)!==null&&i!==void 0?i:this.timeout);return yield(o=u.body)===null||o===void 0?void 0:o.cancel(),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,l,c;let u=this._push(t.type,t,e.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=yt.leaving;let e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Nt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{let i=new ao(this,Nt.leave,{},t);i.receive("ok",()=>{e(),r("ok")}).receive("timeout",()=>{e(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}_fetchWithTimeout(t,e,r){return p(this,null,function*(){let i=new AbortController,o=setTimeout(()=>i.abort(),r),s=yield this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:i.signal}));return clearTimeout(o),s})}_push(t,e,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new ao(this,t,e,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(t,e,r){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,r){var i,o;let s=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Nt;if(r&&[a,l,c,u].indexOf(s)>=0&&r!==this._joinRef())return;let h=this._onMessage(s,e,r);if(e&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var y,C,I;return((y=f.filter)===null||y===void 0?void 0:y.event)==="*"||((I=(C=f.filter)===null||C===void 0?void 0:C.event)===null||I===void 0?void 0:I.toLocaleLowerCase())===s}).map(f=>f.callback(h,r)):(o=this.bindings[s])===null||o===void 0||o.filter(f=>{var y,C,I,N,we,te;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in f){let ze=f.id,Pt=(y=f.filter)===null||y===void 0?void 0:y.event;return ze&&((C=e.ids)===null||C===void 0?void 0:C.includes(ze))&&(Pt==="*"||Pt?.toLocaleLowerCase()===((I=e.data)===null||I===void 0?void 0:I.type.toLocaleLowerCase()))}else{let ze=(we=(N=f?.filter)===null||N===void 0?void 0:N.event)===null||we===void 0?void 0:we.toLocaleLowerCase();return ze==="*"||ze===((te=e?.event)===null||te===void 0?void 0:te.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===s}).map(f=>{if(typeof h=="object"&&"ids"in h){let y=h.data,{schema:C,table:I,commit_timestamp:N,type:we,errors:te}=y;h=Object.assign(Object.assign({},{schema:C,table:I,commit_timestamp:N,eventType:we,new:{},old:{},errors:te}),this._getPayloadRecords(y))}f.callback(h,r)})}_isClosed(){return this.state===yt.closed}_isJoined(){return this.state===yt.joined}_isJoining(){return this.state===yt.joining}_isLeaving(){return this.state===yt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,r){let i=t.toLocaleLowerCase(),o={type:i,filter:e,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(t,e){let r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&n.isEqual(i.filter,e))}),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(let r in t)if(t[r]!==e[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Nt.close,{},t)}_onError(t){this._on(Nt.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=yt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){let e={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(e.new=rg(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(e.old=rg(t.columns,t.old_record)),e}};var XR=()=>{},e1=typeof WebSocket<"u",t1=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,Ks=class{constructor(t,e){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=X_,this.params={},this.timeout=fu,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=XR,this.conn=null,this.sendBuffer=[],this.serializer=new hu,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let s;return o?s=o:typeof fetch>"u"?s=(...a)=>import("./chunk-BX7VDEVO.js").then(({default:l})=>l(...a)):s=fetch,(...a)=>s(...a)},this.endPoint=`${t}/${tg.websocket}`,this.httpEndpoint=pu(t),e?.transport?this.transport=e.transport:this.transport=null,e?.params&&(this.params=e.params),e?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),e.headers)),e?.timeout&&(this.timeout=e.timeout),e?.logger&&(this.logger=e.logger),e?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=e.heartbeatIntervalMs);let i=(r=e?.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=e?.reconnectAfterMs?e.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=e?.encode?e.encode:(o,s)=>s(JSON.stringify(o)),this.decode=e?.decode?e.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new so(()=>p(this,null,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(e?.fetch),e?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=e?.worker||!1,this.workerUrl=e?.workerUrl}this.accessToken=e?.accessToken||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(e1){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new ig(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),import("./chunk-BBCAVWXX.js").then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:eC}))}disconnect(t,e){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,e??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(t){return p(this,null,function*(){let e=yield t.unsubscribe();return this.channels.length===0&&this.disconnect(),e})}removeAllChannels(){return p(this,null,function*(){let t=yield Promise.all(this.channels.map(e=>e.unsubscribe()));return this.disconnect(),t})}log(t,e,r){this.logger(t,e,r)}connectionState(){switch(this.conn&&this.conn.readyState){case oo.connecting:return Zr.Connecting;case oo.open:return Zr.Open;case oo.closing:return Zr.Closing;default:return Zr.Closed}}isConnected(){return this.connectionState()===Zr.Open}channel(t,e={config:{}}){let r=new Ys(`realtime:${t}`,e,this);return this.channels.push(r),r}push(t){let{topic:e,event:r,payload:i,ref:o}=t,s=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${e} ${r} (${o})`,i),this.isConnected()?s():this.sendBuffer.push(s)}setAuth(t=null){return p(this,null,function*(){let e=t||this.accessToken&&(yield this.accessToken())||this.accessTokenValue;if(e){let r=null;try{r=JSON.parse(atob(e.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=e,this.channels.forEach(i=>{e&&i.updateJoinPayload({access_token:e}),i.joinedOnce&&i._isJoined()&&i._push(Nt.access_token,{access_token:e})})}})}sendHeartbeat(){return p(this,null,function*(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(tC,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}})}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,e=>{let{topic:r,event:i,payload:o,ref:s}=e;s&&s===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${r} ${i} ${s&&"("+s+")"||""}`,o),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,o,s)),this.stateChangeCallbacks.message.forEach(a=>a(e))})}_onConnOpen(){return p(this,null,function*(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{e.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(e=>e(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(e=>e(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Nt.error))}_appendParams(t,e){if(Object.keys(e).length===0)return t;let r=t.match(/\?/)?"&":"?",i=new URLSearchParams(e);return`${t}${r}${i}`}_workerObjectUrl(t){let e;if(t)e=t;else{let r=new Blob([t1],{type:"application/javascript"});e=URL.createObjectURL(r)}return e}};var ig=class{constructor(t,e,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=oo.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=r.close}};var lo=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function Ae(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var gu=class extends lo{constructor(t,e){super(t),this.name="StorageApiError",this.status=e}toJSON(){return{name:this.name,message:this.message,status:this.status}}},Yr=class extends lo{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};var n1=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(n,t||[])).next())})},vu=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-BX7VDEVO.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)},rC=()=>n1(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield import("./chunk-BX7VDEVO.js")).Response:Response}),mu=n=>{if(Array.isArray(n))return n.map(e=>mu(e));if(typeof n=="function"||n!==Object(n))return n;let t={};return Object.entries(n).forEach(([e,r])=>{let i=e.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[i]=mu(r)}),t};var Kr=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(n,t||[])).next())})},og=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),r1=(n,t,e)=>Kr(void 0,void 0,void 0,function*(){let r=yield rC();n instanceof r&&!e?.noResolveJson?n.json().then(i=>{t(new gu(og(i),n.status||500))}).catch(i=>{t(new Yr(og(i),i))}):t(new Yr(og(n),n))}),i1=(n,t,e,r)=>{let i={method:n,headers:t?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),e))};function Js(n,t,e,r,i,o){return Kr(this,void 0,void 0,function*(){return new Promise((s,a)=>{n(e,i1(t,r,i,o)).then(l=>{if(!l.ok)throw l;return r?.noResolveJson?l:l.json()}).then(l=>s(l)).catch(l=>r1(l,a,r))})})}function co(n,t,e,r){return Kr(this,void 0,void 0,function*(){return Js(n,"GET",t,e,r)})}function fn(n,t,e,r,i){return Kr(this,void 0,void 0,function*(){return Js(n,"POST",t,r,i,e)})}function iC(n,t,e,r,i){return Kr(this,void 0,void 0,function*(){return Js(n,"PUT",t,r,i,e)})}function oC(n,t,e,r){return Kr(this,void 0,void 0,function*(){return Js(n,"HEAD",t,Object.assign(Object.assign({},e),{noResolveJson:!0}),r)})}function yu(n,t,e,r,i){return Kr(this,void 0,void 0,function*(){return Js(n,"DELETE",t,r,i,e)})}var dt=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(n,t||[])).next())})},o1={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},sC={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},wu=class{constructor(t,e={},r,i){this.url=t,this.headers=e,this.bucketId=r,this.fetch=vu(i)}uploadOrUpdate(t,e,r,i){return dt(this,void 0,void 0,function*(){try{let o,s=Object.assign(Object.assign({},sC),i),a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)}),l=s.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",s.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",s.cacheControl),l&&o.append("metadata",this.encodeMetadata(l))):(o=r,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i?.headers&&(a=Object.assign(Object.assign({},a),i.headers));let c=this._removeEmptyFolders(e),u=this._getFinalPath(c),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:o,headers:a},s?.duplex?{duplex:s.duplex}:{})),h=yield d.json();return d.ok?{data:{path:c,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(o){if(Ae(o))return{data:null,error:o};throw o}})}upload(t,e,r){return dt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,r)})}uploadToSignedUrl(t,e,r,i){return dt(this,void 0,void 0,function*(){let o=this._removeEmptyFolders(t),s=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",e);try{let l,c=Object.assign({upsert:sC.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);let d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),h=yield d.json();return d.ok?{data:{path:o,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(Ae(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,e){return dt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t),i=Object.assign({},this.headers);e?.upsert&&(i["x-upsert"]="true");let o=yield fn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(this.url+o.url),a=s.searchParams.get("token");if(!a)throw new lo("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:a},error:null}}catch(r){if(Ae(r))return{data:null,error:r};throw r}})}update(t,e,r){return dt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,r)})}move(t,e,r){return dt(this,void 0,void 0,function*(){try{return{data:yield fn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Ae(i))return{data:null,error:i};throw i}})}copy(t,e,r){return dt(this,void 0,void 0,function*(){try{return{data:{path:(yield fn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Ae(i))return{data:null,error:i};throw i}})}createSignedUrl(t,e,r){return dt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),o=yield fn(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:e},r?.transform?{transform:r.transform}:{}),{headers:this.headers}),s=r?.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${s}`)},{data:o,error:null}}catch(i){if(Ae(i))return{data:null,error:i};throw i}})}createSignedUrls(t,e,r){return dt(this,void 0,void 0,function*(){try{let i=yield fn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${o}`):null})),error:null}}catch(i){if(Ae(i))return{data:null,error:i};throw i}})}download(t,e){return dt(this,void 0,void 0,function*(){let i=typeof e?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(e?.transform||{}),s=o?`?${o}`:"";try{let a=this._getFinalPath(t);return{data:yield(yield co(this.fetch,`${this.url}/${i}/${a}${s}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Ae(a))return{data:null,error:a};throw a}})}info(t){return dt(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{let r=yield co(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:mu(r),error:null}}catch(r){if(Ae(r))return{data:null,error:r};throw r}})}exists(t){return dt(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{return yield oC(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Ae(r)&&r instanceof Yr){let i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,e){let r=this._getFinalPath(t),i=[],o=e?.download?`download=${e.download===!0?"":e.download}`:"";o!==""&&i.push(o);let a=typeof e?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(e?.transform||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(t){return dt(this,void 0,void 0,function*(){try{return{data:yield yu(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(Ae(e))return{data:null,error:e};throw e}})}list(t,e,r){return dt(this,void 0,void 0,function*(){try{let i=Object.assign(Object.assign(Object.assign({},o1),e),{prefix:t||""});return{data:yield fn(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Ae(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){let e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};var aC="2.7.1";var lC={"X-Client-Info":`storage-js/${aC}`};var uo=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(n,t||[])).next())})},_u=class{constructor(t,e={},r){this.url=t,this.headers=Object.assign(Object.assign({},lC),e),this.fetch=vu(r)}listBuckets(){return uo(this,void 0,void 0,function*(){try{return{data:yield co(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Ae(t))return{data:null,error:t};throw t}})}getBucket(t){return uo(this,void 0,void 0,function*(){try{return{data:yield co(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(Ae(e))return{data:null,error:e};throw e}})}createBucket(t,e={public:!1}){return uo(this,void 0,void 0,function*(){try{return{data:yield fn(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ae(r))return{data:null,error:r};throw r}})}updateBucket(t,e){return uo(this,void 0,void 0,function*(){try{return{data:yield iC(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ae(r))return{data:null,error:r};throw r}})}emptyBucket(t){return uo(this,void 0,void 0,function*(){try{return{data:yield fn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(Ae(e))return{data:null,error:e};throw e}})}deleteBucket(t){return uo(this,void 0,void 0,function*(){try{return{data:yield yu(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(Ae(e))return{data:null,error:e};throw e}})}};var Qs=class extends _u{constructor(t,e={},r){super(t,e,r)}from(t){return new wu(this.url,this.headers,t,this.fetch)}};var cC="2.49.4";var Xs="";typeof Deno<"u"?Xs="deno":typeof document<"u"?Xs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Xs="react-native":Xs="node";var s1={"X-Client-Info":`supabase-js-${Xs}/${cC}`},uC={headers:s1},dC={schema:"public"},fC={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},hC={};yg();var a1=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(n,t||[])).next())})},l1=n=>{let t;return n?t=n:typeof fetch>"u"?t=mg:t=fetch,(...e)=>t(...e)},c1=()=>typeof Headers>"u"?vg:Headers,pC=(n,t,e)=>{let r=l1(e),i=c1();return(o,s)=>a1(void 0,void 0,void 0,function*(){var a;let l=(a=yield t())!==null&&a!==void 0?a:n,c=new i(s?.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(o,Object.assign(Object.assign({},s),{headers:c}))})};var u1=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(n,t||[])).next())})};function gC(n){return n.replace(/\/$/,"")}function mC(n,t){let{db:e,auth:r,realtime:i,global:o}=n,{db:s,auth:a,realtime:l,global:c}=t,u={db:Object.assign(Object.assign({},s),e),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},c),o),accessToken:()=>u1(this,void 0,void 0,function*(){return""})};return n.accessToken?u.accessToken=n.accessToken:delete u.accessToken,u}var Cu="2.69.1";var Jr=30*1e3,bu=3,Du=bu*Jr,vC="http://localhost:9999",yC="supabase.auth.token";var wC={"X-Client-Info":`gotrue-js/${Cu}`};var ea="X-Supabase-Api-Version",sg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},_C=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,CC=6e5;var ta=class extends Error{constructor(t,e,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=r}};function H(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}var Eu=class extends ta{constructor(t,e,r){super(t,e,r),this.name="AuthApiError",this.status=e,this.code=r}};function bC(n){return H(n)&&n.name==="AuthApiError"}var fo=class extends ta{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}},hn=class extends ta{constructor(t,e,r,i){super(t,r,i),this.name=e,this.status=r}},Ot=class extends hn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function DC(n){return H(n)&&n.name==="AuthSessionMissingError"}var ho=class extends hn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Qr=class extends hn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},Xr=class extends hn{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function EC(n){return H(n)&&n.name==="AuthImplicitGrantRedirectError"}var na=class extends hn{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},po=class extends hn{constructor(t,e){super(t,"AuthRetryableFetchError",e,void 0)}};function Iu(n){return H(n)&&n.name==="AuthRetryableFetchError"}var ra=class extends hn{constructor(t,e,r){super(t,"AuthWeakPasswordError",e,"weak_password"),this.reasons=r}};var Fn=class extends hn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};var IC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),SC=` 	
\r=`.split(""),d1=(()=>{let n=new Array(128);for(let t=0;t<n.length;t+=1)n[t]=-1;for(let t=0;t<SC.length;t+=1)n[SC[t].charCodeAt(0)]=-2;for(let t=0;t<IC.length;t+=1)n[IC[t].charCodeAt(0)]=t;return n})();function xC(n,t,e){let r=d1[n];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)e(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function ag(n){let t=[],e=s=>{t.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=s=>{p1(s,r,e)};for(let s=0;s<n.length;s+=1)xC(n.charCodeAt(s),i,o);return t.join("")}function f1(n,t){if(n<=127){t(n);return}else if(n<=2047){t(192|n>>6),t(128|n&63);return}else if(n<=65535){t(224|n>>12),t(128|n>>6&63),t(128|n&63);return}else if(n<=1114111){t(240|n>>18),t(128|n>>12&63),t(128|n>>6&63),t(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function h1(n,t){for(let e=0;e<n.length;e+=1){let r=n.charCodeAt(e);if(r>55295&&r<=56319){let i=(r-55296)*1024&65535;r=(n.charCodeAt(e+1)-56320&65535|i)+65536,e+=1}f1(r,t)}}function p1(n,t,e){if(t.utf8seq===0){if(n<=127){e(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=n&31;else if(t.utf8seq===3)t.codepoint=n&15;else if(t.utf8seq===4)t.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|n&63,t.utf8seq-=1,t.utf8seq===0&&e(t.codepoint)}}function TC(n){let t=[],e={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<n.length;i+=1)xC(n.charCodeAt(i),e,r);return new Uint8Array(t)}function MC(n){let t=[];return h1(n,e=>t.push(e)),new Uint8Array(t)}function AC(n){return Math.round(Date.now()/1e3)+n}function RC(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){let t=Math.random()*16|0;return(n=="x"?t:t&3|8).toString(16)})}var Zt=()=>typeof window<"u"&&typeof document<"u",ei={tested:!1,writable:!1},or=()=>{if(!Zt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ei.tested)return ei.writable;let n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),ei.tested=!0,ei.writable=!0}catch{ei.tested=!0,ei.writable=!1}return ei.writable};function NC(n){let t={},e=new URL(n);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((i,o)=>{t[o]=i})}catch{}return e.searchParams.forEach((r,i)=>{t[i]=r}),t}var Su=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-BX7VDEVO.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)},OC=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",lg=(n,t,e)=>p(void 0,null,function*(){yield n.setItem(t,JSON.stringify(e))}),oa=(n,t)=>p(void 0,null,function*(){let e=yield n.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch{return e}}),sa=(n,t)=>p(void 0,null,function*(){yield n.removeItem(t)}),ia=class n{constructor(){this.promise=new n.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}};ia.promiseConstructor=Promise;function xu(n){let t=n.split(".");if(t.length!==3)throw new Fn("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!_C.test(t[r]))throw new Fn("JWT not in base64url format");return{header:JSON.parse(ag(t[0])),payload:JSON.parse(ag(t[1])),signature:TC(t[2]),raw:{header:t[0],payload:t[1]}}}function kC(n){return p(this,null,function*(){return yield new Promise(t=>{setTimeout(()=>t(null),n)})})}function PC(n,t){return new Promise((r,i)=>{p(this,null,function*(){for(let o=0;o<1/0;o++)try{let s=yield n(o);if(!t(o,null,s)){r(s);return}}catch(s){if(!t(o,s)){i(s);return}}})})}function g1(n){return("0"+n.toString(16)).substr(-2)}function m1(){let t=new Uint32Array(56);if(typeof crypto>"u"){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=e.length,i="";for(let o=0;o<56;o++)i+=e.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,g1).join("")}function v1(n){return p(this,null,function*(){let e=new TextEncoder().encode(n),r=yield crypto.subtle.digest("SHA-256",e),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")})}function y1(n){return p(this,null,function*(){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;let e=yield v1(n);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})}function ti(n,t,e=!1){return p(this,null,function*(){let r=m1(),i=r;e&&(i+="/PASSWORD_RECOVERY"),yield lg(n,`${t}-code-verifier`,i);let o=yield y1(r);return[o,r===o?"plain":"s256"]})}var w1=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function FC(n){let t=n.headers.get(ea);if(!t||!t.match(w1))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function LC(n){if(!n)throw new Error("Missing exp claim");let t=Math.floor(Date.now()/1e3);if(n<=t)throw new Error("JWT has expired")}function jC(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var _1=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e},ni=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),C1=[502,503,504];function VC(n){return p(this,null,function*(){var t;if(!OC(n))throw new po(ni(n),0);if(C1.includes(n.status))throw new po(ni(n),n.status);let e;try{e=yield n.json()}catch(o){throw new fo(ni(o),o)}let r,i=FC(n);if(i&&i.getTime()>=sg["2024-01-01"].timestamp&&typeof e=="object"&&e&&typeof e.code=="string"?r=e.code:typeof e=="object"&&e&&typeof e.error_code=="string"&&(r=e.error_code),r){if(r==="weak_password")throw new ra(ni(e),n.status,((t=e.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Ot}else if(typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((o,s)=>o&&typeof s=="string",!0))throw new ra(ni(e),n.status,e.weak_password.reasons);throw new Eu(ni(e),n.status||500,r)})}var b1=(n,t,e,r)=>{let i={method:n,headers:t?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),e))};function J(n,t,e,r){return p(this,null,function*(){var i;let o=Object.assign({},r?.headers);o[ea]||(o[ea]=sg["2024-01-01"].name),r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);let s=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);let a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=yield D1(n,t,e+a,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}})}function D1(n,t,e,r,i,o){return p(this,null,function*(){let s=b1(t,r,i,o),a;try{a=yield n(e,Object.assign({},s))}catch(l){throw console.error(l),new po(ni(l),0)}if(a.ok||(yield VC(a)),r?.noResolveJson)return a;try{return yield a.json()}catch(l){yield VC(l)}})}function Ln(n){var t;let e=null;E1(n)&&(e=Object.assign({},n),n.expires_at||(e.expires_at=AC(n.expires_in)));let r=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:e,user:r},error:null}}function cg(n){let t=Ln(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((e,r)=>e&&typeof r=="string",!0)&&(t.data.weak_password=n.weak_password),t}function pn(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function UC(n){return{data:n,error:null}}function BC(n){let{action_link:t,email_otp:e,hashed_token:r,redirect_to:i,verification_type:o}=n,s=_1(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:e,hashed_token:r,redirect_to:i,verification_type:o},l=Object.assign({},s);return{data:{properties:a,user:l},error:null}}function $C(n){return n}function E1(n){return n.access_token&&n.refresh_token&&n.expires_in}var I1=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e},go=class{constructor({url:t="",headers:e={},fetch:r}){this.url=t,this.headers=e,this.fetch=Su(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(t,e="global"){return p(this,null,function*(){try{return yield J(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(H(r))return{data:null,error:r};throw r}})}inviteUserByEmail(r){return p(this,arguments,function*(t,e={}){try{return yield J(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:pn})}catch(i){if(H(i))return{data:{user:null},error:i};throw i}})}generateLink(t){return p(this,null,function*(){try{let{options:e}=t,r=I1(t,["options"]),i=Object.assign(Object.assign({},r),e);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),yield J(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:BC,redirectTo:e?.redirectTo})}catch(e){if(H(e))return{data:{properties:null,user:null},error:e};throw e}})}createUser(t){return p(this,null,function*(){try{return yield J(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:pn})}catch(e){if(H(e))return{data:{user:null},error:e};throw e}})}listUsers(t){return p(this,null,function*(){var e,r,i,o,s,a,l;try{let c={nextPage:null,lastPage:0,total:0},u=yield J(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(e=t?.page)===null||e===void 0?void 0:e.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:$C});if(u.error)throw u.error;let d=yield u.json(),h=(s=u.headers.get("x-total-count"))!==null&&s!==void 0?s:0,f=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(y=>{let C=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),I=JSON.parse(y.split(";")[1].split("=")[1]);c[`${I}Page`]=C}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(H(c))return{data:{users:[]},error:c};throw c}})}getUserById(t){return p(this,null,function*(){try{return yield J(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:pn})}catch(e){if(H(e))return{data:{user:null},error:e};throw e}})}updateUserById(t,e){return p(this,null,function*(){try{return yield J(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:pn})}catch(r){if(H(r))return{data:{user:null},error:r};throw r}})}deleteUser(t,e=!1){return p(this,null,function*(){try{return yield J(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:pn})}catch(r){if(H(r))return{data:{user:null},error:r};throw r}})}_listFactors(t){return p(this,null,function*(){try{let{data:e,error:r}=yield J(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:e,error:r}}catch(e){if(H(e))return{data:null,error:e};throw e}})}_deleteFactor(t){return p(this,null,function*(){try{return{data:yield J(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(H(e))return{data:null,error:e};throw e}})}};var HC={getItem:n=>or()?globalThis.localStorage.getItem(n):null,setItem:(n,t)=>{or()&&globalThis.localStorage.setItem(n,t)},removeItem:n=>{or()&&globalThis.localStorage.removeItem(n)}};function ug(n={}){return{getItem:t=>n[t]||null,setItem:(t,e)=>{n[t]=e},removeItem:t=>{delete n[t]}}}function GC(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var ri={debug:!!(globalThis&&or()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},aa=class extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}},Tu=class extends aa{};function dg(n,t,e){return p(this,null,function*(){ri.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,t);let r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),ri.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},t),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(n,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},i=>p(this,null,function*(){if(i){ri.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return yield e()}finally{ri.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(t===0)throw ri.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Tu(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(ri.debug)try{let o=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield e()}})))})}GC();var S1={url:vC,storageKey:yC,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:wC,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function zC(n,t,e){return p(this,null,function*(){return yield e()})}var fg=(()=>{class n{constructor(e){var r,i;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=n.nextInstanceID,n.nextInstanceID+=1,this.instanceID>0&&Zt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let o=Object.assign(Object.assign({},S1),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new go({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=Su(o.fetch),this.lock=o.lock||zC,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:Zt()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=dg:this.lock=zC,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?o.storage?this.storage=o.storage:or()?this.storage=HC:(this.memoryStorage={},this.storage=ug(this.memoryStorage)):(this.memoryStorage={},this.storage=ug(this.memoryStorage)),Zt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",s=>p(this,null,function*(){this._debug("received broadcast notification from other tab or client",s),yield this._notifyAllSubscribers(s.data.event,s.data.session,!1)}))}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Cu}) ${new Date().toISOString()}`,...e),this}initialize(){return p(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=p(this,null,function*(){return yield this._acquireLock(-1,()=>p(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return p(this,null,function*(){var e;try{let r=NC(window.location.href),i="none";if(this._isImplicitGrantCallback(r)?i="implicit":(yield this._isPKCECallback(r))&&(i="pkce"),Zt()&&this.detectSessionInUrl&&i!=="none"){let{data:o,error:s}=yield this._getSessionFromURL(r,i);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),EC(s)){let c=(e=s.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:s}}return yield this._removeSession(),{error:s}}let{session:a,redirectType:l}=o;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),yield this._saveSession(a),setTimeout(()=>p(this,null,function*(){l==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",a):yield this._notifyAllSubscribers("SIGNED_IN",a)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(r){return H(r)?{error:r}:{error:new fo("Unexpected error during initialization",r)}}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(e){return p(this,null,function*(){var r,i,o;try{let s=yield J(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=e?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=e?.options)===null||o===void 0?void 0:o.captchaToken}},xform:Ln}),{data:a,error:l}=s;if(l||!a)return{data:{user:null,session:null},error:l};let c=a.session,u=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(H(s))return{data:{user:null,session:null},error:s};throw s}})}signUp(e){return p(this,null,function*(){var r,i,o;try{let s;if("email"in e){let{email:d,password:h,options:f}=e,y=null,C=null;this.flowType==="pkce"&&([y,C]=yield ti(this.storage,this.storageKey)),s=yield J(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:d,password:h,data:(r=f?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:y,code_challenge_method:C},xform:Ln})}else if("phone"in e){let{phone:d,password:h,options:f}=e;s=yield J(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(i=f?.data)!==null&&i!==void 0?i:{},channel:(o=f?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Ln})}else throw new Qr("You must provide either an email or phone number and a password");let{data:a,error:l}=s;if(l||!a)return{data:{user:null,session:null},error:l};let c=a.session,u=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(H(s))return{data:{user:null,session:null},error:s};throw s}})}signInWithPassword(e){return p(this,null,function*(){try{let r;if("email"in e){let{email:s,password:a,options:l}=e;r=yield J(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:cg})}else if("phone"in e){let{phone:s,password:a,options:l}=e;r=yield J(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:cg})}else throw new Qr("You must provide either an email or phone number and a password");let{data:i,error:o}=r;return o?{data:{user:null,session:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new ho}:(i.session&&(yield this._saveSession(i.session),yield this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(r){if(H(r))return{data:{user:null,session:null},error:r};throw r}})}signInWithOAuth(e){return p(this,null,function*(){var r,i,o,s;return yield this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})})}exchangeCodeForSession(e){return p(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>p(this,null,function*(){return this._exchangeCodeForSession(e)}))})}_exchangeCodeForSession(e){return p(this,null,function*(){let r=yield oa(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(r??"").split("/");try{let{data:s,error:a}=yield J(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:Ln});if(yield sa(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new ho}:(s.session&&(yield this._saveSession(s.session),yield this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:a})}catch(s){if(H(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}})}signInWithIdToken(e){return p(this,null,function*(){try{let{options:r,provider:i,token:o,access_token:s,nonce:a}=e,l=yield J(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Ln}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new ho}:(c.session&&(yield this._saveSession(c.session),yield this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(H(r))return{data:{user:null,session:null},error:r};throw r}})}signInWithOtp(e){return p(this,null,function*(){var r,i,o,s,a;try{if("email"in e){let{email:l,options:c}=e,u=null,d=null;this.flowType==="pkce"&&([u,d]=yield ti(this.storage,this.storageKey));let{error:h}=yield J(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c?.data)!==null&&r!==void 0?r:{},create_user:(i=c?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){let{phone:l,options:c}=e,{data:u,error:d}=yield J(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(o=c?.data)!==null&&o!==void 0?o:{},create_user:(s=c?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(a=c?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u?.message_id},error:d}}throw new Qr("You must provide either an email or phone number.")}catch(l){if(H(l))return{data:{user:null,session:null},error:l};throw l}})}verifyOtp(e){return p(this,null,function*(){var r,i;try{let o,s;"options"in e&&(o=(r=e.options)===null||r===void 0?void 0:r.redirectTo,s=(i=e.options)===null||i===void 0?void 0:i.captchaToken);let{data:a,error:l}=yield J(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:Ln});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");let c=a.session,u=a.user;return c?.access_token&&(yield this._saveSession(c),yield this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(H(o))return{data:{user:null,session:null},error:o};throw o}})}signInWithSSO(e){return p(this,null,function*(){var r,i,o;try{let s=null,a=null;return this.flowType==="pkce"&&([s,a]=yield ti(this.storage,this.storageKey)),yield J(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=e?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:UC})}catch(s){if(H(s))return{data:null,error:s};throw s}})}reauthenticate(){return p(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>p(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return p(this,null,function*(){try{return yield this._useSession(e=>p(this,null,function*(){let{data:{session:r},error:i}=e;if(i)throw i;if(!r)throw new Ot;let{error:o}=yield J(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:o}}))}catch(e){if(H(e))return{data:{user:null,session:null},error:e};throw e}})}resend(e){return p(this,null,function*(){try{let r=`${this.url}/resend`;if("email"in e){let{email:i,type:o,options:s}=e,{error:a}=yield J(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){let{phone:i,type:o,options:s}=e,{data:a,error:l}=yield J(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:l}}throw new Qr("You must provide either an email or phone number and a type")}catch(r){if(H(r))return{data:{user:null,session:null},error:r};throw r}})}getSession(){return p(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>p(this,null,function*(){return this._useSession(r=>p(this,null,function*(){return r}))}))})}_acquireLock(e,r){return p(this,null,function*(){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=p(this,null,function*(){return yield i,yield r()});return this.pendingInLock.push(p(this,null,function*(){try{yield o}catch{}})),o}return yield this.lock(`lock:${this.storageKey}`,e,()=>p(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let i=r();for(this.pendingInLock.push(p(this,null,function*(){try{yield i}catch{}})),yield i;this.pendingInLock.length;){let o=[...this.pendingInLock];yield Promise.all(o),this.pendingInLock.splice(0,o.length)}return yield i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(e){return p(this,null,function*(){this._debug("#_useSession","begin");try{let r=yield this.__loadSession();return yield e(r)}finally{this._debug("#_useSession","end")}})}__loadSession(){return p(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null,r=yield oa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!e)return{data:{session:null},error:null};let i=e.expires_at?e.expires_at*1e3-Date.now()<Du:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}let{session:o,error:s}=yield this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}})}getUser(e){return p(this,null,function*(){return e?yield this._getUser(e):(yield this.initializePromise,yield this._acquireLock(-1,()=>p(this,null,function*(){return yield this._getUser()})))})}_getUser(e){return p(this,null,function*(){try{return e?yield J(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:pn}):yield this._useSession(r=>p(this,null,function*(){var i,o,s;let{data:a,error:l}=r;if(l)throw l;return!(!((i=a.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ot}:yield J(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(o=a.session)===null||o===void 0?void 0:o.access_token)!==null&&s!==void 0?s:void 0,xform:pn})}))}catch(r){if(H(r))return DC(r)&&(yield this._removeSession(),yield sa(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}})}updateUser(i){return p(this,arguments,function*(e,r={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>p(this,null,function*(){return yield this._updateUser(e,r)}))})}_updateUser(i){return p(this,arguments,function*(e,r={}){try{return yield this._useSession(o=>p(this,null,function*(){let{data:s,error:a}=o;if(a)throw a;if(!s.session)throw new Ot;let l=s.session,c=null,u=null;this.flowType==="pkce"&&e.email!=null&&([c,u]=yield ti(this.storage,this.storageKey));let{data:d,error:h}=yield J(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:u}),jwt:l.access_token,xform:pn});if(h)throw h;return l.user=d.user,yield this._saveSession(l),yield this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}}))}catch(o){if(H(o))return{data:{user:null},error:o};throw o}})}setSession(e){return p(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>p(this,null,function*(){return yield this._setSession(e)}))})}_setSession(e){return p(this,null,function*(){try{if(!e.access_token||!e.refresh_token)throw new Ot;let r=Date.now()/1e3,i=r,o=!0,s=null,{payload:a}=xu(e.access_token);if(a.exp&&(i=a.exp,o=i<=r),o){let{session:l,error:c}=yield this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};s=l}else{let{data:l,error:c}=yield this._getUser(e.access_token);if(c)throw c;s={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:i-r,expires_at:i},yield this._saveSession(s),yield this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(r){if(H(r))return{data:{session:null,user:null},error:r};throw r}})}refreshSession(e){return p(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>p(this,null,function*(){return yield this._refreshSession(e)}))})}_refreshSession(e){return p(this,null,function*(){try{return yield this._useSession(r=>p(this,null,function*(){var i;if(!e){let{data:a,error:l}=r;if(l)throw l;e=(i=a.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new Ot;let{session:o,error:s}=yield this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}}))}catch(r){if(H(r))return{data:{user:null,session:null},error:r};throw r}})}_getSessionFromURL(e,r){return p(this,null,function*(){try{if(!Zt())throw new Xr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Xr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new na("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Xr("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new na("No code detected.");let{data:te,error:ze}=yield this._exchangeCodeForSession(e.code);if(ze)throw ze;let Pt=new URL(window.location.href);return Pt.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Pt.toString()),{data:{session:te.session,redirectType:null},error:null}}let{provider_token:i,provider_refresh_token:o,access_token:s,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=e;if(!s||!l||!a||!u)throw new Xr("No session defined in URL");let d=Math.round(Date.now()/1e3),h=parseInt(l),f=d+h;c&&(f=parseInt(c));let y=f-d;y*1e3<=Jr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${h}s`);let C=f-h;d-C>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",C,f,d):d-C<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",C,f,d);let{data:I,error:N}=yield this._getUser(s);if(N)throw N;let we={provider_token:i,provider_refresh_token:o,access_token:s,expires_in:h,expires_at:f,refresh_token:a,token_type:u,user:I.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:we,redirectType:e.type},error:null}}catch(i){if(H(i))return{data:{session:null,redirectType:null},error:i};throw i}})}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}_isPKCECallback(e){return p(this,null,function*(){let r=yield oa(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)})}signOut(){return p(this,arguments,function*(e={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>p(this,null,function*(){return yield this._signOut(e)}))})}_signOut(){return p(this,arguments,function*({scope:e}={scope:"global"}){return yield this._useSession(r=>p(this,null,function*(){var i;let{data:o,error:s}=r;if(s)return{error:s};let a=(i=o.session)===null||i===void 0?void 0:i.access_token;if(a){let{error:l}=yield this.admin.signOut(a,e);if(l&&!(bC(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(yield this._removeSession(),yield sa(this.storage,`${this.storageKey}-code-verifier`)),{error:null}}))})}onAuthStateChange(e){let r=RC(),i={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),p(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>p(this,null,function*(){this._emitInitialSession(r)}))}),{data:{subscription:i}}}_emitInitialSession(e){return p(this,null,function*(){return yield this._useSession(r=>p(this,null,function*(){var i,o;try{let{data:{session:s},error:a}=r;if(a)throw a;yield(i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){yield(o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}}))})}resetPasswordForEmail(i){return p(this,arguments,function*(e,r={}){let o=null,s=null;this.flowType==="pkce"&&([o,s]=yield ti(this.storage,this.storageKey,!0));try{return yield J(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:o,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(H(a))return{data:null,error:a};throw a}})}getUserIdentities(){return p(this,null,function*(){var e;try{let{data:r,error:i}=yield this.getUser();if(i)throw i;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(H(r))return{data:null,error:r};throw r}})}linkIdentity(e){return p(this,null,function*(){var r;try{let{data:i,error:o}=yield this._useSession(s=>p(this,null,function*(){var a,l,c,u,d;let{data:h,error:f}=s;if(f)throw f;let y=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return yield J(this.fetch,"GET",y,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})}));if(o)throw o;return Zt()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:e.provider,url:i?.url},error:null}}catch(i){if(H(i))return{data:{provider:e.provider,url:null},error:i};throw i}})}unlinkIdentity(e){return p(this,null,function*(){try{return yield this._useSession(r=>p(this,null,function*(){var i,o;let{data:s,error:a}=r;if(a)throw a;return yield J(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})}))}catch(r){if(H(r))return{data:null,error:r};throw r}})}_refreshAccessToken(e){return p(this,null,function*(){let r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{let i=Date.now();return yield PC(o=>p(this,null,function*(){return o>0&&(yield kC(200*Math.pow(2,o-1))),this._debug(r,"refreshing attempt",o),yield J(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ln})}),(o,s)=>{let a=200*Math.pow(2,o);return s&&Iu(s)&&Date.now()+a-i<Jr})}catch(i){if(this._debug(r,"error",i),H(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(r,"end")}})}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,r){return p(this,null,function*(){let i=yield this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",i),Zt()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}})}_recoverAndRefresh(){return p(this,null,function*(){var e;let r="#_recoverAndRefresh()";this._debug(r,"begin");try{let i=yield oa(this.storage,this.storageKey);if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&(yield this._removeSession());return}let o=((e=i.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Du;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${Du}s`),o){if(this.autoRefreshToken&&i.refresh_token){let{error:s}=yield this._callRefreshToken(i.refresh_token);s&&(console.error(s),Iu(s)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",s),yield this._removeSession()))}}else yield this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}})}_callRefreshToken(e){return p(this,null,function*(){var r,i;if(!e)throw new Ot;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new ia;let{data:s,error:a}=yield this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new Ot;yield this._saveSession(s.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);let l={session:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(o,"error",s),H(s)){let a={session:null,error:s};return Iu(s)||(yield this._removeSession()),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}})}_notifyAllSubscribers(e,r,i=!0){return p(this,null,function*(){let o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:r});let s=[],a=Array.from(this.stateChangeEmitters.values()).map(l=>p(this,null,function*(){try{yield l.callback(e,r)}catch(c){s.push(c)}}));if(yield Promise.all(a),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(o,"end")}})}_saveSession(e){return p(this,null,function*(){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,yield lg(this.storage,this.storageKey,e)})}_removeSession(){return p(this,null,function*(){this._debug("#_removeSession()"),yield sa(this.storage,this.storageKey),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Zt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){return p(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),Jr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(()=>p(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return p(this,null,function*(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)})}startAutoRefresh(){return p(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return p(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return p(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>p(this,null,function*(){try{let e=Date.now();try{return yield this._useSession(r=>p(this,null,function*(){let{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let o=Math.floor((i.expires_at*1e3-e)/Jr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Jr}ms, refresh threshold is ${bu} ticks`),o<=bu&&(yield this._callRefreshToken(i.refresh_token))}))}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(e.isAcquireTimeout||e instanceof aa)this._debug("auto refresh token tick lock not available");else throw e}})}_handleVisibilityChange(){return p(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!Zt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>p(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}})}_onVisibilityChanged(e){return p(this,null,function*(){let r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(yield this.initializePromise,yield this._acquireLock(-1,()=>p(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(e,r,i){return p(this,null,function*(){let o=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){let[s,a]=yield ti(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});o.push(l.toString())}if(i?.queryParams){let s=new URLSearchParams(i.queryParams);o.push(s.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${o.join("&")}`})}_unenroll(e){return p(this,null,function*(){try{return yield this._useSession(r=>p(this,null,function*(){var i;let{data:o,error:s}=r;return s?{data:null,error:s}:yield J(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})}))}catch(r){if(H(r))return{data:null,error:r};throw r}})}_enroll(e){return p(this,null,function*(){try{return yield this._useSession(r=>p(this,null,function*(){var i,o;let{data:s,error:a}=r;if(a)return{data:null,error:a};let l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=yield J(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((o=c?.totp)===null||o===void 0)&&o.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})}))}catch(r){if(H(r))return{data:null,error:r};throw r}})}_verify(e){return p(this,null,function*(){return this._acquireLock(-1,()=>p(this,null,function*(){try{return yield this._useSession(r=>p(this,null,function*(){var i;let{data:o,error:s}=r;if(s)return{data:null,error:s};let{data:a,error:l}=yield J(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return l?{data:null,error:l}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})}))}catch(r){if(H(r))return{data:null,error:r};throw r}}))})}_challenge(e){return p(this,null,function*(){return this._acquireLock(-1,()=>p(this,null,function*(){try{return yield this._useSession(r=>p(this,null,function*(){var i;let{data:o,error:s}=r;return s?{data:null,error:s}:yield J(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})}))}catch(r){if(H(r))return{data:null,error:r};throw r}}))})}_challengeAndVerify(e){return p(this,null,function*(){let{data:r,error:i}=yield this._challenge({factorId:e.factorId});return i?{data:null,error:i}:yield this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})})}_listFactors(){return p(this,null,function*(){let{data:{user:e},error:r}=yield this.getUser();if(r)return{data:null,error:r};let i=e?.factors||[],o=i.filter(a=>a.factor_type==="totp"&&a.status==="verified"),s=i.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:i,totp:o,phone:s},error:null}})}_getAuthenticatorAssuranceLevel(){return p(this,null,function*(){return this._acquireLock(-1,()=>p(this,null,function*(){return yield this._useSession(e=>p(this,null,function*(){var r,i;let{data:{session:o},error:s}=e;if(s)return{data:null,error:s};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:a}=xu(o.access_token),l=null;a.aal&&(l=a.aal);let c=l;((i=(r=o.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(c="aal2");let d=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}))})}fetchJwk(i){return p(this,arguments,function*(e,r={keys:[]}){let o=r.keys.find(l=>l.kid===e);if(o||(o=this.jwks.keys.find(l=>l.kid===e),o&&this.jwks_cached_at+CC>Date.now()))return o;let{data:s,error:a}=yield J(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!s.keys||s.keys.length===0)throw new Fn("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),o=s.keys.find(l=>l.kid===e),!o)throw new Fn("No matching signing key found in JWKS");return o})}getClaims(i){return p(this,arguments,function*(e,r={keys:[]}){try{let o=e;if(!o){let{data:C,error:I}=yield this.getSession();if(I||!C.session)return{data:null,error:I};o=C.session.access_token}let{header:s,payload:a,signature:l,raw:{header:c,payload:u}}=xu(o);if(LC(a.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){let{error:C}=yield this.getUser(o);if(C)throw C;return{data:{claims:a,header:s,signature:l},error:null}}let d=jC(s.alg),h=yield this.fetchJwk(s.kid,r),f=yield crypto.subtle.importKey("jwk",h,d,!0,["verify"]);if(!(yield crypto.subtle.verify(d,f,l,MC(`${c}.${u}`))))throw new Fn("Invalid JWT signature");return{data:{claims:a,header:s,signature:l},error:null}}catch(o){if(H(o))return{data:null,error:o};throw o}})}}return n.nextInstanceID=0,n})();var x1=fg,hg=x1;var Mu=class extends hg{constructor(t){super(t)}};var T1=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(n,t||[])).next())})},Au=class{constructor(t,e,r){var i,o,s;if(this.supabaseUrl=t,this.supabaseKey=e,!t)throw new Error("supabaseUrl is required.");if(!e)throw new Error("supabaseKey is required.");let a=gC(t);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;let l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:dC,realtime:hC,auth:Object.assign(Object.assign({},fC),{storageKey:l}),global:uC},u=mC(r??{},c);this.storageKey=(i=u.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=u.global.headers)!==null&&o!==void 0?o:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=u.auth)!==null&&s!==void 0?s:{},this.headers,u.global.fetch),this.fetch=pC(e,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new J_(`${a}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new Bs(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Qs(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,e;return T1(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();let{data:r}=yield this.auth.getSession();return(e=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:i,storageKey:o,flowType:s,lock:a,debug:l},c,u){let d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Mu({url:this.authUrl,headers:Object.assign(Object.assign({},d),c),storageKey:o,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:i,flowType:s,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new Ks(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,r)=>{this._handleTokenChanged(e,"CLIENT",r?.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var qC=(n,t,e)=>new Au(n,t,e);var la={production:!1,supabaseUrl:"https://jdfbgpwvhxketnsaokjz.supabase.co",supabaseAnonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpkZmJncHd2aHhrZXRuc2Fva2p6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDY1NTM5OTUsImV4cCI6MjA2MjEyOTk5NX0.pYZl_vxOx4mcdYShfNQm6EnovzcZpVZfcitMwPTCjzc"};console.log("Creating Supabase client");var Ru=typeof window<"u",M1=Ru?{getItem:n=>{try{return localStorage.getItem(n)}catch(t){return console.error("Error accessing localStorage:",t),null}},setItem:(n,t)=>{try{localStorage.setItem(n,t)}catch(e){console.error("Error writing to localStorage:",e)}},removeItem:n=>{try{localStorage.removeItem(n)}catch(t){console.error("Error removing from localStorage:",t)}}}:void 0;(!la.supabaseUrl||!la.supabaseAnonKey)&&console.error("Missing Supabase configuration. Please check environment variables.");var k=qC(la.supabaseUrl||"",la.supabaseAnonKey||"",{auth:{persistSession:!0,autoRefreshToken:!0,storage:M1,storageKey:"supabase.auth.token",detectSessionInUrl:!0,flowType:"pkce"},realtime:{timeout:3e4,params:{eventsPerSecond:10},headers:{"X-Client-Info":"angchat@1.0.0"}},db:{schema:"public"},global:{headers:{"X-Client-Info":"angchat@1.0.0"}}});Ru&&(window.checkSupabaseSession=()=>p(void 0,null,function*(){let{data:n}=yield k.auth.getSession();return console.log("Current session:",n.session),n.session}));console.log(Ru?"Realtime client initialized in browser environment":"Realtime client initialized in server environment");Ru&&p(void 0,null,function*(){try{let{data:n}=yield k.auth.getSession();console.log("Session on init:",n.session?"Found":"Not found");let{data:t,error:e}=yield k.from("messages").select("id").limit(1);e?console.error("Supabase connection test failed:",e.message):console.log("Supabase connection test successful")}catch(n){console.error("Supabase initialization error:",n?.message||n)}});var ge=class n{constructor(t,e,r){this.router=t;this.isServer=r;this.isBrowser=gt(e),this.isBrowser&&st(()=>{!this.user()&&!this.initializing()&&(console.log("User logged out, redirecting to login"),this.router.navigate(["/login"]))})}user=W(null);error=W(null);pendingVerification=W(!1);pendingRegistration=W(null);verificationComplete=W(!1);initializing=W(!0);isBrowser;init(){return p(this,null,function*(){if(!this.isBrowser){console.log("Skipping auth initialization on server"),this.initializing.set(!1);return}this.initializing.set(!0);try{console.log("Initializing auth service..."),this.loadPendingRegistrationData();let{data:t}=yield k.auth.getSession();if(t.session){if(console.log("Existing session found:",t.session.user?.id),t.session.user&&this.user.set(t.session.user),t.session.user)try{let{data:r,error:i}=yield k.from("profiles").select("username").eq("id",t.session.user.id).single();r?(console.log("Profile found for user:",r.username),this.user.update(o=>o?P(D({},o),{username:r.username}):null)):i&&console.error("Error fetching user profile:",i)}catch(r){console.error("Exception fetching user profile:",r)}}else console.log("No existing session found"),this.user.set(null);let{data:{subscription:e}}=k.auth.onAuthStateChange((r,i)=>p(this,null,function*(){if(console.log("Auth state changed:",r,i?.user?.id),r==="SIGNED_IN"){if(console.log("User signed in"),this.pendingVerification()){console.log("User signed in after email verification"),this.pendingVerification.set(!1),this.verificationComplete.set(!0);let o=this.pendingRegistration();o&&i?.user&&(yield this.createUserProfile(i.user.id,o.username),this.pendingRegistration.set(null),this.clearPendingRegistrationData(),this.user.set(P(D({},i.user),{username:o.username})),this.router.navigate(["/chat"]))}else if(i?.user){this.user.set(i.user);try{let{data:o}=yield k.from("profiles").select("username").eq("id",i.user.id).single();o&&this.user.update(s=>s?P(D({},s),{username:o.username}):null)}catch(o){console.error("Error fetching profile during sign in:",o)}}}else if(r==="SIGNED_OUT")console.log("User signed out"),this.user.set(null);else if(r==="USER_UPDATED"){if(console.log("User updated - checking if this is a verification"),this.pendingVerification()&&i?.user&&i.user.email_confirmed_at){console.log("Email now confirmed through USER_UPDATED event"),this.pendingVerification.set(!1),this.verificationComplete.set(!0);let o=this.pendingRegistration();o&&(yield this.createUserProfile(i.user.id,o.username),this.pendingRegistration.set(null),this.clearPendingRegistrationData(),this.user.set(P(D({},i.user),{username:o.username})),this.router.navigate(["/chat"]))}}else r==="TOKEN_REFRESHED"&&(console.log("Token refreshed"),i&&this.user.set(i.user));if(i?.user&&!this.user()){this.user.set(i.user);try{let{data:o}=yield k.from("profiles").select("username").eq("id",i.user.id).single();o&&this.user.update(s=>s?P(D({},s),{username:o.username}):null)}catch(o){console.error("Error fetching profile data:",o)}}else!i&&r!=="SIGNED_OUT"&&console.log("Auth state change with no session, but not setting user to null")}));typeof window<"u"&&window.addEventListener("beforeunload",()=>{e.unsubscribe()})}catch(t){console.error("Error initializing auth:",t),this.error.set("Failed to initialize authentication"),this.user.set(null)}finally{this.initializing.set(!1)}})}register(t,e,r){return p(this,null,function*(){try{let{data:i}=yield k.from("profiles").select("username").eq("username",r).single();if(i)return this.error.set("Username is already taken"),!1;this.verificationComplete.set(!1);let{data:o,error:s}=yield k.auth.signUp({email:t,password:e,options:{data:{username:r},emailRedirectTo:`${window.location.origin}/verify-email`}});if(s)return this.error.set(s.message),!1;let a={email:t,password:e,username:r};return this.pendingRegistration.set(a),this.storePendingRegistrationData(a),this.pendingVerification.set(!0),o.user&&this.user.set(o.user),!0}catch(i){return console.error("Registration error:",i),this.error.set(i.message||"An error occurred during registration"),!1}})}createUserProfile(t,e){return p(this,null,function*(){try{let{error:r}=yield k.from("profiles").insert({id:t,username:e,display_name:e,avatar_url:null,updated_at:new Date().toISOString()});return r?(console.error("Error creating profile:",r),this.error.set("Failed to create user profile: "+r.message),!1):!0}catch(r){return console.error("Profile creation error:",r),this.error.set(r.message||"An error occurred creating your profile"),!1}})}login(t,e){return p(this,null,function*(){try{console.log("Logging in with email:",t);let{data:r,error:i}=yield k.auth.signInWithPassword({email:t,password:e});if(i)return console.error("Login error from Supabase:",i.message),this.error.set(i.message),!1;if(console.log("Login successful, session established"),r.user&&this.user.set(r.user),r.user)try{let{data:o,error:s}=yield k.from("profiles").select("username").eq("id",r.user.id).single();if(o)console.log("Profile found for user:",o.username),this.user.set(P(D({},r.user),{username:o.username}));else if(s)console.error("Error fetching profile:",s);else{console.log("No profile found for user, but keeping session");let a=this.pendingRegistration();a&&a.email===t&&(yield this.createUserProfile(r.user.id,a.username),this.user.set(P(D({},r.user),{username:a.username})),this.pendingRegistration.set(null),this.clearPendingRegistrationData())}}catch(o){console.error("Exception fetching profile:",o)}return!0}catch(r){return console.error("Login error:",r),this.error.set(r.message||"An error occurred during login"),!1}})}logout(){return p(this,null,function*(){yield k.auth.signOut(),this.user.set(null),this.pendingVerification.set(!1),this.clearPendingRegistrationData()})}storePendingRegistrationData(t){if(this.isBrowser)try{localStorage.setItem("pendingRegistration",JSON.stringify(t))}catch(e){console.error("Failed to store registration data:",e)}}loadPendingRegistrationData(){if(this.isBrowser)try{let t=localStorage.getItem("pendingRegistration");if(t){let e=JSON.parse(t);this.pendingRegistration.set(e),console.log("Loaded pending registration data for:",e.email)}}catch(t){console.error("Failed to load registration data:",t)}}clearPendingRegistrationData(){if(this.isBrowser)try{localStorage.removeItem("pendingRegistration")}catch(t){console.error("Failed to clear registration data:",t)}}static \u0275fac=function(e){return new(e||n)(M(ye),M(xe),M("isServer",8))};static \u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"})};var Nu=class n{constructor(t,e){this.auth=t;this.router=e}ngOnInit(){return p(this,null,function*(){console.log("App initializing...");try{yield this.auth.init(),console.log("Auth initialized, current user:",this.auth.user()?"Found":"Not found"),typeof window<"u"&&(window.debugAuth={getUser:()=>this.auth.user(),checkSession:()=>p(this,null,function*(){let{data:t}=yield window.checkSupabaseSession();return t}),navigate:t=>this.router.navigate([t])})}catch(t){console.error("Error during app initialization:",t),this.router.navigate(["/login"])}})}static \u0275fac=function(e){return new(e||n)(A(ge),A(ye))};static \u0275cmp=he({type:n,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"min-h-screen","h-screen","bg-gray-900","text-white","flex"]],template:function(e,r){e&1&&(g(0,"div",0),O(1,"router-outlet"),m())},dependencies:[xs],encapsulation:2})};function A1(n,t){n&1&&(g(0,"span"),_(1,"Signing you in automatically..."),m())}function R1(n,t){n&1&&(g(0,"span"),_(1,"You can now log in to your account."),m())}function N1(n,t){if(n&1&&(g(0,"div",6)(1,"p"),fe(),g(2,"svg",7),O(3,"path",8),m(),it(),g(4,"strong"),_(5,"Email verified!"),m(),R(6,A1,2,0,"span",9)(7,R1,2,0,"span",9),m()()),n&2){let e=E();v(6),b("ngIf",e.autoLoginInProgress()),v(),b("ngIf",!e.autoLoginInProgress())}}function O1(n,t){if(n&1&&(g(0,"p",17),_(1),m()),n&2){let e=E(2);v(),ie(e.error())}}function k1(n,t){if(n&1){let e=me();g(0,"form",10),V("ngSubmit",function(){L(e);let i=E();return j(i.submit())}),O(1,"input",11)(2,"input",12),g(3,"button",13),_(4,"Log In"),m(),R(5,O1,2,1,"p",14),g(6,"p",15),_(7," Don't have an account? "),g(8,"a",16),_(9,"Register"),m()()()}if(n&2){let e=E();b("formGroup",e.form),v(5),b("ngIf",e.error())}}function P1(n,t){n&1&&(g(0,"div",18),O(1,"div",19),m())}var Ou=class n{constructor(t,e,r,i){this.fb=t;this.auth=e;this.router=r;this.route=i;this.form=this.fb.group({email:["",[Ke.required,Ke.email]],password:["",[Ke.required]]}),this.error=this.auth.error}form;error;verificationSuccess=W(!1);autoLoginInProgress=W(!1);ngOnInit(){this.route.queryParams.subscribe(t=>{if(t.verified==="true")if(this.verificationSuccess.set(!0),this.autoLoginInProgress.set(!0),setTimeout(()=>{this.verificationSuccess.set(!1)},5e3),this.auth.user())this.router.navigate(["/chat"]);else{let e=this.auth.pendingRegistration();e&&e.email&&e.password?this.auth.login(e.email,e.password).then(r=>{r?this.router.navigate(["/chat"]):this.autoLoginInProgress.set(!1)}):this.autoLoginInProgress.set(!1)}})}submit(){return p(this,null,function*(){this.form.invalid||(yield this.auth.login(this.form.value.email,this.form.value.password),this.auth.error()||this.router.navigate(["/chat"]))})}static \u0275fac=function(e){return new(e||n)(A(ou),A(ge),A(ye),A(ct))};static \u0275cmp=he({type:n,selectors:[["login-page"]],decls:6,vars:3,consts:[[1,"w-full","max-w-xs","mx-auto"],["src","assets/logo.png","alt","logo",1,"h-25","w-auto","mx-auto"],[1,"h-8"],["class","mb-4 bg-green-50 border border-green-200 text-green-800 p-4 rounded",4,"ngIf"],["class","space-y-4",3,"formGroup","ngSubmit",4,"ngIf"],["class","mt-4 flex justify-center",4,"ngIf"],[1,"mb-4","bg-green-50","border","border-green-200","text-green-800","p-4","rounded"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","inline-block","mr-1"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],[4,"ngIf"],[1,"space-y-4",3,"ngSubmit","formGroup"],["formControlName","email","type","email","placeholder","Email",1,"w-full","border","rounded","px-3","py-2","bg-gray-800","border-gray-700","text-white"],["formControlName","password","type","password","placeholder","Password",1,"w-full","border","rounded","px-3","py-2","bg-gray-800","border-gray-700","text-white"],["type","submit",1,"w-full","bg-purple-600","hover:bg-purple-700","text-white","py-2","rounded"],["class","text-red-500",4,"ngIf"],[1,"text-sm","text-center"],["routerLink","/register",1,"text-blue-600","underline"],[1,"text-red-500"],[1,"mt-4","flex","justify-center"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-purple-600"]],template:function(e,r){e&1&&(g(0,"div",0),O(1,"img",1)(2,"div",2),R(3,N1,8,2,"div",3)(4,k1,10,2,"form",4)(5,P1,2,0,"div",5),m()),e&2&&(v(3),b("ngIf",r.verificationSuccess()),v(),b("ngIf",!r.autoLoginInProgress()),v(),b("ngIf",r.autoLoginInProgress()))},dependencies:[ve,ke,no,iu,ut,Rt,eu,js,Vs,zr,rr],encapsulation:2})};var WC=n=>({"border-red-500":n}),ZC=(n,t)=>({"border-red-500":n,"border-green-500":t}),ku=n=>({"bg-gray-200":n}),F1=n=>({"opacity-50 cursor-not-allowed":n}),YC=(n,t)=>({"text-red-500":n,"text-green-500":t});function L1(n,t){n&1&&(g(0,"span"),_(1,"Email is required"),m())}function j1(n,t){n&1&&(g(0,"span"),_(1,"Please enter a valid email"),m())}function V1(n,t){if(n&1&&(g(0,"p",22),R(1,L1,2,0,"span",23)(2,j1,2,0,"span",23),m()),n&2){let e,r,i=E(2);v(),b("ngIf",(e=i.form.get("email"))==null||e.errors==null?null:e.errors.required),v(),b("ngIf",(r=i.form.get("email"))==null||r.errors==null?null:r.errors.email)}}function U1(n,t){n&1&&(g(0,"span"),_(1,"Username is required"),m())}function B1(n,t){n&1&&(g(0,"span"),_(1,"Username must be at least 3 characters"),m())}function $1(n,t){n&1&&(g(0,"span"),_(1,"Username can only contain letters, numbers, and underscores"),m())}function H1(n,t){if(n&1&&(g(0,"p",22),R(1,U1,2,0,"span",23)(2,B1,2,0,"span",23)(3,$1,2,0,"span",23),m()),n&2){let e,r,i,o=E(2);v(),b("ngIf",(e=o.form.get("username"))==null||e.errors==null?null:e.errors.required),v(),b("ngIf",(r=o.form.get("username"))==null||r.errors==null?null:r.errors.minlength),v(),b("ngIf",(i=o.form.get("username"))==null||i.errors==null?null:i.errors.pattern)}}function G1(n,t){n&1&&(g(0,"p",24),_(1," Password must be at least 8 characters with 1 uppercase letter, 1 number, and 1 symbol "),m())}function z1(n,t){if(n&1&&(g(0,"p",25),_(1),m()),n&2){let e=E(2);b("ngClass",Ko(2,YC,e.passwordHint()&&e.passwordHint().includes("needs"),e.passwordHint()&&e.passwordHint().includes("meets"))),v(),xt(" ",e.passwordHint()," ")}}function q1(n,t){n&1&&(g(0,"span",28),_(1,"Confirm password is required"),m())}function W1(n,t){n&1&&(g(0,"span"),_(1,"Passwords do not match"),m())}function Z1(n,t){n&1&&(g(0,"span"),_(1,"Passwords match"),m())}function Y1(n,t){if(n&1&&(g(0,"span",29),R(1,W1,2,0,"span",23)(2,Z1,2,0,"span",23),m()),n&2){let e=E(3);b("ngClass",Ko(3,YC,e.passwordsMatch()===!1,e.passwordsMatch()===!0)),v(),b("ngIf",e.passwordsMatch()===!1),v(),b("ngIf",e.passwordsMatch()===!0)}}function K1(n,t){if(n&1&&(g(0,"p",26),R(1,q1,2,0,"span",19)(2,Y1,3,6,"span",27),m()),n&2){let e,r,i=E(2);v(),b("ngIf",(e=i.form.get("confirmPassword"))==null||e.errors==null?null:e.errors.required),v(),b("ngIf",((r=i.form.get("confirmPassword"))==null?null:r.dirty)&&!(!((r=i.form.get("confirmPassword"))==null||r.errors==null)&&r.errors.required))}}function J1(n,t){if(n&1&&(g(0,"p",28),_(1),m()),n&2){let e=E(2);v(),ie(e.error())}}function Q1(n,t){if(n&1){let e=me();g(0,"form",5),V("ngSubmit",function(){L(e);let i=E();return j(i.submit())}),g(1,"div",6),O(2,"input",7),R(3,V1,3,2,"p",8),m(),g(4,"div",6),O(5,"input",9),R(6,H1,4,3,"p",8),m(),g(7,"div",6),O(8,"input",10),g(9,"div",11)(10,"div",12),O(11,"div",13)(12,"div",13)(13,"div",13)(14,"div",13),m(),R(15,G1,2,0,"p",14)(16,z1,2,5,"p",15),m()(),g(17,"div",6),O(18,"input",16),R(19,K1,3,2,"p",17),m(),g(20,"button",18),_(21," Register "),m(),R(22,J1,2,1,"p",19),g(23,"p",20),_(24," Already have an account? "),g(25,"a",21),_(26,"Log In"),m()()()}if(n&2){let e,r,i,o,s,a,l,c,u,d=E();b("formGroup",d.form),v(2),b("ngClass",Yn(25,WC,((e=d.form.get("email"))==null?null:e.invalid)&&((e=d.form.get("email"))==null?null:e.touched))),v(),b("ngIf",((r=d.form.get("email"))==null?null:r.invalid)&&((r=d.form.get("email"))==null?null:r.touched)),v(2),b("ngClass",Yn(27,WC,((i=d.form.get("username"))==null?null:i.invalid)&&((i=d.form.get("username"))==null?null:i.touched))),v(),b("ngIf",((o=d.form.get("username"))==null?null:o.invalid)&&((o=d.form.get("username"))==null?null:o.touched)),v(2),b("ngClass",Ko(29,ZC,((s=d.form.get("password"))==null?null:s.invalid)&&((s=d.form.get("password"))==null?null:s.touched),d.passwordStrength()===4&&((s=d.form.get("password"))==null?null:s.value))),v(3),Zn("background-color",d.passwordStrength()>=1?d.getStrengthColor():""),b("ngClass",Yn(32,ku,d.passwordStrength()<1)),v(),Zn("background-color",d.passwordStrength()>=2?d.getStrengthColor():""),b("ngClass",Yn(34,ku,d.passwordStrength()<2)),v(),Zn("background-color",d.passwordStrength()>=3?d.getStrengthColor():""),b("ngClass",Yn(36,ku,d.passwordStrength()<3)),v(),Zn("background-color",d.passwordStrength()>=4?d.getStrengthColor():""),b("ngClass",Yn(38,ku,d.passwordStrength()<4)),v(),b("ngIf",!((a=d.form.get("password"))!=null&&a.dirty)),v(),b("ngIf",(l=d.form.get("password"))==null?null:l.dirty),v(2),b("ngClass",Ko(40,ZC,d.passwordsMatch()===!1&&((c=d.form.get("confirmPassword"))==null?null:c.dirty)||((c=d.form.get("confirmPassword"))==null||c.errors==null?null:c.errors.required)&&((c=d.form.get("confirmPassword"))==null?null:c.touched),d.passwordsMatch()===!0&&((c=d.form.get("confirmPassword"))==null?null:c.dirty))),v(),b("ngIf",(u=d.form.get("confirmPassword"))==null?null:u.touched),v(),b("disabled",d.form.invalid||d.passwordStrength()<4||d.passwordsMatch()!==!0)("ngClass",Yn(43,F1,d.form.invalid||d.passwordStrength()<4||d.passwordsMatch()!==!0)),v(2),b("ngIf",d.error())}}function X1(n,t){n&1&&(g(0,"div",30)(1,"div",31)(2,"h3",32),_(3,"Email Verified!"),m(),g(4,"p",33),fe(),g(5,"svg",34),O(6,"path",35),m(),it(),g(7,"span"),_(8,"Your email has been verified successfully!"),m()(),g(9,"p",36),_(10,"You will be automatically redirected to the app in a few seconds..."),m()()())}function eN(n,t){if(n&1&&(g(0,"div",30)(1,"div",37)(2,"h3",32),_(3,"Verify Your Email"),m(),g(4,"p",33),_(5," We've sent a verification link to "),g(6,"strong"),_(7),m()(),g(8,"p",33),_(9,"Please check your email and click the verification link to complete your registration."),m(),g(10,"p",33),fe(),g(11,"svg",38),O(12,"path",39),m(),it(),g(13,"span",40),_(14,"Once verified, you'll be automatically signed in and redirected to the app!"),m()()(),g(15,"div",41)(16,"a",42),_(17," Return to login page "),m()()()),n&2){let e=E();v(7),ie(e.registeredEmail())}}var Pu=class n{form;error;isRegistered=W(!1);registeredEmail=W("");passwordHint=W("");passwordStrength=W(0);passwordsMatch=W(null);verificationSuccess=W(!1);auth=w(ge);router=w(ye);fb=w(ou);constructor(){this.form=this.fb.group({email:["",[Ke.required,Ke.email]],username:["",[Ke.required,Ke.minLength(3),Ke.pattern(/^[a-zA-Z0-9_]+$/)]],password:["",[Ke.required,Ke.minLength(8),this.passwordStrengthValidator()]],confirmPassword:["",[Ke.required]]},{validators:this.passwordMatchValidator}),this.error=this.auth.error,this.form.get("password")?.valueChanges.subscribe(t=>{this.updatePasswordHint(t),this.checkPasswordsMatch()}),this.form.get("confirmPassword")?.valueChanges.subscribe(()=>{this.checkPasswordsMatch()}),st(()=>{this.auth.verificationComplete()&&(console.log("Verification completed, showing success message..."),this.verificationSuccess.set(!0),setTimeout(()=>{console.log("Redirecting to chat after verification..."),this.router.navigate(["/chat"])},3e3))})}updatePasswordHint(t){if(!t){this.passwordHint.set(""),this.passwordStrength.set(0);return}let e=t.length>=8,r=/[A-Z]/.test(t),i=/[a-z]/.test(t),o=/[0-9]/.test(t),s=/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(t),a=[];e||a.push("8+ characters"),r||a.push("uppercase letter"),o||a.push("number"),s||a.push("symbol");let l=0;e&&l++,(r||i)&&l++,o&&l++,s&&l++,this.passwordStrength.set(l),a.length>0?this.passwordHint.set(`Password needs: ${a.join(", ")}`):this.passwordHint.set("Password meets all requirements")}passwordStrengthValidator(){return t=>{let e=t.value;if(!e)return{required:!0};let r=e.length>=8,i=/[A-Z]/.test(e),o=/[a-z]/.test(e),s=/[0-9]/.test(e),a=/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e);return r&&(i||o)&&s&&a?null:{passwordStrength:{hasLength:r,hasUppercase:i,hasLowercase:o,hasNumber:s,hasSymbol:a}}}}passwordMatchValidator(t){let e=t.get("password")?.value,r=t.get("confirmPassword")?.value;return e===r?null:{passwordMismatch:!0}}submit(){return p(this,null,function*(){if(Object.keys(this.form.controls).forEach(o=>{let s=this.form.get(o);s?.markAsTouched(),s?.markAsDirty()}),this.form.invalid||this.passwordStrength()<4||this.passwordsMatch()!==!0)return;let t=this.form.value.email,e=this.form.value.password,r=this.form.value.username;(yield this.auth.register(t,e,r))&&(this.registeredEmail.set(t),this.isRegistered.set(!0))})}getStrengthColor(){switch(this.passwordStrength()){case 1:return"#ef4444";case 2:return"#f97316";case 3:return"#eab308";case 4:return"#22c55e";default:return"#e5e7eb"}}checkPasswordsMatch(){let t=this.form.get("password")?.value,e=this.form.get("confirmPassword")?.value;if(!e){this.passwordsMatch.set(null);return}this.passwordsMatch.set(t===e)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=he({type:n,selectors:[["register-page"]],decls:6,vars:3,consts:[[1,"w-full","max-w-xs","mx-auto"],["src","assets/logo.png","alt","logo",1,"h-25","w-auto","mx-auto"],[1,"h-8"],["class","space-y-4",3,"formGroup","ngSubmit",4,"ngIf"],["class","space-y-4",4,"ngIf"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"space-y-1"],["formControlName","email","type","email","placeholder","Email",1,"w-full","border","rounded","px-3","py-2","bg-gray-800","border-gray-700","text-white",3,"ngClass"],["class","text-xs text-red-500",4,"ngIf"],["formControlName","username","type","text","placeholder","Username",1,"w-full","border","rounded","px-3","py-2","bg-gray-800","border-gray-700","text-white",3,"ngClass"],["formControlName","password","type","password","placeholder","Password",1,"w-full","border","rounded","px-3","py-2","bg-gray-800","border-gray-700","text-white",3,"ngClass"],[1,"mt-1"],[1,"flex","space-x-1","mb-1"],[1,"h-1","flex-1","rounded-full",3,"ngClass"],["class","text-xs text-gray-600",4,"ngIf"],["class","text-xs",3,"ngClass",4,"ngIf"],["formControlName","confirmPassword","type","password","placeholder","Confirm Password",1,"w-full","border","rounded","px-3","py-2","bg-gray-800","border-gray-700","text-white",3,"ngClass"],["class","text-xs mt-1",4,"ngIf"],["type","submit",1,"w-full","bg-purple-600","hover:bg-purple-700","text-white","py-2","rounded",3,"disabled","ngClass"],["class","text-red-500",4,"ngIf"],[1,"text-sm","text-center"],["routerLink","/login",1,"text-blue-600","underline"],[1,"text-xs","text-red-500"],[4,"ngIf"],[1,"text-xs","text-gray-600"],[1,"text-xs",3,"ngClass"],[1,"text-xs","mt-1"],[3,"ngClass",4,"ngIf"],[1,"text-red-500"],[3,"ngClass"],[1,"space-y-4"],[1,"bg-green-50","border","border-green-200","text-green-800","p-4","rounded"],[1,"font-bold","text-lg","mb-2"],[1,"mb-3"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","inline-block","mr-1","text-green-500"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],[1,"text-sm"],[1,"bg-blue-50","border","border-blue-200","text-blue-800","p-4","rounded"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","inline-block","mr-1","text-blue-500"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule","evenodd"],[1,"text-sm","italic"],[1,"text-center","mt-4"],["routerLink","/login",1,"text-blue-600","underline","text-sm"]],template:function(e,r){e&1&&(g(0,"div",0),O(1,"img",1)(2,"div",2),R(3,Q1,27,45,"form",3)(4,X1,11,0,"div",4)(5,eN,18,1,"div",4),m()),e&2&&(v(3),b("ngIf",!r.isRegistered()&&!r.verificationSuccess()),v(),b("ngIf",r.verificationSuccess()),v(),b("ngIf",r.isRegistered()&&!r.verificationSuccess()))},dependencies:[ve,is,ke,no,iu,ut,Rt,eu,js,Vs,zr,rr],encapsulation:2})};function tN(n,t){n&1&&(g(0,"div",12),O(1,"div",13),m())}function nN(n,t){if(n&1&&(g(0,"div",4)(1,"div",5)(2,"h3",6),_(3,"Email Verified!"),m(),g(4,"p",7),fe(),g(5,"svg",8),O(6,"path",9),m(),it(),g(7,"span"),_(8,"Your email has been verified successfully!"),m()(),g(9,"p",10),_(10,"You will be automatically logged in and redirected to the app in a few seconds..."),m()(),R(11,tN,2,0,"div",11),m()),n&2){let e=E();v(11),b("ngIf",e.loginInProgress())}}function rN(n,t){if(n&1&&(g(0,"div",4)(1,"div",14)(2,"h3",6),_(3,"Verification Issue"),m(),g(4,"p",7),_(5),m(),g(6,"div",15)(7,"a",16),_(8,"Go to login page"),m()()()()),n&2){let e=E();v(5),ie(e.verificationError())}}var Fu=class n{verificationSuccess=W(!1);verificationError=W(null);loginInProgress=W(!1);auth=w(ge);router=w(ye);route=w(ct);constructor(){st(()=>{this.auth.user()&&(console.log("User session detected, redirecting to chat..."),setTimeout(()=>{this.router.navigate(["/chat"])},3e3))})}ngOnInit(){if(this.verificationSuccess.set(!0),this.auth.user())setTimeout(()=>{this.router.navigate(["/chat"])},3e3);else{let t=this.auth.pendingRegistration();t&&t.email&&t.password?(this.loginInProgress.set(!0),console.log("Attempting auto-login after email verification"),this.auth.login(t.email,t.password).then(e=>{e||(console.log("Auto-login failed after verification"),this.loginInProgress.set(!1),this.verificationError.set("Auto-login failed. Please log in manually."))})):setTimeout(()=>{this.auth.user()||this.verificationError.set("Session not established after verification. Please try logging in.")},5e3)}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=he({type:n,selectors:[["verify-email-page"]],decls:5,vars:2,consts:[[1,"w-full","max-w-xs","mx-auto"],["src","assets/logo.png","alt","logo",1,"h-25","w-auto","mx-auto"],[1,"h-8"],["class","space-y-4",4,"ngIf"],[1,"space-y-4"],[1,"bg-green-50","border","border-green-200","text-green-800","p-4","rounded"],[1,"font-bold","text-lg","mb-2"],[1,"mb-3"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","inline-block","mr-1","text-green-500"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],[1,"text-sm"],["class","mt-4 flex justify-center",4,"ngIf"],[1,"mt-4","flex","justify-center"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-purple-600"],[1,"bg-red-50","border","border-red-200","text-red-800","p-4","rounded"],[1,"text-center","mt-4"],["routerLink","/login",1,"text-blue-600","underline","text-sm"]],template:function(e,r){e&1&&(g(0,"div",0),O(1,"img",1)(2,"div",2),R(3,nN,12,1,"div",3)(4,rN,9,1,"div",3),m()),e&2&&(v(3),b("ngIf",r.verificationSuccess()),v(),b("ngIf",r.verificationError()))},dependencies:[ve,ke,zr,rr],encapsulation:2})};var ft=class n{imageCache=new Map;inProgressFetches=new Map;MAX_CACHE_SIZE=50;CACHE_EXPIRY=24*60*60*1e3;CACHE_VERSION="v1";accessOrder=[];isBrowser;constructor(){this.isBrowser=gt(w(xe)),this.isBrowser&&this.initializeFromStorage()}initializeFromStorage(){try{if(localStorage.getItem("image-cache-version")!==this.CACHE_VERSION)console.log("Cache version mismatch, clearing cache"),localStorage.removeItem("image-cache"),localStorage.setItem("image-cache-version",this.CACHE_VERSION);else{let e=localStorage.getItem("image-cache");if(e){let r=JSON.parse(e),i=Date.now(),o=Object.entries(r).filter(([s,a])=>!a.timestamp||i-a.timestamp<this.CACHE_EXPIRY);this.imageCache=new Map(o.map(([s,a])=>[s,a.url])),this.accessOrder=Array.from(this.imageCache.keys()),console.log(`Loaded ${this.imageCache.size} images from cache`)}}}catch(t){console.error("Error loading image cache from localStorage",t),this.imageCache.clear(),this.accessOrder=[]}}getImage(t,e=!1){return p(this,null,function*(){if(!t||t==="null"||t==="undefined")return t;if(this.updateAccessOrder(t),!e&&this.imageCache.has(t))return this.imageCache.get(t);if(this.inProgressFetches.has(t))return this.inProgressFetches.get(t);let r=this.fetchAndCacheImage(t);this.inProgressFetches.set(t,r);try{let i=yield r;return this.inProgressFetches.delete(t),i}catch(i){return this.inProgressFetches.delete(t),console.error(`Error fetching image: ${t}`,i),t}})}prefetchImage(t){!t||t==="null"||t==="undefined"||this.imageCache.has(t)||this.getImage(t).catch(()=>{})}storeImage(t,e){!t||!e||(this.imageCache.set(t,e),this.updateAccessOrder(t),this.evictCacheIfNeeded(),this.saveCache())}clearCache(){this.imageCache.clear(),this.accessOrder=[],this.saveCache()}updateAccessOrder(t){let e=this.accessOrder.indexOf(t);e>-1&&this.accessOrder.splice(e,1),this.accessOrder.push(t)}evictCacheIfNeeded(){for(;this.imageCache.size>this.MAX_CACHE_SIZE&&this.accessOrder.length>0;){let t=this.accessOrder.shift();t&&(this.imageCache.delete(t),console.log(`Evicted image from cache: ${t}`))}}saveCache(){if(this.isBrowser)try{let t=Date.now(),e=Object.fromEntries(Array.from(this.imageCache.entries()).map(([r,i])=>[r,{url:i,timestamp:t}]));localStorage.setItem("image-cache",JSON.stringify(e)),localStorage.setItem("image-cache-version",this.CACHE_VERSION)}catch(t){console.error("Error saving image cache to localStorage",t)}}fetchAndCacheImage(t){return p(this,null,function*(){try{let e=yield fetch(t,{cache:"no-store",credentials:"same-origin",headers:{"Cache-Control":"no-cache"}});if(!e.ok)throw new Error(`Failed to fetch image: ${e.status} ${e.statusText}`);let r=yield e.blob();return new Promise((i,o)=>{let s=new FileReader;s.onloadend=()=>{let a=s.result;this.imageCache.set(t,a),this.updateAccessOrder(t),this.evictCacheIfNeeded(),this.saveCache(),i(a)},s.onerror=o,s.readAsDataURL(r)})}catch(e){throw console.error(`Error fetching image: ${t}`,e),e}})}static \u0275fac=function(e){return new(e||n)};static \u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"})};var kt=class n{auth=w(ge);ngZone=w(se);imageCache=w(ft);isBrowser;guilds=W([]);channels=W([]);activeGuild=W(null);activeChannel=W(null);guildsSubscription=null;channelsSubscription=null;_lastLoadedGuildId=null;constructor(t){this.isBrowser=gt(t),this.isBrowser?(console.log("Guild service initializing in browser"),this.loadGuilds(),this.setupGuildsSubscription()):console.log("Guild service running in SSR mode - limited functionality")}loadGuilds(){return p(this,null,function*(){if(!this.isBrowser){console.log("Skipping loadGuilds in SSR mode");return}try{console.log("Loading guilds from database");let{data:t,error:e}=yield k.from("guilds").select("*").order("created_at",{ascending:!0});if(e){console.error("Error loading guilds:",e),this.resetState();return}if(t&&t.length>0){console.log(`Loaded ${t.length} guilds from database`);let r=yield Promise.all(t.map(i=>p(this,null,function*(){if(i.image_url&&i.image_url.includes("token=")){let o=yield this.refreshGuildImageUrl(i.id,i.image_url);o&&(i.image_url=o,this.imageCache.prefetchImage(o))}else i.image_url&&this.imageCache.prefetchImage(i.image_url);return i})));this.guilds.set(r),this.activeGuild()||this.setActiveGuild(r[0])}else console.log("No guilds found in database"),this.resetState()}catch(t){console.error("Error in loadGuilds:",t),this.resetState()}})}resetState(){this.isBrowser&&(console.log("Resetting guild service state"),this.guilds.set([]),this.channels.set([]),this.activeGuild.set(null),this.activeChannel.set(null))}loadChannels(t){return p(this,null,function*(){if(!this.isBrowser){console.log("Skipping loadChannels in SSR mode");return}try{if(!t){console.log("Cannot load channels: No guild ID provided"),this.channels.set([]),this.activeChannel.set(null);return}if(this._lastLoadedGuildId===t&&this.channels().length>0){console.log(`Channels for guild ${t} already loaded, skipping`);return}this._lastLoadedGuildId=t,console.log(`Loading channels for guild ${t} from database`);let{data:e,error:r}=yield k.from("channels").select("*").eq("guild_id",t).order("created_at",{ascending:!0});if(r){console.error("Error loading channels:",r),this.channels.set([]),this.activeChannel.set(null);return}if(e&&e.length>0){console.log(`Loaded ${e.length} channels from database`),this.channels.set(e);let l=e.find(h=>h.name==="general"),c=e[0],u=this.activeChannel();u&&e.some(h=>h.id===u.id)?console.log("Keeping current active channel"):l?(console.log('Setting "general" as active channel'),this.setActiveChannel(l)):c?(console.log("Setting first channel as active"),this.setActiveChannel(c)):(console.log("No channels available to set as active"),this.activeChannel.set(null));return}console.log("No channels found for guild, checking if we should create default");let{data:i,error:o}=yield k.from("guilds").select("*").eq("id",t).single();if(o||!i){console.error("Could not verify guild exists:",o),this.channels.set([]),this.activeChannel.set(null);return}let s=this.auth.user(),a=s&&i.owner_id===s.id;console.log("Guild exists but has no channels."),a&&console.log("User is owner but no autoCreate was specified"),this.channels.set([]),this.activeChannel.set(null)}catch(e){console.error("Error in loadChannels:",e),this.channels.set([]),this.activeChannel.set(null)}})}createGuild(t,e,r){return p(this,null,function*(){if(!this.isBrowser)throw console.log("Skipping createGuild in SSR mode"),new Error("Cannot create guild in server-side rendering");try{console.log(`Creating new guild: ${t}`);let i=this.auth.user();if(!i)throw new Error("Not authenticated");let{data:o}=yield k.auth.getSession();if(!o.session)throw new Error("No active session");let{data:s,error:a}=yield k.from("guilds").insert({name:t,description:e,owner_id:i.id}).select().single();if(a)throw console.error("Error creating guild:",a),a;console.log("Guild created successfully:",s);let l=s;if(r){let h=yield this.uploadGuildImage(l.id,r);if(h){let{data:f,error:y}=yield k.from("guilds").update({image_url:h}).eq("id",l.id).select().single();y?console.error("Error updating guild with image:",y):f&&(l.image_url=f.image_url)}}let c=yield this.createDefaultChannel(l.id),u=this.guildsSubscription;if(this.guildsSubscription=null,this.guilds().some(h=>h.id===l.id)||this.guilds.update(h=>[...h,l]),this.activeGuild.set(l),c){this.channels.set([c]),this.activeChannel.set(c);let h=this.channelsSubscription;this.channelsSubscription=null,setTimeout(()=>{this.setupChannelsSubscription(l.id),this.channelsSubscription=h},1e3)}else this.channels.set([]),this.activeChannel.set(null),yield this.loadChannels(l.id);return setTimeout(()=>{this.guildsSubscription=u},1e3),l}catch(i){throw console.error("Error in createGuild:",i),i}})}createDefaultChannel(t){return p(this,null,function*(){if(!this.isBrowser)return null;try{console.log(`Creating default channel for guild ${t}`);let{data:e,error:r}=yield k.from("channels").insert({guild_id:t,name:"general",description:"General discussion"}).select().single();return r?(console.error("Error creating default channel:",r),null):(console.log("Default channel created successfully:",e),e)}catch(e){return console.error("Error creating default channel:",e),null}})}createChannel(t,e,r){return p(this,null,function*(){if(!this.isBrowser)throw console.log("Skipping createChannel in SSR mode"),new Error("Cannot create channel in server-side rendering");try{console.log(`Creating new channel: ${e} in guild ${t}`);let i=this.auth.user();if(!i)throw new Error("Not authenticated");let o=this.guilds().find(d=>d.id===t);if(!o)throw new Error("Guild not found");if(o.owner_id!==i.id)throw new Error("Only the guild owner can create channels");if(!/^[a-zA-Z0-9-]+$/.test(e))throw new Error("Channel names can only contain letters, numbers, and dashes");let{data:a}=yield k.auth.getSession();if(!a.session)throw new Error("No active session");let{data:l,error:c}=yield k.from("channels").insert({guild_id:t,name:e,description:r}).select().single();if(c)throw console.error("Error creating channel:",c),c;console.log("Channel created successfully:",l);let u=l;return this.channels.update(d=>[...d,u]),this.setActiveChannel(u),u}catch(i){throw console.error("Error in createChannel:",i),i}})}updateGuild(t,e,r,i){return p(this,null,function*(){if(!this.isBrowser)throw console.log("Skipping updateGuild in SSR mode"),new Error("Cannot update guild in server-side rendering");try{console.log(`Updating guild ${t}: ${e}`);let o=this.auth.user();if(!o)throw new Error("Not authenticated");let s=this.guilds().find(h=>h.id===t);if(!s)throw new Error("Guild not found");if(s.owner_id!==o.id)throw new Error("Only the guild owner can update the guild");let{data:a}=yield k.auth.getSession();if(!a.session)throw new Error("No active session");let l=s.image_url;if(i){let h=yield this.uploadGuildImage(t,i);h&&(l=h)}let{data:c,error:u}=yield k.from("guilds").update({name:e,description:r,image_url:l}).eq("id",t).select().single();if(u)throw console.error("Error updating guild:",u),u;console.log("Guild updated successfully:",c);let d=c;return this.guilds.update(h=>h.map(f=>f.id===t?d:f)),this.activeGuild()?.id===t&&this.activeGuild.set(d),d}catch(o){throw console.error("Error in updateGuild:",o),o}})}uploadGuildImage(t,e){return p(this,null,function*(){if(!this.isBrowser)return null;try{if(console.log(`Uploading image for guild ${t}`),!e.type.startsWith("image/"))throw new Error("Only image files are allowed");let r=5*1024*1024;if(e.size>r)throw new Error("Image size must be less than 5MB");let i=e.name.split(".").pop(),a=`guild-images/${`${Date.now()}.${i}`}`;console.log(`Uploading to path: ${a}`);let l=yield this.fileToDataUrl(e),{error:c}=yield k.storage.from("guilds").upload(a,e);if(c)throw console.error("Error uploading guild image:",c),c;let{data:u}=yield k.storage.from("guilds").createSignedUrl(a,31536e3);if(!u||!u.signedUrl)throw new Error("Could not get signed URL for guild image");return l&&this.imageCache.storeImage(u.signedUrl,l),console.log("Guild image uploaded successfully:",u.signedUrl),u.signedUrl}catch(r){return console.error("Error in uploadGuildImage:",r),null}})}fileToDataUrl(t){return new Promise((e,r)=>{let i=new FileReader;i.onloadend=()=>e(i.result),i.onerror=r,i.readAsDataURL(t)})}refreshGuildImageUrl(t,e){return p(this,null,function*(){try{let r=e.split("/"),o=r[r.length-1].split("?")[0];if(!o)return null;let s=`guild-images/${o}`,{data:a}=yield k.storage.from("guilds").createSignedUrl(s,31536e3);if(!a||!a.signedUrl)return console.error("Could not refresh signed URL for guild image"),null;try{let l=yield this.imageCache.getImage(e,!1);l&&l!==e&&this.imageCache.storeImage(a.signedUrl,l)}catch{}return console.log("Refreshed guild image URL:",a.signedUrl),a.signedUrl}catch(r){return console.error("Error refreshing guild image URL:",r),null}})}deleteGuild(t){return p(this,null,function*(){if(!this.isBrowser)throw console.log("Skipping deleteGuild in SSR mode"),new Error("Cannot delete guild in server-side rendering");try{console.log(`Deleting guild ${t}`);let e=this.auth.user();if(!e)throw new Error("Not authenticated");let r=this.guilds().find(s=>s.id===t);if(!r)throw new Error("Guild not found");if(r.owner_id!==e.id)throw new Error("Only the guild owner can delete the guild");let{data:i}=yield k.auth.getSession();if(!i.session)throw new Error("No active session");let{error:o}=yield k.from("guilds").delete().eq("id",t);if(o)throw console.error("Error deleting guild:",o),o;if(console.log("Guild deleted successfully"),this.guilds.update(s=>s.filter(a=>a.id!==t)),this.activeGuild()?.id===t){let s=this.guilds();s.length>0?this.setActiveGuild(s[0]):(this.activeGuild.set(null),this.channels.set([]),this.activeChannel.set(null))}return!0}catch(e){throw console.error("Error in deleteGuild:",e),e}})}setActiveGuild(t){return p(this,null,function*(){if(this.isBrowser){if(console.log(`Setting active guild: ${t.name}`),t.image_url&&t.image_url.includes("token=")){let e=yield this.refreshGuildImageUrl(t.id,t.image_url);e&&(t.image_url=e,this.guilds.update(r=>r.map(i=>i.id===t.id?P(D({},i),{image_url:e}):i)))}this.activeGuild.set(t),this.channels.set([]),this.activeChannel.set(null),yield this.loadChannels(t.id),this.setupChannelsSubscription(t.id)}})}setActiveChannel(t){this.isBrowser&&(console.log(`Setting active channel: ${t.name}`),this.activeChannel.set(t))}setupGuildsSubscription(){if(this.isBrowser)try{if(this.guildsSubscription&&(this.guildsSubscription.unsubscribe(),this.guildsSubscription=null),!this.auth.user()){console.log("Cannot setup guilds subscription: No authenticated user");return}console.log("Setting up realtime subscription for guilds");let e=`public:guilds:${Date.now()}`;this.guildsSubscription=k.channel(e).on("postgres_changes",{event:"*",schema:"public",table:"guilds"},r=>{try{console.log("Received guild event from realtime:",r),this.ngZone.run(()=>{if(r.eventType==="INSERT"){let i=r.new;this.guilds().some(s=>s.id===i.id)?console.log("Guild already exists, not adding duplicate:",i.id):(console.log("Adding new guild to list:",i),this.guilds.update(s=>[...s,i]))}else if(r.eventType==="UPDATE"){let i=r.new;this.guilds.update(o=>o.map(s=>s.id===i.id?i:s)),this.activeGuild()?.id===i.id&&this.activeGuild.set(i)}else if(r.eventType==="DELETE"){let i=r.old;if(this.guilds.update(o=>o.filter(s=>s.id!==i.id)),this.activeGuild()?.id===i.id){let o=this.guilds();o.length>0?this.setActiveGuild(o[0]):(this.activeGuild.set(null),this.channels.set([]),this.activeChannel.set(null))}}})}catch(i){console.error("Error processing guilds realtime event:",i)}}).subscribe((r,i)=>{console.log("Guilds realtime subscription status:",r,i||"")}),console.log("Guilds subscription setup complete")}catch(t){console.error("Error setting up guilds subscription:",t)}}setupChannelsSubscription(t){if(this.isBrowser)try{if(this.channelsSubscription&&(this.channelsSubscription.unsubscribe(),this.channelsSubscription=null),!t){console.log("Cannot setup channels subscription: No guild ID provided");return}console.log(`Setting up realtime subscription for channels in guild ${t}`);let e=`public:channels:guild_${t}_${Date.now()}`;this.channelsSubscription=k.channel(e).on("postgres_changes",{event:"*",schema:"public",table:"channels",filter:`guild_id=eq.${t}`},r=>{try{console.log("Received channel event from realtime:",r),this.ngZone.run(()=>{if(r.eventType==="INSERT"){let i=r.new;this.channels().some(s=>s.id===i.id)||(console.log("Adding new channel to list:",i),this.channels.update(s=>[...s,i]))}else if(r.eventType==="UPDATE"){let i=r.new;this.channels.update(o=>o.map(s=>s.id===i.id?i:s)),this.activeChannel()?.id===i.id&&this.activeChannel.set(i)}else if(r.eventType==="DELETE"){let i=r.old;if(this.channels.update(o=>o.filter(s=>s.id!==i.id)),this.activeChannel()?.id===i.id){let o=this.channels();o.length>0?this.setActiveChannel(o[0]):this.activeChannel.set(null)}}})}catch(i){console.error("Error processing channels realtime event:",i)}}).subscribe((r,i)=>{console.log("Channels realtime subscription status:",r,i||"")}),console.log("Channels subscription setup complete")}catch(e){console.error("Error setting up channels subscription:",e)}}ngOnDestroy(){this.isBrowser&&(console.log("Guild service destroying - cleaning up subscriptions"),this.guildsSubscription&&(this.guildsSubscription.unsubscribe(),this.guildsSubscription=null),this.channelsSubscription&&(this.channelsSubscription.unsubscribe(),this.channelsSubscription=null))}static \u0275fac=function(e){return new(e||n)(M(xe))};static \u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"})};var sr=class n{auth=w(ge);guildService=w(kt);ngZone=w(se);isBrowser;messages=W([]);channelSubscription=null;reconnectAttempts=0;maxReconnectAttempts=5;reconnectTimeout=null;connectionCheckInterval=null;isSettingUpSubscription=!1;messageCache={};lastMessageTimestamp={};constructor(t){if(this.isBrowser=gt(t),!this.isBrowser){console.log("ChatService running in SSR mode - limited functionality");return}try{console.log("ChatService initializing in browser"),st(()=>{let e=this.guildService.activeChannel();e?(console.log(`Active channel changed to: ${e.name}`),this.messageCache[e.id]?(console.log(`Using cached messages for channel ${e.id}`),this.messages.set(this.messageCache[e.id]),this.loadNewMessagesForChannel(e.id)):this.loadMessages(e.id),this.safeSetupRealtimeSubscription(e.id)):(console.log("No active channel selected"),this.safeRemoveRealtimeSubscription(),this.messages.set([]))}),this.connectionCheckInterval=setInterval(()=>{this.checkConnectionStatus()},6e4)}catch(e){console.error("Error in ChatService constructor:",e)}}ngOnDestroy(){this.isBrowser&&(this.safeRemoveRealtimeSubscription(),this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.connectionCheckInterval&&(clearInterval(this.connectionCheckInterval),this.connectionCheckInterval=null))}checkConnectionStatus(){return p(this,null,function*(){if(this.isBrowser)try{if(!this.channelSubscription&&!this.isSettingUpSubscription){console.log("Connection check: Not subscribed, attempting to reconnect");let t=this.guildService.activeChannel();t?this.safeSetupRealtimeSubscription(t.id):console.log("No active channel to subscribe to")}}catch(t){console.error("Error in checkConnectionStatus:",t)}})}loadNewMessagesForChannel(t){return p(this,null,function*(){if(!this.isBrowser||!t||!this.lastMessageTimestamp[t])return;let e=this.lastMessageTimestamp[t];console.log(`Checking for new messages in channel ${t} since ${e}`);try{let{data:r,error:i}=yield k.from("messages").select().eq("channel_id",t).gt("inserted_at",e).order("inserted_at",{ascending:!0});if(i){console.error("Error loading new messages:",i);return}if(r&&r.length>0){console.log(`Loaded ${r.length} new messages from database`);let o=this.messageCache[t]||[],s=new Set(r.map(l=>l.id)),a=[...o.filter(l=>!s.has(l.id)),...r].sort((l,c)=>new Date(l.inserted_at).getTime()-new Date(c.inserted_at).getTime());if(this.messageCache[t]=a,this.messages.set(a),r.length>0){let l=r.map(u=>u.inserted_at),c=l.reduce((u,d)=>new Date(d)>new Date(u)?d:u,l[0]);this.lastMessageTimestamp[t]=c}}else console.log("No new messages found")}catch(r){console.error("Exception loading new messages:",r)}})}loadMessages(t){return p(this,null,function*(){if(this.isBrowser){if(!t){console.log("Cannot load messages: No channel ID provided"),this.messages.set([]);return}console.log(`Loading messages for channel ${t} from database`);try{let{data:e,error:r}=yield k.from("messages").select().eq("channel_id",t).order("inserted_at",{ascending:!0});if(r){console.error("Error loading messages:",r),this.messages.set([]);return}if(e){if(console.log(`Loaded ${e.length} messages from database`),this.messageCache[t]=[...e],this.messages.set(e||[]),e.length>0){let i=e.map(s=>s.inserted_at),o=i.reduce((s,a)=>new Date(a)>new Date(s)?a:s,i[0]);this.lastMessageTimestamp[t]=o}}else this.messages.set([])}catch(e){console.error("Exception loading messages:",e),this.messages.set([])}}})}safeRemoveRealtimeSubscription(){if(this.isBrowser)try{this.channelSubscription&&(console.log("Removing existing subscription"),this.channelSubscription.unsubscribe(),this.channelSubscription=null)}catch(t){console.error("Error removing subscription:",t),this.channelSubscription=null}}safeSetupRealtimeSubscription(t){return p(this,null,function*(){if(this.isBrowser){if(this.isSettingUpSubscription){console.log("Already setting up subscription, skipping...");return}this.isSettingUpSubscription=!0;try{yield this.setupRealtimeSubscription(t)}catch(e){console.error("Error in safeSetupRealtimeSubscription:",e)}finally{this.isSettingUpSubscription=!1}}})}setupRealtimeSubscription(t){return p(this,null,function*(){if(this.isBrowser){if(this.safeRemoveRealtimeSubscription(),!t){console.log("Cannot setup realtime subscription: No channel ID provided");return}console.log(`Setting up realtime subscription for channel ${t}`);try{let e=`public:messages:channel_${t}_${Date.now()}`;console.log(`Creating channel: ${e}`),this.channelSubscription=k.channel(e).on("postgres_changes",{event:"*",schema:"public",table:"messages",filter:`channel_id=eq.${t}`},r=>{try{if(console.log("Received event from realtime:",r),r.eventType!=="INSERT"){console.log(`Ignoring ${r.eventType} event`);return}this.ngZone.run(()=>{let i=r.new;this.messages().some(s=>s.id===i.id)?console.log("Message already exists, not adding"):(console.log("Adding new message to list:",i),this.messages.update(s=>[...s,i]))})}catch(i){console.error("Error processing realtime event:",i)}}).subscribe((r,i)=>{if(console.log("Realtime subscription status:",r,i||""),r==="SUBSCRIBED"){console.log("Successfully subscribed to realtime updates"),this.reconnectAttempts=0;let o=this.guildService.activeChannel();o&&this.loadMessages(o.id).then(()=>{console.log("Reloaded messages after subscription")})}else(r==="CHANNEL_ERROR"||r==="TIMED_OUT")&&(console.error(`Channel ${r}, attempting to reconnect`),this.safeScheduleReconnect())}),console.log("Subscription setup complete")}catch(e){console.error("Error setting up realtime subscription:",e),this.safeScheduleReconnect()}}})}safeScheduleReconnect(){if(this.isBrowser)try{this.scheduleReconnect()}catch(t){console.error("Error in safeScheduleReconnect:",t)}}scheduleReconnect(){if(this.isBrowser)if(this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.reconnectAttempts++,this.reconnectAttempts<=this.maxReconnectAttempts){let t=Math.min(1e3*Math.pow(2,this.reconnectAttempts-1),3e4);console.log(`Scheduling reconnect attempt ${this.reconnectAttempts} in ${t}ms`),this.reconnectTimeout=setTimeout(()=>{console.log(`Reconnect attempt ${this.reconnectAttempts}`);let e=this.guildService.activeChannel();e?this.safeSetupRealtimeSubscription(e.id):(console.log("Cannot reconnect: No active channel"),this.reconnectAttempts=0)},t)}else console.error(`Exceeded maximum reconnect attempts (${this.maxReconnectAttempts}). Please reload the page.`)}send(t){return p(this,null,function*(){if(!t.trim()||!this.isBrowser)return;let e=this.guildService.activeChannel();if(!e){console.error("Cannot send message: No active channel");return}let r=this.auth.user();if(!r){console.error("Cannot send message: No authenticated user");return}try{let i=new Date().toISOString(),{data:o,error:s}=yield k.from("messages").insert([{user_id:r.id,content:t,channel_id:e.id}]);if(s)throw console.error("Error sending message:",s),s;console.log("Message sent successfully")}catch(i){console.error("Exception sending message:",i)}})}static \u0275fac=function(e){return new(e||n)(M(xe))};static \u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"})};function oN(n,t){n&1&&Mh(0)}function sN(n,t){if(n&1&&(Nr(0),R(1,oN,1,0,"ng-container",3),Or()),n&2){let e=E(),r=Gl(4);v(),b("ngTemplateOutlet",e.fallbackTemplate||r)}}function aN(n,t){if(n&1&&O(0,"div",6),n&2){let e=E(2);Et("animate-pulse",!e.fastLoading)}}function lN(n,t){if(n&1){let e=me();Nr(0),g(1,"img",4),V("load",function(){L(e);let i=E();return j(i.onLoad())})("error",function(){L(e);let i=E();return j(i.onError())}),m(),R(2,aN,1,2,"div",5),Or()}if(n&2){let e=E();v(),Li("object-cover w-full h-full "+(e.class||"")),Zn("opacity",e.loaded?1:0),b("src",e.cachedSrc||e.src,rn)("alt",e.alt||""),v(),b("ngIf",!e.loaded)}}function cN(n,t){if(n&1&&(g(0,"div",7)(1,"span",8),_(2),zl(3,"firstLetter"),m()()),n&2){let e=E();v(2),ie(d0(3,1,e.fallbackText||e.alt||"?"))}}var gg=class n{transform(t){return t&&t.length>0?t[0].toUpperCase():"?"}static \u0275fac=function(e){return new(e||n)};static \u0275pipe=Bl({name:"firstLetter",type:n,pure:!0})},mn=class n{imageCache=w(ft);ngZone=w(se);src=null;alt="";class="";fallbackText="";loadedEvent=new de;fallbackTemplate=null;loaded=!1;cachedSrc=null;fastLoading=!1;ngOnChanges(){this.src&&(this.loaded=!1,this.loadFromCache())}loadFromCache(){return p(this,null,function*(){if(this.src)try{if(this.fastLoading=!1,this.src.startsWith("data:")){this.cachedSrc=this.src,this.fastLoading=!0,this.checkImageLoaded();return}let t=yield this.imageCache.getImage(this.src);this.cachedSrc=t,t.startsWith("data:")&&(this.fastLoading=!0,this.checkImageLoaded())}catch(t){console.error(`Error loading image from cache: ${this.src}`,t)}})}checkImageLoaded(){if(!this.cachedSrc)return;let t=new Image;t.src=this.cachedSrc,t.complete&&this.ngZone.run(()=>{this.loaded=!0,this.loadedEvent.emit()})}onLoad(){this.loaded=!0,this.loadedEvent.emit()}onError(){this.loaded=!1,this.fastLoading=!1,console.error(`Failed to load image: ${this.src}`)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=he({type:n,selectors:[["cached-img"]],contentQueries:function(e,r,i){if(e&1&&Ah(i,Sn,5),e&2){let o;Wo(o=Zo())&&(r.fallbackTemplate=o.first)}},inputs:{src:"src",alt:"alt",class:"class",fallbackText:"fallbackText"},outputs:{loadedEvent:"loadedEvent"},features:[bt],decls:5,vars:2,consts:[["defaultFallback",""],[1,"relative","w-full","h-full"],[4,"ngIf"],[4,"ngTemplateOutlet"],[3,"load","error","src","alt"],["class","absolute inset-0 bg-gray-700",3,"animate-pulse",4,"ngIf"],[1,"absolute","inset-0","bg-gray-700"],[1,"w-full","h-full","bg-gray-700","flex","items-center","justify-center"],[1,"text-xl","text-white","font-bold"]],template:function(e,r){e&1&&(g(0,"div",1),R(1,sN,2,1,"ng-container",2)(2,lN,3,7,"ng-container",2),m(),R(3,cN,4,3,"ng-template",null,0,p0)),e&2&&(v(),b("ngIf",!r.src),v(),b("ngIf",r.src))},dependencies:[ve,ke,Uh,gg],styles:["[_nghost-%COMP%]{display:block;position:relative;width:100%;height:100%}img[_ngcontent-%COMP%]{transition:opacity .3s ease-in-out}"]})};function uN(n,t){n&1&&(g(0,"div",4)(1,"div",5),fe(),g(2,"svg",6),O(3,"circle",7)(4,"path",8),m(),it(),g(5,"span",9),_(6,"Loading messages..."),m()()())}function dN(n,t){n&1&&(g(0,"div",10),_(1," No messages yet. Start the conversation! "),m())}function fN(n,t){n&1&&O(0,"div",23)}function hN(n,t){if(n&1&&(g(0,"div",25)(1,"span",26),_(2),m()()),n&2){let e,r=E(2).$implicit,i=E();v(2),ie(((e=i.getUsernameForMessage(r)[0])==null?null:e.toUpperCase())||"?")}}function pN(n,t){if(n&1&&(g(0,"cached-img",24),R(1,hN,3,1,"ng-template"),m()),n&2){let e=E().$implicit,r=E();Li("h-full w-full object-cover"),b("src",r.getAvatarUrlForMessage(e))("alt",r.getUsernameForMessage(e))("fallbackText",r.getUsernameForMessage(e))}}function gN(n,t){n&1&&O(0,"span",27)}function mN(n,t){if(n&1&&(g(0,"span",28),_(1),m()),n&2){let e=E().$implicit,r=E();v(),ie(r.isOwn(e)?"You":r.getUsernameForMessage(e))}}function vN(n,t){n&1&&O(0,"span",29)}function yN(n,t){if(n&1&&(g(0,"span",30),_(1),zl(2,"date"),m()),n&2){let e=E().$implicit;v(),ie(e!=null&&e.inserted_at?f0(2,1,e.inserted_at,"shortTime"):"just now")}}function wN(n,t){n&1&&O(0,"div",34)}function _N(n,t){if(n&1&&(g(0,"div",31),O(1,"div",32),R(2,wN,1,0,"div",33),m()),n&2){let e=E().$implicit;v(2),b("ngIf",(e==null?null:e.content)&&e.content.length>50)}}function CN(n,t){if(n&1&&(g(0,"div",35),_(1),m()),n&2){let e=E().$implicit;v(),xt(" ",(e==null?null:e.content)||""," ")}}function bN(n,t){if(n&1&&(g(0,"div",11)(1,"div",12),R(2,fN,1,0,"div",13)(3,pN,2,5,"cached-img",14),m(),g(4,"div",15)(5,"div",16),R(6,gN,1,0,"span",17)(7,mN,2,1,"span",18)(8,vN,1,0,"span",19)(9,yN,3,4,"span",20),m(),R(10,_N,3,1,"div",21)(11,CN,2,1,"div",22),m()()),n&2){let e=t.$implicit,r=E();v(2),b("ngIf",!r.isProfileLoaded(e.user_id)),v(),b("ngIf",r.isProfileLoaded(e.user_id)),v(3),b("ngIf",!r.isProfileLoaded(e.user_id)),v(),b("ngIf",r.isProfileLoaded(e.user_id)),v(),b("ngIf",!r.isProfileLoaded(e.user_id)),v(),b("ngIf",r.isProfileLoaded(e.user_id)),v(),b("ngIf",!r.isProfileLoaded(e.user_id)),v(),b("ngIf",r.isProfileLoaded(e.user_id))}}var Lu=class n{auth=w(ge);chat=w(sr);guildService=w(kt);imageCache=w(ft);destroyRef=w(zn);userProfiles=W({});messageEffectCleanup=null;isLoading=W(!0);profilesLoaded=W(!1);cachedProfilesByChannel={};get messages(){return this.chat.messages}constructor(){console.log("ChatListComponent initialized");try{st(()=>{let e=this.guildService.activeChannel();e&&(this.isLoading.set(!0),this.profilesLoaded.set(!1),this.cachedProfilesByChannel[e.id]&&(console.log(`Using cached profiles for channel ${e.id}`),this.userProfiles.set(this.cachedProfilesByChannel[e.id]),this.profilesLoaded.set(!0)))});let t=st(()=>{try{let e=this.messages();this.isLoading.set(!1),e.length>0&&this.loadUserProfiles()}catch(e){console.error("Error in messages effect:",e),this.isLoading.set(!1)}});this.messageEffectCleanup=t,this.destroyRef.onDestroy(()=>{this.messageEffectCleanup&&(this.messageEffectCleanup.destroy(),this.messageEffectCleanup=null)})}catch(t){console.error("Error setting up effect in ChatListComponent:",t),this.isLoading.set(!1)}}ngOnInit(){return p(this,null,function*(){console.log("ChatListComponent ngOnInit");try{yield this.loadUserProfiles()}catch(t){console.error("Error loading profiles in ngOnInit:",t)}})}ngOnDestroy(){console.log("ChatListComponent destroyed")}isOwn(t){try{return t.user_id===this.auth.user()?.id}catch(e){return console.error("Error in isOwn:",e),!1}}loadUserProfiles(){return p(this,null,function*(){try{let t=[...new Set(this.messages().map(s=>s.user_id))];if(t.length===0)return;let e=this.guildService.activeChannel();if(!e)return;let r=t.filter(s=>!this.userProfiles()[s]);if(r.length===0)return;let{data:i,error:o}=yield k.from("profiles").select("id, username, avatar_url").in("id",r);if(o){console.error("Error loading user profiles:",o);return}if(i){let s=D({},this.userProfiles()),a=i.map(c=>p(this,null,function*(){let u=c.avatar_url;if(u)try{let{data:d,error:h}=yield k.storage.from("avatars").createSignedUrl(u,3600);d&&d.signedUrl?(u=d.signedUrl,yield this.imageCache.getImage(u)):h&&(console.error("Error getting signed avatar URL:",h),u=null)}catch(d){console.error("Error fetching signed avatar URL:",d),u=null}return{id:c.id,profile:{username:c.username,avatar_url:u}}}));(yield Promise.all(a)).forEach(({id:c,profile:u})=>{s[c]=u}),this.userProfiles.set(s),e&&(this.cachedProfilesByChannel[e.id]=s)}}catch(t){console.error("Error in loadUserProfiles:",t)}})}getUsernameForMessage(t){try{return!t||!t.user_id?"Unknown User":this.userProfiles()[t.user_id]?.username||"Loading..."}catch(e){return console.error("Error in getUsernameForMessage:",e),"Unknown User"}}getAvatarUrlForMessage(t){try{return!t||!t.user_id?null:this.userProfiles()[t.user_id]?.avatar_url||null}catch(e){return console.error("Error in getAvatarUrlForMessage:",e),null}}isProfileLoaded(t){return!!this.userProfiles()[t]?.username}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=he({type:n,selectors:[["chat-list"]],decls:4,vars:3,consts:[[1,"p-4","space-y-2","h-[75vh]","overflow-auto","bg-gray-900"],["class","text-center py-4",4,"ngIf"],["class","text-center text-gray-500 py-4",4,"ngIf"],["class","flex items-start space-x-3 py-2",4,"ngFor","ngForOf"],[1,"text-center","py-4"],[1,"flex","items-center","justify-center","space-x-2"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","text-purple-500"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-gray-400"],[1,"text-center","text-gray-500","py-4"],[1,"flex","items-start","space-x-3","py-2"],[1,"h-10","w-10","rounded-full","flex","items-center","justify-center","overflow-hidden","bg-gray-700"],["class","h-full w-full",4,"ngIf"],[3,"src","alt","fallbackText","class",4,"ngIf"],[1,"flex-1"],[1,"flex","items-center","space-x-2"],["class","bg-gray-700 rounded h-5 w-24 animate-pulse",4,"ngIf"],["class","font-semibold text-white text-sm",4,"ngIf"],["class","bg-gray-700 rounded h-4 w-16 animate-pulse",4,"ngIf"],["class","text-xs text-gray-400",4,"ngIf"],["class","mt-1",4,"ngIf"],["class","text-gray-200 text-base whitespace-pre-line",4,"ngIf"],[1,"h-full","w-full"],[3,"src","alt","fallbackText"],[1,"h-full","w-full","bg-purple-700","flex","items-center","justify-center"],[1,"text-lg","text-white","font-bold"],[1,"bg-gray-700","rounded","h-5","w-24","animate-pulse"],[1,"font-semibold","text-white","text-sm"],[1,"bg-gray-700","rounded","h-4","w-16","animate-pulse"],[1,"text-xs","text-gray-400"],[1,"mt-1"],[1,"bg-gray-700","rounded","h-4","w-1/5","max-w-md","animate-pulse"],["class","bg-gray-700 rounded h-4 w-2/5 max-w-xs animate-pulse mt-1",4,"ngIf"],[1,"bg-gray-700","rounded","h-4","w-2/5","max-w-xs","animate-pulse","mt-1"],[1,"text-gray-200","text-base","whitespace-pre-line"]],template:function(e,r){e&1&&(g(0,"div",0),R(1,uN,7,0,"div",1)(2,dN,2,0,"div",2)(3,bN,12,8,"div",3),m()),e&2&&(v(),b("ngIf",r.isLoading()),v(),b("ngIf",!r.isLoading()&&r.messages().length===0),v(),b("ngForOf",r.messages()))},dependencies:[ve,ji,ke,Bh,mn],encapsulation:2})};var ju=class n{constructor(t){this.chat=t}text="";send(){return p(this,null,function*(){let t=this.text.trim();t&&(yield this.chat.send(t),this.text="")})}static \u0275fac=function(e){return new(e||n)(A(sr))};static \u0275cmp=he({type:n,selectors:[["chat-input"]],decls:4,vars:1,consts:[[1,"p-4","border-t","border-gray-700","flex","space-x-2","bg-gray-900"],["type","text","placeholder","Type a message\u2026",1,"flex-1","bg-gray-800","text-gray-200","border","border-gray-700","rounded-lg","px-4","py-2","focus:outline-none","focus:border-purple-500","focus:ring-1","focus:ring-purple-500","placeholder-gray-500",3,"ngModelChange","keyup.enter","ngModel"],[1,"bg-purple-600","hover:bg-purple-700","text-white","px-6","py-2","rounded-lg","transition-colors","duration-200","font-medium",3,"click"]],template:function(e,r){e&1&&(g(0,"div",0)(1,"input",1),Ye("ngModelChange",function(o){return ot(r.text,o)||(r.text=o),o}),V("keyup.enter",function(){return r.send()}),m(),g(2,"button",2),V("click",function(){return r.send()}),_(3," Send "),m()()),e&2&&(v(),Ze("ngModel",r.text))},dependencies:[ve,dn,ut,Rt,kn],encapsulation:2})};var DN=(n,t,e)=>({"bg-purple-600 hover:bg-purple-500 transition-colors":n,"bg-gray-800 hover:bg-purple-500 transition-colors":t,"bg-gray-900":e});function EN(n,t){if(n&1&&(g(0,"div",14)(1,"span",15),_(2),m()()),n&2){let e=E(2).$implicit;v(2),ie(e.name.charAt(0).toUpperCase())}}function IN(n,t){if(n&1&&(g(0,"cached-img",13),R(1,EN,3,1,"ng-template"),m()),n&2){let e=E().$implicit;Li("h-full w-full object-cover"),b("src",e.image_url)("alt",e.name)("fallbackText",e.name)}}function SN(n,t){if(n&1&&(g(0,"span",15),_(1),m()),n&2){let e=E().$implicit;v(),ie(e.name.charAt(0).toUpperCase())}}function xN(n,t){n&1&&O(0,"div",16)}function TN(n,t){if(n&1){let e=me();Nr(0),g(1,"div",8),V("click",function(){let i=L(e).$implicit,o=E();return j(o.selectGuild(i))}),g(2,"div",9),R(3,IN,2,5,"cached-img",10)(4,SN,2,1,"span",11),m(),R(5,xN,1,0,"div",12),m(),Or()}if(n&2){let e,r,i=t.$implicit,o=E();v(2),b("ngClass",l0(5,DN,i.id===((e=o.activeGuild())==null?null:e.id)&&!i.image_url,i.id!==((e=o.activeGuild())==null?null:e.id)&&!i.image_url,i.image_url))("title",i.name),v(),b("ngIf",i.image_url),v(),b("ngIf",!i.image_url),v(),b("ngIf",i.id===((r=o.activeGuild())==null?null:r.id))}}function MN(n,t){n&1&&(g(0,"div",37),fe(),g(1,"svg",38),O(2,"circle",39)(3,"path",40),m()())}function AN(n,t){if(n&1&&O(0,"img",41),n&2){let e=E(2);b("src",e.guildImagePreview,rn)}}function RN(n,t){if(n&1&&(g(0,"span",42),_(1),m()),n&2){let e=E(2);v(),ie(e.newGuildName.charAt(0).toUpperCase())}}function NN(n,t){if(n&1){let e=me();g(0,"div",17)(1,"div",18)(2,"h2",19),_(3,"Create a New Guild"),m(),g(4,"div",20)(5,"div")(6,"label",21),_(7,"Guild Image (optional)"),m(),g(8,"div",22)(9,"div",23),R(10,MN,4,0,"div",24)(11,AN,1,1,"img",25)(12,RN,2,1,"span",26),m(),g(13,"div")(14,"label",27)(15,"span"),_(16,"Upload Image"),m(),g(17,"input",28),V("change",function(i){L(e);let o=E();return j(o.handleGuildImageSelected(i))}),m()()()(),g(18,"p",29),_(19,"Recommended: 128x128px or larger square image"),m()(),g(20,"div")(21,"label",30),_(22,"Guild Name"),m(),g(23,"input",31),Ye("ngModelChange",function(i){L(e);let o=E();return ot(o.newGuildName,i)||(o.newGuildName=i),j(i)}),m()(),g(24,"div")(25,"label",32),_(26,"Description (optional)"),m(),g(27,"textarea",33),Ye("ngModelChange",function(i){L(e);let o=E();return ot(o.newGuildDescription,i)||(o.newGuildDescription=i),j(i)}),m()(),g(28,"div",34)(29,"button",35),V("click",function(){L(e);let i=E();return j(i.closeCreateGuildModal())}),_(30," Cancel "),m(),g(31,"button",36),V("click",function(){L(e);let i=E();return j(i.createGuild())}),_(32," Create "),m()()()()()}if(n&2){let e=E();v(10),b("ngIf",e.uploading),v(),b("ngIf",e.guildImagePreview&&!e.uploading),v(),b("ngIf",!e.guildImagePreview&&!e.uploading),v(2),Et("opacity-50",e.uploading)("cursor-not-allowed",e.uploading),v(3),b("disabled",e.uploading),v(6),Ze("ngModel",e.newGuildName),v(4),Ze("ngModel",e.newGuildDescription),v(4),b("disabled",!e.newGuildName.trim())}}var Vu=class n{guildService=w(kt);imageCache=w(ft);showCreateGuildModal=!1;newGuildName="";newGuildDescription="";guildImageFile=null;guildImagePreview=null;uploading=!1;get guilds(){return this.guildService.guilds}get activeGuild(){return this.guildService.activeGuild}selectGuild(t){this.guildService.setActiveGuild(t)}openCreateGuildModal(){this.showCreateGuildModal=!0,this.newGuildName="",this.newGuildDescription="",this.guildImageFile=null,this.guildImagePreview=null}closeCreateGuildModal(){this.showCreateGuildModal=!1,this.guildImageFile=null,this.guildImagePreview=null}handleGuildImageSelected(t){return p(this,null,function*(){let e=t.target;if(e.files&&e.files.length>0){let r=e.files[0];if(!r.type.startsWith("image/")){alert("Please select an image file");return}let i=5*1024*1024;if(r.size>i){alert("Image size must be less than 5MB");return}this.uploading=!0;try{let o=yield this.autoCropImage(r),s=yield this.fileToDataUrl(o);this.guildImagePreview=s,this.guildImageFile=o}catch(o){console.error("Error processing image:",o)}finally{this.uploading=!1}}})}autoCropImage(t){return new Promise((e,r)=>{let i=new FileReader;i.onload=o=>{let s=new Image;s.onload=()=>{let a=Math.min(s.width,s.height),l=(s.width-a)/2,c=(s.height-a)/2,u=document.createElement("canvas");u.width=a,u.height=a;let d=u.getContext("2d");if(!d){r(new Error("Could not get canvas context"));return}d.drawImage(s,l,c,a,a,0,0,a,a),u.toBlob(h=>{if(!h){r(new Error("Failed to create image blob"));return}let f=new File([h],t.name,{type:"image/png",lastModified:Date.now()});e(f)},"image/png")},s.onerror=()=>{r(new Error("Failed to load image"))},s.src=o.target?.result},i.onerror=()=>{r(new Error("Failed to read file"))},i.readAsDataURL(t)})}fileToDataUrl(t){return new Promise((e,r)=>{let i=new FileReader;i.onload=()=>e(i.result),i.onerror=r,i.readAsDataURL(t)})}createGuild(){return p(this,null,function*(){if(this.newGuildName.trim())try{yield this.guildService.createGuild(this.newGuildName.trim(),this.newGuildDescription.trim()||void 0,this.guildImageFile||void 0),this.closeCreateGuildModal()}catch(t){console.error("Error creating guild:",t)}})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=he({type:n,selectors:[["guild-sidebar"]],decls:8,vars:2,consts:[[1,"flex","flex-col","h-full","bg-gray-900","w-20","border-r","border-gray-800"],[1,"flex-1","overflow-y-auto","p-2","flex","flex-col","items-center","space-y-3"],[4,"ngFor","ngForOf"],[1,"flex","items-center","w-full","justify-center","pt-2"],["title","Create a new guild",1,"h-12","w-12","rounded-full","bg-gray-800","flex","items-center","justify-center","text-white","cursor-pointer","hover:bg-gray-700","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",4,"ngIf"],[1,"flex","items-center","w-full","justify-center","group","cursor-pointer",3,"click"],[1,"h-12","w-12","rounded-full","flex","items-center","justify-center","text-white","font-bold","overflow-hidden",3,"ngClass","title"],[3,"src","alt","fallbackText","class",4,"ngIf"],["class","text-2xl text-white font-bold",4,"ngIf"],["class","ml-2 h-8 w-2 rounded bg-purple-400",4,"ngIf"],[3,"src","alt","fallbackText"],[1,"h-full","w-full","bg-gray-800","flex","items-center","justify-center"],[1,"text-2xl","text-white","font-bold"],[1,"ml-2","h-8","w-2","rounded","bg-purple-400"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"bg-gray-800","p-6","rounded-lg","w-96"],[1,"text-xl","font-bold","text-white","mb-4"],[1,"space-y-4"],[1,"block","text-sm","font-medium","text-gray-300","mb-2"],[1,"flex","items-center","space-x-4"],[1,"w-16","h-16","rounded-full","bg-gray-700","flex","items-center","justify-center","overflow-hidden"],["class","flex items-center justify-center w-full h-full",4,"ngIf"],["alt","Guild image","class","w-full h-full object-cover",3,"src",4,"ngIf"],["class","text-2xl text-white",4,"ngIf"],[1,"px-3","py-2","bg-gray-700","text-white","rounded","cursor-pointer","hover:bg-gray-600"],["type","file","accept","image/*",1,"hidden",3,"change","disabled"],[1,"text-xs","text-gray-400","mt-1"],["for","guildName",1,"block","text-sm","font-medium","text-gray-300","mb-1"],["type","text","id","guildName","placeholder","My Awesome Guild",1,"w-full","border","border-gray-600","rounded","px-3","py-2","bg-gray-700","text-white",3,"ngModelChange","ngModel"],["for","guildDescription",1,"block","text-sm","font-medium","text-gray-300","mb-1"],["id","guildDescription","placeholder","What's this guild about?","rows","3",1,"w-full","border","border-gray-600","rounded","px-3","py-2","bg-gray-700","text-white",3,"ngModelChange","ngModel"],[1,"flex","justify-between","mt-6"],[1,"px-4","py-2","bg-gray-600","text-white","rounded","hover:bg-gray-500",3,"click"],[1,"px-4","py-2","bg-purple-600","text-white","rounded","hover:bg-purple-500",3,"click","disabled"],[1,"flex","items-center","justify-center","w-full","h-full"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-8","w-8","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["alt","Guild image",1,"w-full","h-full","object-cover",3,"src"],[1,"text-2xl","text-white"]],template:function(e,r){e&1&&(g(0,"div",0)(1,"div",1),R(2,TN,6,9,"ng-container",2),g(3,"div",3)(4,"button",4),V("click",function(){return r.openCreateGuildModal()}),fe(),g(5,"svg",5),O(6,"path",6),m()()()()(),R(7,NN,33,11,"div",7)),e&2&&(v(2),b("ngForOf",r.guilds()),v(5),b("ngIf",r.showCreateGuildModal))},dependencies:[ve,is,ji,ke,dn,ut,Rt,kn,mn],encapsulation:2})};var ON=(n,t)=>t.id;function kN(n,t){if(n&1&&(g(0,"div",21)(1,"span",22),_(2),m()()),n&2){let e,r=E();v(2),ie((((e=r.activeGuild())==null?null:e.name)||"?")[0].toUpperCase())}}function PN(n,t){if(n&1){let e=me();g(0,"button",23),V("click",function(){L(e);let i=E();return j(i.openGuildSettingsModal())}),fe(),g(1,"svg",24),O(2,"path",25)(3,"path",26),m()()}}function FN(n,t){if(n&1){let e=me();g(0,"button",27),V("click",function(){L(e);let i=E();return j(i.refreshChannels())}),fe(),g(1,"svg",28),O(2,"path",29),m()()}}function LN(n,t){n&1&&(g(0,"div",15),_(1,"Select a guild to view channels"),m())}function jN(n,t){n&1&&(g(0,"div",16)(1,"div",30),fe(),g(2,"svg",31),O(3,"circle",32)(4,"path",33),m(),it(),g(5,"span"),_(6,"Loading channels..."),m()()())}function VN(n,t){n&1&&(g(0,"span"),_(1,"Create #general"),m())}function UN(n,t){n&1&&(g(0,"span"),_(1,"Creating..."),m())}function BN(n,t){if(n&1){let e=me();g(0,"button",36),V("click",function(){L(e);let i=E(2);return j(i.refreshChannels())}),R(1,VN,2,0,"span")(2,UN,2,0,"span"),m()}if(n&2){let e=E(2);b("disabled",e.isRefreshing),v(),It(e.isRefreshing?-1:1),v(),It(e.isRefreshing?2:-1)}}function $N(n,t){n&1&&(g(0,"p",35),_(1," As the guild owner, you can create the default #general channel by clicking the button. "),m())}function HN(n,t){n&1&&(g(0,"p",35),_(1,"The guild owner needs to create a channel first."),m())}function GN(n,t){if(n&1&&(g(0,"div",16)(1,"div",12)(2,"span"),_(3,"No channels available"),m(),R(4,BN,3,3,"button",34),m(),R(5,$N,2,0,"p",35)(6,HN,2,0,"p",35),m()),n&2){let e=E();v(4),It(e.isGuildOwner()?4:-1),v(),It(e.isGuildOwner()?5:6)}}function zN(n,t){if(n&1){let e=me();g(0,"div",37),V("click",function(){let i=L(e).$implicit,o=E();return j(o.selectChannel(i))}),g(1,"span",38),_(2,"#"),m(),g(3,"span",39),_(4),m()()}if(n&2){let e,r,i,o,s=t.$implicit,a=E();Et("bg-gray-700",s.id===((e=a.activeChannel())==null?null:e.id))("text-white",s.id===((r=a.activeChannel())==null?null:r.id))("text-gray-400",s.id!==((i=a.activeChannel())==null?null:i.id))("hover:bg-gray-700",s.id!==((o=a.activeChannel())==null?null:o.id)),v(4),ie(s.name)}}function qN(n,t){if(n&1){let e=me();g(0,"button",40),V("click",function(){L(e);let i=E();return j(i.openCreateChannelModal())}),fe(),g(1,"svg",41),O(2,"path",42),m(),_(3," Create Channel "),m()}}function WN(n,t){if(n&1){let e=me();g(0,"div",20)(1,"div",43)(2,"h2",44),_(3,"Create a New Channel"),m(),g(4,"div",45)(5,"div")(6,"label",46),_(7,"Channel Name"),m(),g(8,"div",47)(9,"span",48),_(10,"#"),m(),g(11,"input",49),Ye("ngModelChange",function(i){L(e);let o=E();return ot(o.newChannelName,i)||(o.newChannelName=i),j(i)}),m()(),g(12,"p",50),_(13,"Only letters, numbers, and dashes are allowed"),m()(),g(14,"div")(15,"label",51),_(16,"Description (optional)"),m(),g(17,"textarea",52),Ye("ngModelChange",function(i){L(e);let o=E();return ot(o.newChannelDescription,i)||(o.newChannelDescription=i),j(i)}),m()(),g(18,"div",53)(19,"button",54),V("click",function(){L(e);let i=E();return j(i.closeCreateChannelModal())}),_(20," Cancel "),m(),g(21,"button",55),V("click",function(){L(e);let i=E();return j(i.createChannel())}),_(22," Create "),m()()()()()}if(n&2){let e=E();v(11),Ze("ngModel",e.newChannelName),v(6),Ze("ngModel",e.newChannelDescription),v(4),b("disabled",!e.newChannelName.trim())}}function ZN(n,t){n&1&&(g(0,"div",68),fe(),g(1,"svg",69),O(2,"circle",32)(3,"path",33),m()())}function YN(n,t){if(n&1&&O(0,"img",70),n&2){let e=E(2);b("src",e.guildImagePreview,rn)}}function KN(n,t){if(n&1&&(g(0,"span",71),_(1),m()),n&2){let e=E(2);v(),ie(e.newGuildName.charAt(0).toUpperCase())}}function JN(n,t){if(n&1){let e=me();g(0,"div",20)(1,"div",43)(2,"h2",44),_(3,"Create a New Guild"),m(),g(4,"div",45)(5,"div")(6,"label",56),_(7,"Guild Image (optional)"),m(),g(8,"div",57)(9,"div",58),R(10,ZN,4,0,"div",59)(11,YN,1,1,"img",60)(12,KN,2,1,"span",61),m(),g(13,"div")(14,"label",62)(15,"span"),_(16,"Upload Image"),m(),g(17,"input",63),V("change",function(i){L(e);let o=E();return j(o.handleGuildImageSelected(i))}),m()()()(),g(18,"p",50),_(19,"Recommended: 128x128px or larger square image"),m()(),g(20,"div")(21,"label",64),_(22,"Guild Name"),m(),g(23,"input",65),Ye("ngModelChange",function(i){L(e);let o=E();return ot(o.newGuildName,i)||(o.newGuildName=i),j(i)}),m()(),g(24,"div")(25,"label",66),_(26,"Description (optional)"),m(),g(27,"textarea",67),Ye("ngModelChange",function(i){L(e);let o=E();return ot(o.newGuildDescription,i)||(o.newGuildDescription=i),j(i)}),m()(),g(28,"div",53)(29,"button",54),V("click",function(){L(e);let i=E();return j(i.closeCreateGuildModal())}),_(30," Cancel "),m(),g(31,"button",55),V("click",function(){L(e);let i=E();return j(i.createGuild())}),_(32," Create "),m()()()()()}if(n&2){let e=E();v(10),b("ngIf",e.uploading),v(),b("ngIf",e.guildImagePreview&&!e.uploading),v(),b("ngIf",!e.guildImagePreview&&!e.uploading),v(2),Et("opacity-50",e.uploading)("cursor-not-allowed",e.uploading),v(3),b("disabled",e.uploading),v(6),Ze("ngModel",e.newGuildName),v(4),Ze("ngModel",e.newGuildDescription),v(4),b("disabled",!e.newGuildName.trim())}}function QN(n,t){n&1&&(g(0,"div",68),fe(),g(1,"svg",69),O(2,"circle",32)(3,"path",33),m()())}function XN(n,t){if(n&1&&O(0,"img",70),n&2){let e=E(2);b("src",e.guildImagePreview,rn)}}function eO(n,t){if(n&1&&(g(0,"span",71),_(1),m()),n&2){let e=E(2);v(),ie(e.newGuildName.charAt(0).toUpperCase())}}function tO(n,t){if(n&1){let e=me();g(0,"div",20)(1,"div",43)(2,"h2",44),_(3,"Guild Settings"),m(),g(4,"div",45)(5,"div")(6,"label",56),_(7,"Guild Image (optional)"),m(),g(8,"div",57)(9,"div",58),R(10,QN,4,0,"div",59)(11,XN,1,1,"img",60)(12,eO,2,1,"span",61),m(),g(13,"div")(14,"label",62)(15,"span"),_(16,"Upload Image"),m(),g(17,"input",63),V("change",function(i){L(e);let o=E();return j(o.handleGuildImageSelected(i))}),m()()()(),g(18,"p",50),_(19,"Recommended: 128x128px or larger square image"),m()(),g(20,"div")(21,"label",72),_(22,"Guild Name"),m(),g(23,"input",73),Ye("ngModelChange",function(i){L(e);let o=E();return ot(o.newGuildName,i)||(o.newGuildName=i),j(i)}),m()(),g(24,"div")(25,"label",74),_(26,"Description (optional)"),m(),g(27,"textarea",75),Ye("ngModelChange",function(i){L(e);let o=E();return ot(o.newGuildDescription,i)||(o.newGuildDescription=i),j(i)}),m()(),g(28,"div",53)(29,"button",76),V("click",function(){L(e);let i=E();return j(i.deleteGuild())}),_(30," Delete Guild "),m(),g(31,"div",77)(32,"button",54),V("click",function(){L(e);let i=E();return j(i.closeGuildSettingsModal())}),_(33," Cancel "),m(),g(34,"button",55),V("click",function(){L(e);let i=E();return j(i.updateGuild())}),_(35," Save "),m()()()()()()}if(n&2){let e=E();v(10),b("ngIf",e.uploading),v(),b("ngIf",e.guildImagePreview&&!e.uploading),v(),b("ngIf",!e.guildImagePreview&&!e.uploading),v(2),Et("opacity-50",e.uploading)("cursor-not-allowed",e.uploading),v(3),b("disabled",e.uploading),v(6),Ze("ngModel",e.newGuildName),v(4),Ze("ngModel",e.newGuildDescription),v(7),b("disabled",!e.newGuildName.trim())}}var Uu=class n{guildService=w(kt);auth=w(ge);imageCache=w(ft);isBrowser;isRefreshing=!1;isLoadingChannels=!0;lastRefreshTime=0;refreshTimeoutId=null;showCreateChannelModal=!1;showCreateGuildModal=!1;showGuildSettingsModal=!1;newChannelName="";newChannelDescription="";newGuildName="";newGuildDescription="";guildImageFile=null;guildImagePreview=null;uploading=!1;constructor(t){this.isBrowser=gt(t),this.isBrowser&&st(()=>{this.guildService.activeGuild()&&(console.log("Guild changed in ChannelListComponent, checking channels"),this.isLoadingChannels=!0,this.debouncedRefreshChannels())})}get channels(){return()=>{if(!this.isBrowser)return[];let t=this.guildService.channels();return!this.isRefreshing&&this.activeGuild()&&t.length===0&&Date.now()-this.lastRefreshTime>5e3&&(console.log("No channels found but guild exists, scheduling refresh..."),this.debouncedRefreshChannels()),t}}debouncedRefreshChannels(){this.refreshTimeoutId&&clearTimeout(this.refreshTimeoutId),this.refreshTimeoutId=setTimeout(()=>{this.refreshChannels()},500)}refreshChannels(){if(!this.isBrowser||this.isRefreshing)return;let t=this.activeGuild();if(t&&t.id){if(console.log("Refreshing channels for guild:",t.id),this.isRefreshing=!0,this.lastRefreshTime=Date.now(),this.isGuildOwner()&&this.channels().length===0){console.log("Owner is refreshing with no channels, creating default channel"),this.createDefaultChannel(t.id);return}this.guildService.loadChannels(t.id).then(()=>{setTimeout(()=>{this.isRefreshing=!1,this.isLoadingChannels=!1},2e3)}).catch(()=>{this.isRefreshing=!1,this.isLoadingChannels=!1})}}createDefaultChannel(t){return p(this,null,function*(){try{let e=yield this.guildService.createChannel(t,"general","General discussion");console.log("Created default general channel:",e),this.isRefreshing=!1,this.isLoadingChannels=!1}catch(e){console.error("Error creating default channel:",e),this.isRefreshing=!1,this.isLoadingChannels=!1}})}get activeChannel(){return()=>this.isBrowser?this.guildService.activeChannel():null}get activeGuild(){return()=>this.isBrowser?this.guildService.activeGuild():null}selectChannel(t){this.isBrowser&&this.guildService.setActiveChannel(t)}openCreateChannelModal(){this.isBrowser&&(this.showCreateChannelModal=!0,this.newChannelName="",this.newChannelDescription="")}closeCreateChannelModal(){this.isBrowser&&(this.showCreateChannelModal=!1)}openCreateGuildModal(){this.isBrowser&&(this.showCreateGuildModal=!0,this.newGuildName="",this.newGuildDescription="",this.guildImageFile=null,this.guildImagePreview=null)}closeCreateGuildModal(){this.isBrowser&&(this.showCreateGuildModal=!1,this.guildImageFile=null,this.guildImagePreview=null)}openGuildSettingsModal(){if(!this.isBrowser||!this.isGuildOwner())return;let t=this.activeGuild();t&&(this.showGuildSettingsModal=!0,this.newGuildName=t.name,this.newGuildDescription=t.description||"",this.guildImageFile=null,t.image_url?this.imageCache.getImage(t.image_url).then(e=>{this.guildImagePreview=e}).catch(()=>{this.guildImagePreview=t.image_url||null}):this.guildImagePreview=null)}closeGuildSettingsModal(){this.isBrowser&&(this.showGuildSettingsModal=!1,this.guildImageFile=null,this.guildImagePreview=null)}handleGuildImageSelected(t){return p(this,null,function*(){if(!this.isBrowser)return;let e=t.target;if(e.files&&e.files.length>0){let r=e.files[0];if(!r.type.startsWith("image/")){alert("Please select an image file");return}let i=5*1024*1024;if(r.size>i){alert("Image size must be less than 5MB");return}this.uploading=!0;try{let o=yield this.autoCropImage(r),s=yield this.fileToDataUrl(o);this.guildImagePreview=s,this.guildImageFile=o;let a=this.activeGuild();a&&a.image_url&&this.imageCache.storeImage(a.image_url,s)}catch(o){console.error("Error processing image:",o)}finally{this.uploading=!1}}})}autoCropImage(t){return new Promise((e,r)=>{let i=new FileReader;i.onload=o=>{let s=new Image;s.onload=()=>{let a=Math.min(s.width,s.height),l=(s.width-a)/2,c=(s.height-a)/2,u=document.createElement("canvas");u.width=a,u.height=a;let d=u.getContext("2d");if(!d){r(new Error("Could not get canvas context"));return}d.drawImage(s,l,c,a,a,0,0,a,a),u.toBlob(h=>{if(!h){r(new Error("Failed to create image blob"));return}let f=new File([h],t.name,{type:"image/png",lastModified:Date.now()});e(f)},"image/png")},s.onerror=()=>{r(new Error("Failed to load image"))},s.src=o.target?.result},i.onerror=()=>{r(new Error("Failed to read file"))},i.readAsDataURL(t)})}fileToDataUrl(t){return new Promise((e,r)=>{let i=new FileReader;i.onload=()=>e(i.result),i.onerror=r,i.readAsDataURL(t)})}updateGuild(){return p(this,null,function*(){if(!this.isBrowser||!this.newGuildName.trim()||!this.isGuildOwner())return;let t=this.activeGuild();if(t)try{yield this.guildService.updateGuild(t.id,this.newGuildName.trim(),this.newGuildDescription.trim()||void 0,this.guildImageFile||void 0),this.closeGuildSettingsModal()}catch(e){console.error("Error updating guild:",e)}})}deleteGuild(){return p(this,null,function*(){if(!this.isBrowser||!this.isGuildOwner())return;let t=this.activeGuild();if(t&&confirm(`Are you sure you want to delete the guild "${t.name}"? This cannot be undone.`))try{yield this.guildService.deleteGuild(t.id),this.closeGuildSettingsModal()}catch(e){console.error("Error deleting guild:",e)}})}isGuildOwner(){if(!this.isBrowser)return!1;let t=this.auth.user(),e=this.activeGuild();return!t||!e?!1:t.id===e.owner_id}createGuild(){return p(this,null,function*(){if(!(!this.isBrowser||!this.newGuildName.trim()))try{yield this.guildService.createGuild(this.newGuildName.trim(),this.newGuildDescription.trim()||void 0,this.guildImageFile||void 0),this.closeCreateGuildModal()}catch(t){console.error("Error creating guild:",t)}})}createChannel(){return p(this,null,function*(){if(!this.isBrowser||!this.newChannelName.trim()||!this.activeGuild())return;if(!/^[a-zA-Z0-9-]+$/.test(this.newChannelName.trim())){alert("Channel names can only contain letters, numbers, and dashes");return}try{yield this.guildService.createChannel(this.activeGuild().id,this.newChannelName.trim(),this.newChannelDescription.trim()||void 0),this.closeCreateChannelModal()}catch(e){console.error("Error creating channel:",e)}})}static \u0275fac=function(e){return new(e||n)(A(xe))};static \u0275cmp=he({type:n,selectors:[["channel-list"]],decls:29,vars:14,consts:[[1,"flex","flex-col","h-full","bg-gray-800","w-60","border-r","border-gray-700"],[1,"p-4","border-b","border-gray-700"],[1,"flex","items-start"],[1,"h-10","w-10","rounded-full","flex-shrink-0","flex","items-center","justify-center","overflow-hidden","mt-1"],[3,"src","alt","fallbackText"],[1,"ml-3","flex-1"],[1,"flex","items-center","justify-between"],[1,"text-xl","font-bold","text-white","truncate"],["class","h-6 w-6 ml-2 text-gray-400 hover:text-white flex-shrink-0","title","Guild Settings",3,"click",4,"ngIf"],[1,"text-sm","text-gray-400","truncate","mt-1"],[1,"flex-1","overflow-y-auto"],[1,"p-4"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-xs","uppercase","text-gray-500","font-bold"],["class","h-4 w-4 text-gray-500 hover:text-white","title","Refresh channels",3,"click",4,"ngIf"],[1,"text-gray-500","text-sm"],[1,"text-gray-500","text-sm","mb-4"],[1,"flex","items-center","py-1","px-2","rounded","cursor-pointer","mb-1",3,"bg-gray-700","text-white","text-gray-400","hover:bg-gray-700"],[1,"p-4","border-t","border-gray-700"],[1,"w-full","py-2","bg-gray-700","hover:bg-gray-600","text-white","rounded","flex","items-center","justify-center"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"h-full","w-full","bg-gray-700","flex","items-center","justify-center"],[1,"text-xl","text-white","font-bold"],["title","Guild Settings",1,"h-6","w-6","ml-2","text-gray-400","hover:text-white","flex-shrink-0",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["title","Refresh channels",1,"h-4","w-4","text-gray-500","hover:text-white",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"flex","items-center","space-x-2"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4","text-purple-500"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"px-3","py-1","bg-purple-600","text-white","rounded","text-xs","hover:bg-purple-500","flex","items-center",3,"disabled"],[1,"text-xs","text-gray-500","mt-1"],[1,"px-3","py-1","bg-purple-600","text-white","rounded","text-xs","hover:bg-purple-500","flex","items-center",3,"click","disabled"],[1,"flex","items-center","py-1","px-2","rounded","cursor-pointer","mb-1",3,"click"],[1,"mr-2"],[1,"truncate"],[1,"w-full","py-2","bg-gray-700","hover:bg-gray-600","text-white","rounded","flex","items-center","justify-center",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"bg-gray-800","p-6","rounded-lg","w-96"],[1,"text-xl","font-bold","text-white","mb-4"],[1,"space-y-4"],["for","channelName",1,"block","text-sm","font-medium","text-gray-300","mb-1"],[1,"flex","items-center"],[1,"text-gray-400","mr-1"],["type","text","id","channelName","placeholder","general",1,"w-full","border","border-gray-600","rounded","px-3","py-2","bg-gray-700","text-white",3,"ngModelChange","ngModel"],[1,"text-xs","text-gray-400","mt-1"],["for","channelDescription",1,"block","text-sm","font-medium","text-gray-300","mb-1"],["id","channelDescription","placeholder","What's this channel about?","rows","3",1,"w-full","border","border-gray-600","rounded","px-3","py-2","bg-gray-700","text-white",3,"ngModelChange","ngModel"],[1,"flex","justify-between","mt-6"],[1,"px-4","py-2","bg-gray-600","text-white","rounded","hover:bg-gray-500",3,"click"],[1,"px-4","py-2","bg-purple-600","text-white","rounded","hover:bg-purple-500",3,"click","disabled"],[1,"block","text-sm","font-medium","text-gray-300","mb-2"],[1,"flex","items-center","space-x-4"],[1,"w-16","h-16","rounded-full","bg-gray-700","flex","items-center","justify-center","overflow-hidden"],["class","flex items-center justify-center w-full h-full",4,"ngIf"],["alt","Guild image","class","w-full h-full object-cover",3,"src",4,"ngIf"],["class","text-2xl text-white",4,"ngIf"],[1,"px-3","py-2","bg-gray-700","text-white","rounded","cursor-pointer","hover:bg-gray-600"],["type","file","accept","image/*",1,"hidden",3,"change","disabled"],["for","guildName",1,"block","text-sm","font-medium","text-gray-300","mb-1"],["type","text","id","guildName","placeholder","My Awesome Guild",1,"w-full","border","border-gray-600","rounded","px-3","py-2","bg-gray-700","text-white",3,"ngModelChange","ngModel"],["for","guildDescription",1,"block","text-sm","font-medium","text-gray-300","mb-1"],["id","guildDescription","placeholder","What's this guild about?","rows","3",1,"w-full","border","border-gray-600","rounded","px-3","py-2","bg-gray-700","text-white",3,"ngModelChange","ngModel"],[1,"flex","items-center","justify-center","w-full","h-full"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-8","w-8","text-white"],["alt","Guild image",1,"w-full","h-full","object-cover",3,"src"],[1,"text-2xl","text-white"],["for","guildSettingsName",1,"block","text-sm","font-medium","text-gray-300","mb-1"],["type","text","id","guildSettingsName",1,"w-full","border","border-gray-600","rounded","px-3","py-2","bg-gray-700","text-white",3,"ngModelChange","ngModel"],["for","guildSettingsDescription",1,"block","text-sm","font-medium","text-gray-300","mb-1"],["id","guildSettingsDescription","rows","3",1,"w-full","border","border-gray-600","rounded","px-3","py-2","bg-gray-700","text-white",3,"ngModelChange","ngModel"],["title","Delete this guild",1,"px-4","py-2","bg-red-600","text-white","rounded","hover:bg-red-500",3,"click"],[1,"flex","space-x-3"]],template:function(e,r){if(e&1&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"cached-img",4),R(5,kN,3,1,"ng-template"),m()(),g(6,"div",5)(7,"div",6)(8,"h2",7),_(9),m(),R(10,PN,4,0,"button",8),m(),g(11,"p",9),_(12),m()()()(),g(13,"div",10)(14,"div",11)(15,"div",12)(16,"h3",13),_(17,"Channels"),m(),R(18,FN,3,0,"button",14),m(),R(19,LN,2,0,"div",15)(20,jN,7,0,"div",16)(21,GN,7,2,"div",16),r0(22,zN,5,9,"div",17,ON),m()(),g(24,"div",18),R(25,qN,4,0,"button",19),m()(),R(26,WN,23,3,"div",20)(27,JN,33,11,"div",20)(28,tO,36,11,"div",20)),e&2){let i,o,s,a,l;v(4),b("src",(i=(i=r.activeGuild())==null?null:i.image_url)!==null&&i!==void 0?i:null)("alt",(o=(o=r.activeGuild())==null?null:o.name)!==null&&o!==void 0?o:"")("fallbackText",(s=(s=r.activeGuild())==null?null:s.name)!==null&&s!==void 0?s:""),v(5),xt(" ",((a=r.activeGuild())==null?null:a.name)||"Select a Guild"," "),v(),b("ngIf",r.isGuildOwner()),v(2),ie(((l=r.activeGuild())==null?null:l.description)||""),v(6),b("ngIf",r.isGuildOwner()&&r.activeGuild()),v(),It(r.activeGuild()?-1:19),v(),It(r.activeGuild()&&r.isLoadingChannels&&r.channels().length===0?20:-1),v(),It(r.activeGuild()&&!r.isLoadingChannels&&r.channels().length===0?21:-1),v(),i0(r.channels()),v(3),It(r.activeGuild()&&r.isGuildOwner()?25:-1),v(),It(r.showCreateChannelModal?26:-1),v(),It(r.showCreateGuildModal?27:-1),v(),It(r.showGuildSettingsModal?28:-1)}},dependencies:[ve,ke,dn,ut,Rt,kn,mn],encapsulation:2})};function nO(n,t){if(n&1&&(g(0,"div",31)(1,"span",32),_(2),m()()),n&2){let e,r=E(3);v(2),ie((((e=r.user())==null?null:e.username)||"?")[0]==null?null:(((e=e)==null?null:e.username)||"?")[0].toUpperCase())}}function rO(n,t){if(n&1&&(g(0,"div",29)(1,"cached-img",30),R(2,nO,3,1,"ng-template"),m()()),n&2){let e,r,i=E(2);v(),b("src",i.avatarUrl())("alt",((e=i.user())==null?null:e.username)||"")("fallbackText",((r=i.user())==null?null:r.username)||"")}}function iO(n,t){n&1&&(g(0,"div",33),fe(),g(1,"svg",34),O(2,"circle",35)(3,"path",36),m()())}function oO(n,t){if(n&1&&(g(0,"p",37),_(1),m()),n&2){let e=E(2);v(),ie(e.avatarError)}}function sO(n,t){if(n&1&&(g(0,"div",38),_(1),m()),n&2){let e=E(2);v(),ie(e.error())}}function aO(n,t){if(n&1){let e=me();g(0,"div",2)(1,"div",3)(2,"h2",4),_(3," User Profile "),g(4,"button",5),V("click",function(){L(e);let i=E();return j(i.close())}),fe(),g(5,"svg",6),O(6,"path",7),m()()(),it(),g(7,"div",8)(8,"div",9)(9,"div",10),R(10,rO,3,3,"div",11)(11,iO,4,0,"div",12),g(12,"button",13),V("click",function(){L(e);let i=Gl(17);return j(i.click())}),fe(),g(13,"svg",14),O(14,"path",15)(15,"path",16),m()(),it(),g(16,"input",17,0),V("change",function(i){L(e);let o=E();return j(o.uploadAvatar(i))}),m()(),R(18,oO,2,1,"p",18),m(),g(19,"div")(20,"label",19),_(21,"Username"),m(),g(22,"input",20),Ye("ngModelChange",function(i){L(e);let o=E();return ot(o.username,i)||(o.username=i),j(i)}),m()(),R(23,sO,2,1,"div",21),g(24,"div",22)(25,"button",23),V("click",function(){L(e);let i=E();return j(i.close())}),_(26,"Cancel"),m(),g(27,"button",24),V("click",function(){L(e);let i=E();return j(i.updateProfile())}),_(28),m()(),g(29,"div",25)(30,"button",26),V("click",function(){L(e);let i=E();return j(i.logout())}),fe(),g(31,"svg",27),O(32,"path",28),m(),_(33," Logout "),m()()()()()}if(n&2){let e=E();v(10),b("ngIf",!e.uploading),v(),b("ngIf",e.uploading),v(),b("disabled",e.uploading),v(6),b("ngIf",e.avatarError),v(4),Ze("ngModel",e.username),v(),b("ngIf",e.error()),v(4),b("disabled",e.updating),v(),xt(" ",e.updating?"Saving...":"Save Changes"," ")}}var Bu=class n{profileUpdated=new de;auth=w(ge);imageCache=w(ft);isOpen=W(!1);user=this.auth.user;error=W(null);username="";avatarUrl=W(null);avatarError=null;uploading=!1;updating=!1;constructor(){}open(){this.isOpen.set(!0),this.username=this.user()?.username||"",this.fetchAvatar()}close(){this.isOpen.set(!1),this.error.set(null),this.avatarError=null,this.profileUpdated.emit()}fetchAvatar(){return p(this,null,function*(){let t=this.user()?.id;if(t)try{let{data:e,error:r}=yield k.from("profiles").select("avatar_url").eq("id",t).single();if(r)throw r;if(e?.avatar_url){let{data:i}=yield k.storage.from("avatars").createSignedUrl(e.avatar_url,3600);i&&(this.imageCache.prefetchImage(i.signedUrl),this.avatarUrl.set(i.signedUrl))}}catch(e){console.error("Error fetching avatar:",e)}})}uploadAvatar(t){return p(this,null,function*(){let e=t.target.files[0];if(e){if(e.size>2*1024*1024){this.avatarError="Image must be less than 2MB";return}if(!e.type.match(/image\/(jpeg|png|gif|webp)/)){this.avatarError="File must be an image (JPG, PNG, GIF, WEBP)";return}this.avatarError=null,this.uploading=!0;try{let r=yield this.autoCropImage(e),i=this.user()?.id;if(!i)throw new Error("User not logged in");let o=e.name.split(".").pop(),s=`${i}-${Date.now()}.${o}`,a=yield this.fileToDataUrl(r),{error:l}=yield k.storage.from("avatars").upload(s,r);if(l)throw l;let{data:c}=yield k.storage.from("avatars").createSignedUrl(s,3600);if(!c)throw new Error("Failed to get file URL");this.imageCache.storeImage(c.signedUrl,a),this.avatarUrl.set(c.signedUrl);let{error:u}=yield k.from("profiles").update({avatar_url:s}).eq("id",i);if(u)throw u;this.profileUpdated.emit()}catch(r){console.error("Error uploading avatar:",r),this.avatarError=r.message||"Failed to upload image"}finally{this.uploading=!1}}})}fileToDataUrl(t){return new Promise((e,r)=>{let i=new FileReader;i.onload=()=>e(i.result),i.onerror=r,i.readAsDataURL(t)})}autoCropImage(t){return new Promise((e,r)=>{let i=new FileReader;i.onload=o=>{let s=new Image;s.onload=()=>{let a=Math.min(s.width,s.height),l=(s.width-a)/2,c=(s.height-a)/2,u=document.createElement("canvas");u.width=a,u.height=a;let d=u.getContext("2d");if(!d){r(new Error("Could not get canvas context"));return}d.drawImage(s,l,c,a,a,0,0,a,a),u.toBlob(h=>{if(!h){r(new Error("Failed to create image blob"));return}let f=new File([h],t.name,{type:"image/png",lastModified:Date.now()});e(f)},"image/png")},s.onerror=()=>{r(new Error("Failed to load image"))},s.src=o.target?.result},i.onerror=()=>{r(new Error("Failed to read file"))},i.readAsDataURL(t)})}updateProfile(){return p(this,null,function*(){if(!this.username.trim()){this.error.set("Username cannot be empty");return}this.updating=!0,this.error.set(null);try{let t=this.user()?.id;if(!t)throw new Error("User not logged in");if(this.username!==this.user()?.username){let{data:r}=yield k.from("profiles").select("username").eq("username",this.username).neq("id",t).single();if(r){this.error.set("Username is already taken");return}}let{error:e}=yield k.from("profiles").update({username:this.username,updated_at:new Date().toISOString()}).eq("id",t);if(e)throw e;this.user()&&this.auth.user.set(P(D({},this.user()),{username:this.username})),this.profileUpdated.emit(),this.close()}catch(t){console.error("Error updating profile:",t),this.error.set(t.message||"Failed to update profile")}finally{this.updating=!1}})}logout(){return p(this,null,function*(){try{yield this.auth.logout(),this.close()}catch(t){console.error("Error logging out:",t)}})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=he({type:n,selectors:[["app-profile"]],outputs:{profileUpdated:"profileUpdated"},decls:1,vars:1,consts:[["fileInput",""],["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",4,"ngIf"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"bg-gray-800","p-6","rounded-lg","w-96","max-h-[90vh]","overflow-y-auto"],[1,"text-xl","font-bold","text-white","mb-4","flex","justify-between","items-center"],[1,"text-gray-400","hover:text-white",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"space-y-4"],[1,"flex","flex-col","items-center","mb-4"],[1,"relative","h-24","w-24"],["class","h-24 w-24 rounded-full overflow-hidden flex items-center justify-center",4,"ngIf"],["class","h-24 w-24 rounded-full bg-gray-700 flex items-center justify-center",4,"ngIf"],[1,"absolute","bottom-0","right-0","bg-purple-600","rounded-full","p-2","text-white","shadow-lg","hover:bg-purple-500",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 13a3 3 0 11-6 0 3 3 0 016 0z"],["type","file","accept","image/*",1,"hidden",3,"change"],["class","text-red-500 text-sm mt-2",4,"ngIf"],["for","username",1,"block","text-sm","font-medium","text-gray-300","mb-1"],["type","text","id","username","placeholder","Username",1,"w-full","border","border-gray-600","rounded","px-3","py-2","bg-gray-700","text-white",3,"ngModelChange","ngModel"],["class","text-red-500 text-sm",4,"ngIf"],[1,"flex","justify-between","mt-6"],[1,"px-4","py-2","bg-gray-600","text-white","rounded","hover:bg-gray-500",3,"click"],[1,"px-4","py-2","bg-purple-600","text-white","rounded","hover:bg-purple-500",3,"click","disabled"],[1,"mt-6","pt-6","border-t","border-gray-700"],[1,"w-full","px-4","py-2","bg-red-600","text-white","rounded","hover:bg-red-700","flex","items-center","justify-center","gap-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"],[1,"h-24","w-24","rounded-full","overflow-hidden","flex","items-center","justify-center"],[1,"w-full","h-full",3,"src","alt","fallbackText"],[1,"h-full","w-full","bg-purple-600","flex","items-center","justify-center"],[1,"text-2xl","text-white","font-bold"],[1,"h-24","w-24","rounded-full","bg-gray-700","flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-8","w-8","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-red-500","text-sm","mt-2"],[1,"text-red-500","text-sm"]],template:function(e,r){e&1&&R(0,aO,34,8,"div",1),e&2&&b("ngIf",r.isOpen())},dependencies:[ve,ke,dn,ut,Rt,kn,mn],encapsulation:2})};var lO=["profileModal"];function cO(n,t){n&1&&(g(0,"div",11)(1,"div",12)(2,"h2",13),_(3,"Welcome to AngChat!"),m(),g(4,"p",14),_(5,"Get started by:"),m(),g(6,"ul",15)(7,"li",16),_(8,"Creating a new guild (click the + button in the sidebar)"),m(),g(9,"li",16),_(10,"Creating a new channel (click the Create Channel button)"),m(),g(11,"li",16),_(12,"Inviting friends to join your guild"),m()(),g(13,"p"),_(14,"Happy chatting!"),m()()())}function uO(n,t){n&1&&O(0,"chat-list",17)}function dO(n,t){n&1&&O(0,"chat-input")}function fO(n,t){if(n&1&&O(0,"img",18),n&2){let e=E();b("src",e.avatarUrl,rn)}}function hO(n,t){if(n&1&&(g(0,"div",19),_(1),m()),n&2){let e=E();v(),xt(" ",e.getInitial()," ")}}var $u=class n{constructor(t,e,r,i){this.chatService=t;this.guildService=e;this.auth=r;this.isBrowser=gt(i)}profileModal;avatarUrl=null;isBrowser;ngOnInit(){if(!this.isBrowser){console.log("Chat component running in SSR mode - limited functionality");return}console.log("Chat component initialized in browser"),this.fetchUserAvatar()}ngOnDestroy(){this.isBrowser&&console.log("Chat component destroyed")}hasActiveChannel(){return this.isBrowser?!!this.guildService.activeChannel():!1}getUserName(){return this.isBrowser&&this.auth.user()?.username||"Profile"}getInitial(){return this.isBrowser&&this.auth.user()?.username?.charAt(0)?.toUpperCase()||"A"}openProfile(){this.isBrowser&&this.profileModal.open()}fetchUserAvatar(){return p(this,null,function*(){if(!this.isBrowser)return;let t=this.auth.user()?.id;if(t)try{let{data:e,error:r}=yield k.from("profiles").select("avatar_url").eq("id",t).single();if(r)throw r;if(e?.avatar_url){let{data:i}=yield k.storage.from("avatars").createSignedUrl(e.avatar_url,3600);i&&(this.avatarUrl=i.signedUrl)}}catch(e){console.error("Error fetching avatar:",e)}})}static \u0275fac=function(e){return new(e||n)(A(sr),A(kt),A(ge),A(xe))};static \u0275cmp=he({type:n,selectors:[["chat-page"]],viewQuery:function(e,r){if(e&1&&s0(lO,5),e&2){let i;Wo(i=Zo())&&(r.profileModal=i.first)}},decls:13,vars:6,consts:[["profileModal",""],[1,"flex","h-screen","w-full","bg-gray-900","text-white"],[1,"flex-1","flex","flex-col"],["class","flex-1 flex items-center justify-center",4,"ngIf"],["class","flex-1",4,"ngIf"],[4,"ngIf"],[1,"fixed","bottom-4","left-0","w-20","flex","justify-center","z-40"],[1,"h-12","w-12","rounded-full","flex","items-center","justify-center","text-white","font-bold","hover:opacity-80","transition-all","overflow-hidden","shadow-lg","border-2","border-gray-700",3,"click","title"],["class","h-full w-full object-cover","alt","Profile",3,"src",4,"ngIf"],["class","h-full w-full bg-purple-600 flex items-center justify-center",4,"ngIf"],[3,"profileUpdated"],[1,"flex-1","flex","items-center","justify-center"],[1,"text-center","text-gray-400","p-6","max-w-md"],[1,"text-xl","font-semibold","mb-4"],[1,"mb-4"],[1,"text-left","text-sm","list-disc","pl-6","mb-4"],[1,"mb-2"],[1,"flex-1"],["alt","Profile",1,"h-full","w-full","object-cover",3,"src"],[1,"h-full","w-full","bg-purple-600","flex","items-center","justify-center"]],template:function(e,r){if(e&1){let i=me();g(0,"div",1),O(1,"guild-sidebar")(2,"channel-list"),g(3,"div",2),R(4,cO,15,0,"div",3)(5,uO,1,0,"chat-list",4)(6,dO,1,0,"chat-input",5),m(),g(7,"div",6)(8,"button",7),V("click",function(){return L(i),j(r.openProfile())}),R(9,fO,1,1,"img",8)(10,hO,2,1,"div",9),m()()(),g(11,"app-profile",10,0),V("profileUpdated",function(){return L(i),j(r.fetchUserAvatar())}),m()}e&2&&(v(4),b("ngIf",!r.isBrowser||!r.hasActiveChannel()),v(),b("ngIf",r.isBrowser&&r.hasActiveChannel()),v(),b("ngIf",r.isBrowser&&r.hasActiveChannel()),v(2),b("title",r.getUserName()),v(),b("ngIf",r.avatarUrl),v(),b("ngIf",!r.avatarUrl))},dependencies:[ve,ke,Lu,ju,Vu,Uu,Bu],encapsulation:2})};var JC=(n,t)=>p(void 0,null,function*(){let e=w(ge),r=w(ye);if(console.log("Auth guard checking authentication"),e.user())return console.log("User found in auth service state, allowing access"),!0;console.log("No user in auth service, checking Supabase session");let{data:i}=yield k.auth.getSession();if(i.session?.user){console.log("Valid session found in Supabase, updating auth service"),e.user.set(i.session.user);try{let{data:o}=yield k.from("profiles").select("username").eq("id",i.session.user.id).single();o&&e.user.update(s=>s?P(D({},s),{username:o.username}):null)}catch(o){console.error("Error fetching profile in guard:",o)}return!0}return console.log("No authenticated user found, redirecting to login"),r.navigate(["/login"]),!1});Kh(Nu,{providers:[Xh(),dn,no,xp([{path:"",redirectTo:"chat",pathMatch:"full"},{path:"login",component:Ou},{path:"register",component:Pu},{path:"verify-email",component:Fu},{path:"chat",component:$u,canActivate:[JC]},{path:"**",redirectTo:"chat"}])]}).catch(n=>console.error(n));
